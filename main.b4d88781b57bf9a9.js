"use strict";(self.webpackChunkletras=self.webpackChunkletras||[]).push([[792],{880:(gd,$2,da)=>{var qi={};da.r(qi),da.d(qi,{AbortException:()=>ej,AnnotationEditorLayer:()=>tj,AnnotationEditorParamsType:()=>nj,AnnotationEditorType:()=>yb,AnnotationEditorUIManager:()=>ij,AnnotationLayer:()=>rj,AnnotationMode:()=>sj,ColorPicker:()=>aj,DOMSVGFactory:()=>oj,DrawLayer:()=>lj,FeatureTest:()=>cj,GlobalWorkerOptions:()=>mb,ImageKind:()=>hj,InvalidPDFException:()=>dj,MissingPDFException:()=>uj,OPS:()=>pj,OutputScale:()=>fj,PDFDataRangeTransport:()=>gj,PDFDateString:()=>yj,PDFWorker:()=>mj,PasswordResponses:()=>kj,PermissionFlag:()=>vj,PixelsPerInch:()=>Mj,RenderingCancelledException:()=>wj,TextLayer:()=>bj,UnexpectedResponseException:()=>xj,Util:()=>Cj,VerbosityLevel:()=>kb,XfaLayer:()=>_j,build:()=>Aj,createValidAbsoluteUrl:()=>Ej,fetchData:()=>Sj,getDocument:()=>vb,getFilenameFromUrl:()=>Dj,getPdfFilenameFromUrl:()=>Ij,getXfaPageViewport:()=>Tj,isDataScheme:()=>Pj,isPdfFile:()=>Rj,noContextMenu:()=>Lj,normalizeUnicode:()=>Oj,setLayerDimensions:()=>Fj,shadow:()=>Nj,version:()=>td});var yd={};function ue(n){return"function"==typeof n}function md(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}da.r(yd),da.d(yd,{AnnotationLayerBuilder:()=>Wz,DownloadManager:()=>Gz,EventBus:()=>Zz,FindState:()=>Xz,GenericL10n:()=>gx,LinkTarget:()=>ca,PDFFindController:()=>yx,PDFHistory:()=>Yz,PDFLinkService:()=>mx,PDFPageView:()=>Kz,PDFScriptingManager:()=>Qz,PDFSinglePageViewer:()=>kx,PDFViewer:()=>vx,ProgressBar:()=>Jz,RenderingStates:()=>eB,ScrollMode:()=>tB,SimpleLinkService:()=>nB,SpreadMode:()=>iB,StructTreeLayerBuilder:()=>rB,TextLayerBuilder:()=>sB,XfaLayerBuilder:()=>aB,parseQueryString:()=>oB});const kd=md(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function fl(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Bt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ue(i))try{i()}catch(s){e=s instanceof kd?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Z2(s)}catch(a){e=e??[],a instanceof kd?e=[...e,...a.errors]:e.push(a)}}if(e)throw new kd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Z2(e);else{if(e instanceof Bt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fl(t,e)}remove(e){const{_finalizers:t}=this;t&&fl(t,e),e instanceof Bt&&e._removeParent(this)}}Bt.EMPTY=(()=>{const n=new Bt;return n.closed=!0,n})();const W2=Bt.EMPTY;function G2(n){return n instanceof Bt||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function Z2(n){ue(n)?n():n.unsubscribe()}const pr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},gl={setTimeout(n,e,...t){const{delegate:i}=gl;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=gl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function X2(n){gl.setTimeout(()=>{const{onUnhandledError:e}=pr;if(!e)throw n;e(n)})}function vd(){}const Sx=Md("C",void 0,void 0);function Md(n,e,t){return{kind:n,value:e,error:t}}let fr=null;function yl(n){if(pr.useDeprecatedSynchronousErrorHandling){const e=!fr;if(e&&(fr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=fr;if(fr=null,t)throw i}}else n()}class wd extends Bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,G2(e)&&e.add(this)):this.destination=Ox}static create(e,t,i){return new ua(e,t,i)}next(e){this.isStopped?xd(function Ix(n){return Md("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?xd(function Dx(n){return Md("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xd(Sx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Px=Function.prototype.bind;function bd(n,e){return Px.call(n,e)}class Rx{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){ml(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){ml(i)}else ml(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ml(t)}}}class ua extends wd{constructor(e,t,i){let r;if(super(),ue(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&pr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&bd(e.next,s),error:e.error&&bd(e.error,s),complete:e.complete&&bd(e.complete,s)}):r=e}this.destination=new Rx(r)}}function ml(n){pr.useDeprecatedSynchronousErrorHandling?function Tx(n){pr.useDeprecatedSynchronousErrorHandling&&fr&&(fr.errorThrown=!0,fr.error=n)}(n):X2(n)}function xd(n,e){const{onStoppedNotification:t}=pr;t&&gl.setTimeout(()=>t(n,e))}const Ox={closed:!0,next:vd,error:function Lx(n){throw n},complete:vd},Cd="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ui(n){return n}function Y2(n){return 0===n.length?Ui:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function Vx(n){return n&&n instanceof wd||function Nx(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}(n)&&G2(n)}(t)?t:new ua(t,i,r);return yl(()=>{const{operator:a,source:o}=this;s.add(a?a.call(s,o):o?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=K2(i))((r,s)=>{const a=new ua({next:o=>{try{t(o)}catch(l){s(l),a.unsubscribe()}},error:s,complete:r});this.subscribe(a)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Cd](){return this}pipe(...t){return Y2(t)(this)}toPromise(t){return new(t=K2(t))((i,r)=>{let s;this.subscribe(a=>s=a,a=>r(a),()=>i(s))})}}return n.create=e=>new n(e),n})();function K2(n){var e;return null!==(e=n??pr.Promise)&&void 0!==e?e:Promise}const jx=md(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yn=(()=>{class n extends Ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Q2(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new jx}next(t){yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?W2:(this.currentObservers=null,s.push(t),new Bt(()=>{this.currentObservers=null,fl(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Ue;return t.source=this,t}}return n.create=(e,t)=>new Q2(e,t),n})();class Q2 extends yn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:W2}}function J2(n){return ue(n?.lift)}function Ke(n){return e=>{if(J2(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function $e(n,e,t,i,r){return new Hx(n,e,t,i,r)}class Hx extends wd{constructor(e,t,i,r,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(o){try{t(o)}catch(l){e.error(l)}}:super._next,this._error=r?function(o){try{r(o)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function xe(n,e){return Ke((t,i)=>{let r=0;t.subscribe($e(i,s=>{i.next(n.call(e,s,r++))}))})}function $i(n){return this instanceof $i?(this.v=n,this):new $i(n)}function r0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Sd(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(a){return new Promise(function(o,l){!function r(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}(o,l,(a=n[s](a)).done,a.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Id=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function s0(n){return ue(n?.then)}function a0(n){return ue(n[Cd])}function o0(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function l0(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const c0=function p6(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function h0(n){return ue(n?.[c0])}function d0(n){return function n0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function a(p){return function(f){return Promise.resolve(f).then(p,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function o(p,f){i[p]&&(r[p]=function(g){return new Promise(function(m,y){s.push([p,g,m,y])>1||l(p,g)})},f&&(r[p]=f(r[p])))}function l(p,f){try{!function c(p){p.value instanceof $i?Promise.resolve(p.value.v).then(h,d):u(s[0][2],p)}(i[p](f))}catch(g){u(s[0][3],g)}}function h(p){l("next",p)}function d(p){l("throw",p)}function u(p,f){p(f),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield $i(t.read());if(r)return yield $i(void 0);yield yield $i(i)}}finally{t.releaseLock()}})}function u0(n){return ue(n?.getReader)}function qt(n){if(n instanceof Ue)return n;if(null!=n){if(a0(n))return function f6(n){return new Ue(e=>{const t=n[Cd]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Id(n))return function g6(n){return new Ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(s0(n))return function y6(n){return new Ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,X2)})}(n);if(o0(n))return p0(n);if(h0(n))return function m6(n){return new Ue(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(u0(n))return function k6(n){return p0(d0(n))}(n)}throw l0(n)}function p0(n){return new Ue(e=>{(function v6(n,e){var t,i,r,s;return function e0(n,e,t,i){return new(t||(t=Promise))(function(s,a){function o(h){try{c(i.next(h))}catch(d){a(d)}}function l(h){try{c(i.throw(h))}catch(d){a(d)}}function c(h){h.done?s(h.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(h.value).then(o,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=r0(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function fi(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function ht(n,e,t=1/0){return ue(e)?ht((i,r)=>xe((s,a)=>e(i,s,r,a))(qt(n(i,r))),t):("number"==typeof e&&(t=e),Ke((i,r)=>function M6(n,e,t,i,r,s,a,o){const l=[];let c=0,h=0,d=!1;const u=()=>{d&&!l.length&&!c&&e.complete()},p=g=>c<i?f(g):l.push(g),f=g=>{s&&e.next(g),c++;let m=!1;qt(t(g,h++)).subscribe($e(e,y=>{r?.(y),s?p(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<i;){const y=l.shift();a?fi(e,a,()=>f(y)):f(y)}u()}catch(y){e.error(y)}}))};return n.subscribe($e(e,p,()=>{d=!0,u()})),()=>{o?.()}}(i,r,n,t)))}function Ur(n=1/0){return ht(Ui,n)}const Gn=new Ue(n=>n.complete());function Td(n){return n[n.length-1]}function f0(n){return ue(Td(n))?n.pop():void 0}function pa(n){return function b6(n){return n&&ue(n.schedule)}(Td(n))?n.pop():void 0}function g0(n,e=0){return Ke((t,i)=>{t.subscribe($e(i,r=>fi(i,n,()=>i.next(r),e),()=>fi(i,n,()=>i.complete(),e),r=>fi(i,n,()=>i.error(r),e)))})}function y0(n,e=0){return Ke((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function m0(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ue(t=>{fi(t,e,()=>{const i=n[Symbol.asyncIterator]();fi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Qe(n,e){return e?function D6(n,e){if(null!=n){if(a0(n))return function C6(n,e){return qt(n).pipe(y0(e),g0(e))}(n,e);if(Id(n))return function A6(n,e){return new Ue(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(s0(n))return function _6(n,e){return qt(n).pipe(y0(e),g0(e))}(n,e);if(o0(n))return m0(n,e);if(h0(n))return function E6(n,e){return new Ue(t=>{let i;return fi(t,e,()=>{i=n[c0](),fi(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(a){return void t.error(a)}s?t.complete():t.next(r)},0,!0)}),()=>ue(i?.return)&&i.return()})}(n,e);if(u0(n))return function S6(n,e){return m0(d0(n),e)}(n,e)}throw l0(n)}(n,e):qt(n)}class mn extends yn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function U(...n){return Qe(n,pa(n))}function k0(n={}){const{connector:e=(()=>new yn),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let a,o,l,c=0,h=!1,d=!1;const u=()=>{o?.unsubscribe(),o=void 0},p=()=>{u(),a=l=void 0,h=d=!1},f=()=>{const g=a;p(),g?.unsubscribe()};return Ke((g,m)=>{c++,!d&&!h&&u();const y=l=l??e();m.add(()=>{c--,0===c&&!d&&!h&&(o=Pd(f,r))}),y.subscribe(m),!a&&c>0&&(a=new ua({next:k=>y.next(k),error:k=>{d=!0,u(),o=Pd(p,t,k),y.error(k)},complete:()=>{h=!0,u(),o=Pd(p,i),y.complete()}}),qt(g).subscribe(a))})(s)}}function Pd(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new ua({next:()=>{i.unsubscribe(),n()}});return qt(e(...t)).subscribe(i)}function Zn(n,e){return Ke((t,i)=>{let r=null,s=0,a=!1;const o=()=>a&&!r&&i.complete();t.subscribe($e(i,l=>{r?.unsubscribe();let c=0;const h=s++;qt(n(l,h)).subscribe(r=$e(i,d=>i.next(e?e(l,d,h,c++):d),()=>{r=null,o()}))},()=>{a=!0,o()}))})}function P6(n,e){return n===e}function me(n){for(let e in n)if(n[e]===me)return e;throw Error("Could not find renamed property on target object.")}function kl(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function rt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(rt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Rd(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const R6=me({__forward_ref__:me});function Ae(n){return n.__forward_ref__=Ae,n.toString=function(){return rt(this())},n}function B(n){return Ld(n)?n():n}function Ld(n){return"function"==typeof n&&n.hasOwnProperty(R6)&&n.__forward_ref__===Ae}function Od(n){return n&&!!n.\u0275providers}const v0="https://g.co/ng/security#xss";class I extends Error{constructor(e,t){super(function vl(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function $(n){return"string"==typeof n?n:null==n?"":String(n)}function Fd(n,e){throw new I(-201,!1)}function kn(n,e){null==n&&function H(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ml(n){return M0(n,bl)||M0(n,w0)}function M0(n,e){return n.hasOwnProperty(e)?n[e]:null}function wl(n){return n&&(n.hasOwnProperty(Nd)||n.hasOwnProperty(z6))?n[Nd]:null}const bl=me({\u0275prov:me}),Nd=me({\u0275inj:me}),w0=me({ngInjectableDef:me}),z6=me({ngInjectorDef:me});var ne=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ne||{});let Vd;function Ut(n){const e=Vd;return Vd=n,e}function x0(n,e,t){const i=Ml(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ne.Optional?null:void 0!==e?e:void Fd(rt(n))}const Ee=globalThis;class O{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const fa={},qd="__NG_DI_FLAG__",xl="ngTempTokenPath",U6=/\n/gm,_0="__source";let $r;function Wi(n){const e=$r;return $r=n,e}function G6(n,e=ne.Default){if(void 0===$r)throw new I(-203,!1);return null===$r?x0(n,void 0,e):$r.get(n,e&ne.Optional?null:void 0,e)}function V(n,e=ne.Default){return(function b0(){return Vd}()||G6)(B(n),e)}function L(n,e=ne.Default){return V(n,Cl(e))}function Cl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ud(n){const e=[];for(let t=0;t<n.length;t++){const i=B(n[t]);if(Array.isArray(i)){if(0===i.length)throw new I(900,!1);let r,s=ne.Default;for(let a=0;a<i.length;a++){const o=i[a],l=Z6(o);"number"==typeof l?-1===l?r=o.token:s|=l:r=o}e.push(V(r,s))}else e.push(V(i))}return e}function ga(n,e){return n[qd]=e,n.prototype[qd]=e,n}function Z6(n){return n[qd]}function gi(n){return{toString:n}.toString()}var _l=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_l||{}),Ln=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ln||{});const Xn={},pe=[],Al=me({\u0275cmp:me}),$d=me({\u0275dir:me}),Wd=me({\u0275pipe:me}),E0=me({\u0275mod:me}),yi=me({\u0275fac:me}),ya=me({__NG_ELEMENT_ID__:me}),S0=me({__NG_ENV_ID__:me});function D0(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Gd(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],a=t[i++],o=t[i++];n.setAttribute(e,a,o,s)}else{const s=r,a=t[++i];T0(s)?n.setProperty(e,s,a):n.setAttribute(e,s,a),i++}}return i}function I0(n){return 3===n||4===n||6===n}function T0(n){return 64===n.charCodeAt(0)}function ma(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||P0(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function P0(n,e,t,i,r){let s=0,a=n.length;if(-1===e)a=-1;else for(;s<n.length;){const o=n[s++];if("number"==typeof o){if(o===e){a=-1;break}if(o>e){a=s-1;break}}}for(;s<n.length;){const o=n[s];if("number"==typeof o)break;if(o===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==a&&(n.splice(a,0,e),s=a+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const R0="ng-template";function K6(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const a=n[i++];if(t&&"class"===s&&-1!==D0(a.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function L0(n){return 4===n.type&&n.value!==R0}function Q6(n,e,t){return e===(4!==n.type||t?n.value:R0)}function J6(n,e,t){let i=4;const r=n.attrs||[],s=function n8(n){for(let e=0;e<n.length;e++)if(I0(n[e]))return e;return n.length}(r);let a=!1;for(let o=0;o<e.length;o++){const l=e[o];if("number"!=typeof l){if(!a)if(4&i){if(i=2|1&i,""!==l&&!Q6(n,l,t)||""===l&&1===e.length){if(On(i))return!1;a=!0}}else{const c=8&i?l:e[++o];if(8&i&&null!==n.attrs){if(!K6(n.attrs,c,t)){if(On(i))return!1;a=!0}continue}const d=e8(8&i?"class":l,r,L0(n),t);if(-1===d){if(On(i))return!1;a=!0;continue}if(""!==c){let u;u=d>s?"":r[d+1].toLowerCase();const p=8&i?u:null;if(p&&-1!==D0(p,c,0)||2&i&&c!==u){if(On(i))return!1;a=!0}}}}else{if(!a&&!On(i)&&!On(l))return!1;if(a&&On(l))continue;a=!1,i=l|1&i}}return On(i)||a}function On(n){return 0==(1&n)}function e8(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const a=e[r];if(a===n)return r;if(3===a||6===a)s=!0;else{if(1===a||2===a){let o=e[++r];for(;"string"==typeof o;)o=e[++r];continue}if(4===a)break;if(0===a){r+=4;continue}}r+=s?1:2}return-1}return function i8(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function O0(n,e,t=!1){for(let i=0;i<e.length;i++)if(J6(n,e[i],t))return!0;return!1}function F0(n,e){return n?":not("+e.trim()+")":e}function s8(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&i){const o=n[++t];r+="["+a+(o.length>0?'="'+o+'"':"")+"]"}else 8&i?r+="."+a:4&i&&(r+=" "+a);else""!==r&&!On(a)&&(e+=F0(s,r),r=""),i=a,s=s||!On(i);t++}return""!==r&&(e+=F0(s,r)),e}function ka(n){return gi(()=>{const e=V0(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_l.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ln.Emulated,styles:n.styles||pe,_:null,schemas:n.schemas||null,tView:null,id:""};j0(t);const i=n.dependencies;return t.directiveDefs=El(i,!1),t.pipeDefs=El(i,!0),t.id=function p8(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function c8(n){return le(n)||pt(n)}function h8(n){return null!==n}function vn(n){return gi(()=>({type:n.type,bootstrap:n.bootstrap||pe,declarations:n.declarations||pe,imports:n.imports||pe,exports:n.exports||pe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function N0(n,e){if(null==n)return Xn;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function q(n){return gi(()=>{const e=V0(n);return j0(e),e})}function le(n){return n[Al]||null}function pt(n){return n[$d]||null}function It(n){return n[Wd]||null}function an(n,e){const t=n[E0]||null;if(!t&&!0===e)throw new Error(`Type ${rt(n)} does not have '\u0275mod' property.`);return t}function V0(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Xn,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||pe,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:N0(n.inputs,e),outputs:N0(n.outputs)}}function j0(n){n.features?.forEach(e=>e(n))}function El(n,e){if(!n)return null;const t=e?It:c8;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(h8)}const je=0,R=1,K=2,Pe=3,Fn=4,va=5,vt=6,Gr=7,We=8,Gi=9,Zr=10,W=11,Ma=12,H0=13,Xr=14,Ge=15,wa=16,Yr=17,Yn=18,ba=19,z0=20,Zi=21,mi=22,xa=23,Ca=24,ie=25,Zd=1,B0=2,Kn=7,Kr=9,ft=11;function Wt(n){return Array.isArray(n)&&"object"==typeof n[Zd]}function Tt(n){return Array.isArray(n)&&!0===n[Zd]}function Xd(n){return 0!=(4&n.flags)}function yr(n){return n.componentOffset>-1}function Dl(n){return 1==(1&n.flags)}function Nn(n){return!!n.template}function Yd(n){return 0!=(512&n[K])}function mr(n,e){return n.hasOwnProperty(yi)?n[yi]:null}let gt=null,Il=!1;function Mn(n){const e=gt;return gt=n,e}const $0={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function G0(n){if(!Aa(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Y0(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function X0(n){n.dirty=!0,function Z0(n){if(void 0===n.liveConsumerNode)return;const e=Il;Il=!0;try{for(const t of n.liveConsumerNode)t.dirty||X0(t)}finally{Il=e}}(n),n.consumerMarkedDirty?.(n)}function Qd(n){return n&&(n.nextProducerIndex=0),Mn(n)}function Jd(n,e){if(Mn(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Aa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Y0(n){Qr(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(G0(t),i!==t.version))return!0}return!1}function K0(n){if(Qr(n),Aa(n))for(let e=0;e<n.producerNode.length;e++)Tl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Tl(n,e){if(function J0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Qr(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Tl(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Qr(r),r.producerIndexOfThis[i]=e}}function Aa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Qr(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let eg=null;const rg=()=>{},A8=(()=>({...$0,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:rg}))();class E8{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function on(){return sg}function sg(n){return n.type.prototype.ngOnChanges&&(n.setInput=D8),S8}function S8(){const n=og(this),e=n?.current;if(e){const t=n.previous;if(t===Xn)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function D8(n,e,t,i){const r=this.declaredInputs[t],s=og(n)||function I8(n,e){return n[ag]=e}(n,{previous:Xn,current:null}),a=s.current||(s.current={}),o=s.previous,l=o[r];a[r]=new E8(l&&l.currentValue,e,o===Xn),n[i]=e}on.ngInherit=!0;const ag="__ngSimpleChanges__";function og(n){return n[ag]||null}const Qn=function(n,e,t){};function Se(n){for(;Array.isArray(n);)n=n[je];return n}function Pl(n,e){return Se(e[n])}function Gt(n,e){return Se(e[n.index])}function hg(n,e){return n.data[e]}function ln(n,e){const t=e[n];return Wt(t)?t:t[je]}function Yi(n,e){return null==e?null:n[e]}function dg(n){n[Yr]=0}function F8(n){1024&n[K]||(n[K]|=1024,pg(n,1))}function ug(n){1024&n[K]&&(n[K]&=-1025,pg(n,-1))}function pg(n,e){let t=n[Pe];if(null===t)return;t[va]+=e;let i=t;for(t=t[Pe];null!==t&&(1===e&&1===i[va]||-1===e&&0===i[va]);)t[va]+=e,i=t,t=t[Pe]}const z={lFrame:Cg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function yg(){return z.bindingsEnabled}function D(){return z.lFrame.lView}function ce(){return z.lFrame.tView}function ki(n){return z.lFrame.contextLView=n,n[We]}function vi(n){return z.lFrame.contextLView=null,n}function yt(){let n=mg();for(;null!==n&&64===n.type;)n=n.parent;return n}function mg(){return z.lFrame.currentTNode}function Jn(n,e){const t=z.lFrame;t.currentTNode=n,t.isParent=e}function ru(){return z.lFrame.isParent}function su(){z.lFrame.isParent=!1}function ts(){return z.lFrame.bindingIndex++}function Z8(n,e){const t=z.lFrame;t.bindingIndex=t.bindingRootIndex=n,au(e)}function au(n){z.lFrame.currentDirectiveIndex=n}function wg(){return z.lFrame.currentQueryIndex}function lu(n){z.lFrame.currentQueryIndex=n}function Y8(n){const e=n[R];return 2===e.type?e.declTNode:1===e.type?n[vt]:null}function bg(n,e,t){if(t&ne.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&ne.Host||(r=Y8(s),null===r||(s=s[Xr],10&r.type))););if(null===r)return!1;e=r,n=s}const i=z.lFrame=xg();return i.currentTNode=e,i.lView=n,!0}function cu(n){const e=xg(),t=n[R];z.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function xg(){const n=z.lFrame,e=null===n?null:n.child;return null===e?Cg(n):e}function Cg(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function _g(){const n=z.lFrame;return z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ag=_g;function hu(){const n=_g();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Rt(){return z.lFrame.selectedIndex}function kr(n){z.lFrame.selectedIndex=n}let Sg=!0;function Rl(){return Sg}function Ki(n){Sg=n}function Ll(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:o,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=s;a&&(n.contentHooks??=[]).push(-t,a),o&&((n.contentHooks??=[]).push(t,o),(n.contentCheckHooks??=[]).push(t,o)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function Ol(n,e,t){Dg(n,e,3,t)}function Fl(n,e,t,i){(3&n[K])===t&&Dg(n,e,t,i)}function du(n,e){let t=n[K];(3&t)===e&&(t&=8191,t+=1,n[K]=t)}function Dg(n,e,t,i){const s=i??-1,a=e.length-1;let o=0;for(let l=void 0!==i?65535&n[Yr]:0;l<a;l++)if("number"==typeof e[l+1]){if(o=e[l],null!=i&&o>=i)break}else e[l]<0&&(n[Yr]+=65536),(o<s||-1==s)&&(rC(n,t,e,l),n[Yr]=(4294901760&n[Yr])+l+2),l++}function Ig(n,e){Qn(4,n,e);const t=Mn(null);try{e.call(n)}finally{Mn(t),Qn(5,n,e)}}function rC(n,e,t,i){const r=t[i]<0,s=t[i+1],o=n[r?-t[i]:t[i]];r?n[K]>>13<n[Yr]>>16&&(3&n[K])===e&&(n[K]+=8192,Ig(o,s)):Ig(o,s)}const ns=-1;class Sa{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function pu(n){return n!==ns}function Da(n){return 32767&n}function Ia(n,e){let t=function lC(n){return n>>16}(n),i=e;for(;t>0;)i=i[Xr],t--;return i}let fu=!0;function Nl(n){const e=fu;return fu=n,e}const Tg=255,Pg=5;let cC=0;const ei={};function Vl(n,e){const t=Rg(n,e);if(-1!==t)return t;const i=e[R];i.firstCreatePass&&(n.injectorIndex=e.length,gu(i.data,n),gu(e,null),gu(i.blueprint,null));const r=jl(n,e),s=n.injectorIndex;if(pu(r)){const a=Da(r),o=Ia(r,e),l=o[R].data;for(let c=0;c<8;c++)e[s+c]=o[a+c]|l[a+c]}return e[s+8]=r,s}function gu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Rg(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function jl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Hg(r),null===i)return ns;if(t++,r=r[Xr],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ns}function yu(n,e,t){!function hC(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(ya)&&(i=t[ya]),null==i&&(i=t[ya]=cC++);const r=i&Tg;e.data[n+(r>>Pg)]|=1<<r}(n,e,t)}function Lg(n,e,t){if(t&ne.Optional||void 0!==n)return n;Fd()}function Og(n,e,t,i){if(t&ne.Optional&&void 0===i&&(i=null),!(t&(ne.Self|ne.Host))){const r=n[Gi],s=Ut(void 0);try{return r?r.get(e,i,t&ne.Optional):x0(e,i,t&ne.Optional)}finally{Ut(s)}}return Lg(i,0,t)}function Fg(n,e,t,i=ne.Default,r){if(null!==n){if(2048&e[K]&&!(i&ne.Self)){const a=function yC(n,e,t,i,r){let s=n,a=e;for(;null!==s&&null!==a&&2048&a[K]&&!(512&a[K]);){const o=Ng(s,a,t,i|ne.Self,ei);if(o!==ei)return o;let l=s.parent;if(!l){const c=a[z0];if(c){const h=c.get(t,ei,i);if(h!==ei)return h}l=Hg(a),a=a[Xr]}s=l}return r}(n,e,t,i,ei);if(a!==ei)return a}const s=Ng(n,e,t,i,ei);if(s!==ei)return s}return Og(e,t,i,r)}function Ng(n,e,t,i,r){const s=function pC(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ya)?n[ya]:void 0;return"number"==typeof e?e>=0?e&Tg:gC:e}(t);if("function"==typeof s){if(!bg(e,n,i))return i&ne.Host?Lg(r,0,i):Og(e,t,i,r);try{let a;if(a=s(i),null!=a||i&ne.Optional)return a;Fd()}finally{Ag()}}else if("number"==typeof s){let a=null,o=Rg(n,e),l=ns,c=i&ne.Host?e[Ge][vt]:null;for((-1===o||i&ne.SkipSelf)&&(l=-1===o?jl(n,e):e[o+8],l!==ns&&jg(i,!1)?(a=e[R],o=Da(l),e=Ia(l,e)):o=-1);-1!==o;){const h=e[R];if(Vg(s,o,h.data)){const d=uC(o,e,t,a,i,c);if(d!==ei)return d}l=e[o+8],l!==ns&&jg(i,e[R].data[o+8]===c)&&Vg(s,o,e)?(a=h,o=Da(l),e=Ia(l,e)):o=-1}}return r}function uC(n,e,t,i,r,s){const a=e[R],o=a.data[n+8],h=Hl(o,a,t,null==i?yr(o)&&fu:i!=a&&0!=(3&o.type),r&ne.Host&&s===o);return null!==h?vr(e,a,h,o):ei}function Hl(n,e,t,i,r){const s=n.providerIndexes,a=e.data,o=1048575&s,l=n.directiveStart,h=s>>20,u=r?o+h:n.directiveEnd;for(let p=i?o:o+h;p<u;p++){const f=a[p];if(p<l&&t===f||p>=l&&f.type===t)return p}if(r){const p=a[l];if(p&&Nn(p)&&p.type===t)return l}return null}function vr(n,e,t,i){let r=n[t];const s=e.data;if(function sC(n){return n instanceof Sa}(r)){const a=r;a.resolving&&function L6(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new I(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ye(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():$(n)}(s[t]));const o=Nl(a.canSeeViewProviders);a.resolving=!0;const c=a.injectImpl?Ut(a.injectImpl):null;bg(n,i,ne.Default);try{r=n[t]=a.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function iC(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const a=sg(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Ut(c),Nl(o),a.resolving=!1,Ag()}}return r}function Vg(n,e,t){return!!(t[e+(n>>Pg)]&1<<n)}function jg(n,e){return!(n&ne.Self||n&ne.Host&&e)}class Lt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Fg(this._tNode,this._lView,e,Cl(i),t)}}function gC(){return new Lt(yt(),D())}function mt(n){return gi(()=>{const e=n.prototype.constructor,t=e[yi]||mu(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[yi]||mu(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function mu(n){return Ld(n)?()=>{const e=mu(B(n));return e&&e()}:mr(n)}function Hg(n){const e=n[R],t=e.type;return 2===t?e.declTNode:1===t?n[vt]:null}const rs="__parameters__";function as(n,e,t){return gi(()=>{const i=function ku(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const a=new r(...s);return o.annotation=a,o;function o(l,c,h){const d=l.hasOwnProperty(rs)?l[rs]:Object.defineProperty(l,rs,{value:[]})[rs];for(;d.length<=h;)d.push(null);return(d[h]=d[h]||[]).push(a),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function ls(n,e){n.forEach(t=>Array.isArray(t)?ls(t,e):e(t))}function Bg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Bl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function cn(n,e,t){let i=cs(n,e);return i>=0?n[1|i]=t:(i=~i,function xC(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function vu(n,e){const t=cs(n,e);if(t>=0)return n[1|t]}function cs(n,e){return function qg(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),a=n[s<<t];if(e===a)return s<<t;a>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const La=ga(as("Optional"),8),Ul=ga(as("SkipSelf"),4);function Xl(n){return 128==(128&n.flags)}var Qi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qi||{});const UC=/^>|^->|<!--|-->|--!>|<!-$/g,$C=/(<|>)/g,WC="\u200b$1\u200b";const Cu=new Map;let GC=0;const Au="__ngContext__";function Mt(n,e){Wt(e)?(n[Au]=e[ba],function XC(n){Cu.set(n[ba],n)}(e)):n[Au]=e}let Eu;function Su(n,e){return Eu(n,e)}function Na(n){const e=n[Pe];return Tt(e)?e[Pe]:e}function cy(n){return dy(n[Ma])}function hy(n){return dy(n[Fn])}function dy(n){for(;null!==n&&!Tt(n);)n=n[Fn];return n}function us(n,e,t,i,r){if(null!=i){let s,a=!1;Tt(i)?s=i:Wt(i)&&(a=!0,i=i[je]);const o=Se(i);0===n&&null!==t?null==r?gy(e,t,o):Mr(e,t,o,r||null,!0):1===n&&null!==t?Mr(e,t,o,r||null,!0):2===n?function nc(n,e,t){const i=ec(n,e);i&&function f_(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,o,a):3===n&&e.destroyNode(o),null!=s&&function m_(n,e,t,i,r){const s=t[Kn];s!==Se(t)&&us(e,n,i,s,r);for(let o=ft;o<t.length;o++){const l=t[o];ja(l[R],l,n,e,i,s)}}(e,n,s,t,r)}}function Du(n,e){return n.createComment(function ty(n){return n.replace(UC,e=>e.replace($C,WC))}(e))}function Ql(n,e,t){return n.createElement(e,t)}function py(n,e){const t=n[Kr],i=t.indexOf(e);ug(e),t.splice(i,1)}function Jl(n,e){if(n.length<=ft)return;const t=ft+e,i=n[t];if(i){const r=i[wa];null!==r&&r!==n&&py(r,i),e>0&&(n[t-1][Fn]=i[Fn]);const s=Bl(n,ft+e);!function a_(n,e){ja(n,e,e[W],2,null,null),e[je]=null,e[vt]=null}(i[R],i);const a=s[Yn];null!==a&&a.detachView(s[R]),i[Pe]=null,i[Fn]=null,i[K]&=-129}return i}function Iu(n,e){if(!(256&e[K])){const t=e[W];e[xa]&&K0(e[xa]),e[Ca]&&K0(e[Ca]),t.destroyNode&&ja(n,e,t,3,null,null),function c_(n){let e=n[Ma];if(!e)return Tu(n[R],n);for(;e;){let t=null;if(Wt(e))t=e[Ma];else{const i=e[ft];i&&(t=i)}if(!t){for(;e&&!e[Fn]&&e!==n;)Wt(e)&&Tu(e[R],e),e=e[Pe];null===e&&(e=n),Wt(e)&&Tu(e[R],e),t=e&&e[Fn]}e=t}}(e)}}function Tu(n,e){if(!(256&e[K])){e[K]&=-129,e[K]|=256,function p_(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Sa)){const s=t[i+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const o=r[s[a]],l=s[a+1];Qn(4,o,l);try{l.call(o)}finally{Qn(5,o,l)}}else{Qn(4,r,s);try{s.call(r)}finally{Qn(5,r,s)}}}}}(n,e),function u_(n,e){const t=n.cleanup,i=e[Gr];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[Gr]=null);const r=e[Zi];if(null!==r){e[Zi]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[R].type&&e[W].destroy();const t=e[wa];if(null!==t&&Tt(e[Pe])){t!==e[Pe]&&py(t,e);const i=e[Yn];null!==i&&i.detachView(n)}!function YC(n){Cu.delete(n[ba])}(e)}}function Pu(n,e,t){return function fy(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[je];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Ln.None||s===Ln.Emulated)return null}return Gt(i,t)}}(n,e.parent,t)}function Mr(n,e,t,i,r){n.insertBefore(e,t,i,r)}function gy(n,e,t){n.appendChild(e,t)}function yy(n,e,t,i,r){null!==i?Mr(n,e,t,i,r):gy(n,e,t)}function ec(n,e){return n.parentNode(e)}let Ru,ic,Nu,vy=function ky(n,e,t){return 40&n.type?Gt(n,t):null};function tc(n,e,t,i){const r=Pu(n,i,e),s=e[W],o=function my(n,e,t){return vy(n,e,t)}(i.parent||e[vt],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)yy(s,r,t[l],o,!1);else yy(s,r,t,o,!1);void 0!==Ru&&Ru(s,i,e,t,r)}function Va(n,e){if(null!==e){const t=e.type;if(3&t)return Gt(e,n);if(4&t)return Lu(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Va(n,i);{const r=n[e.index];return Tt(r)?Lu(-1,r):Se(r)}}if(32&t)return Su(e,n)()||Se(n[e.index]);{const i=wy(n,e);return null!==i?Array.isArray(i)?i[0]:Va(Na(n[Ge]),i):Va(n,e.next)}}return null}function wy(n,e){return null!==e?n[Ge][vt].projection[e.projection]:null}function Lu(n,e){const t=ft+n+1;if(t<e.length){const i=e[t],r=i[R].firstChild;if(null!==r)return Va(i,r)}return e[Kn]}function Ou(n,e,t,i,r,s,a){for(;null!=t;){const o=i[t.index],l=t.type;if(a&&0===e&&(o&&Mt(Se(o),i),t.flags|=2),32!=(32&t.flags))if(8&l)Ou(n,e,t.child,i,r,s,!1),us(e,n,r,o,s);else if(32&l){const c=Su(t,i);let h;for(;h=c();)us(e,n,r,h,s);us(e,n,r,o,s)}else 16&l?xy(n,e,i,t,r,s):us(e,n,r,o,s);t=a?t.projectionNext:t.next}}function ja(n,e,t,i,r,s){Ou(t,i,n.firstChild,e,r,s,!1)}function xy(n,e,t,i,r,s){const a=t[Ge],l=a[vt].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)us(e,n,r,l[c],s);else{let c=l;const h=a[Pe];Xl(i)&&(c.flags|=128),Ou(n,e,c,h,r,s,!0)}}function Cy(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function _y(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Gd(n,e,i),null!==r&&Cy(n,e,r),null!==s&&function v_(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function ps(n){return function Fu(){if(void 0===ic&&(ic=null,Ee.trustedTypes))try{ic=Ee.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ic}()?.createHTML(n)||n}class wr{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${v0})`}}class C_ extends wr{getTypeName(){return"HTML"}}class __ extends wr{getTypeName(){return"Style"}}class A_ extends wr{getTypeName(){return"Script"}}class E_ extends wr{getTypeName(){return"URL"}}class S_ extends wr{getTypeName(){return"ResourceURL"}}function hn(n){return n instanceof wr?n.changingThisBreaksApplicationSecurity:n}function ti(n,e){const t=function D_(n){return n instanceof wr&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${v0})`)}return t===e}class O_{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(ps(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class F_{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=ps(e),t}}const V_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sc(n){return(n=String(n)).match(V_)?n:"unsafe:"+n}function bi(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ha(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const Iy=bi("area,br,col,hr,img,wbr"),Ty=bi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Py=bi("rp,rt"),ju=Ha(Iy,Ha(Ty,bi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ha(Py,bi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ha(Py,Ty)),Hu=bi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ry=Ha(Hu,bi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),j_=bi("script,style,template");class H_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!ju.hasOwnProperty(t))return this.sanitizedSomething=!0,!j_.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),a=s.name,o=a.toLowerCase();if(!Ry.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let l=s.value;Hu[o]&&(l=sc(l)),this.buf.push(" ",a,'="',Ly(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();ju.hasOwnProperty(t)&&!Iy.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Ly(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const z_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,B_=/([^\#-~ |!])/g;function Ly(n){return n.replace(/&/g,"&amp;").replace(z_,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(B_,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ac;function Oy(n,e){let t=null;try{ac=ac||function Dy(n){const e=new F_(n);return function N_(){try{return!!(new window.DOMParser).parseFromString(ps(""),"text/html")}catch{return!1}}()?new O_(e):e}(n);let i=e?String(e):"";t=ac.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=ac.getInertBodyElement(i)}while(i!==s);return ps((new H_).sanitizeChildren(zu(t)||t))}finally{if(t){const i=zu(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function zu(n){return"content"in n&&function q_(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var bn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(bn||{});function Bu(n){const e=function za(){const n=D();return n&&n[Zr].sanitizer}();return e?e.sanitize(bn.URL,n)||"":ti(n,"URL")?hn(n):sc($(n))}const Ba=new O("ENVIRONMENT_INITIALIZER"),Vy=new O("INJECTOR",-1),jy=new O("INJECTOR_DEF_TYPES");class qu{get(e,t=fa){if(t===fa){const i=new Error(`NullInjectorError: No provider for ${rt(e)}!`);throw i.name="NullInjectorError",i}return t}}function Y_(...n){return{\u0275providers:zy(0,n),\u0275fromNgModule:!0}}function zy(n,...e){const t=[],i=new Set;let r;const s=a=>{t.push(a)};return ls(e,a=>{const o=a;oc(o,s,[],i)&&(r||=[],r.push(o))}),void 0!==r&&By(r,s),t}function By(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Uu(r,s=>{e(s,i)})}}function oc(n,e,t,i){if(!(n=B(n)))return!1;let r=null,s=wl(n);const a=!s&&le(n);if(s||a){if(a&&!a.standalone)return!1;r=n}else{const l=n.ngModule;if(s=wl(l),!s)return!1;r=l}const o=i.has(r);if(a){if(o)return!1;if(i.add(r),a.dependencies){const l="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const c of l)oc(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!o){let c;i.add(r);try{ls(s.imports,h=>{oc(h,e,t,i)&&(c||=[],c.push(h))})}finally{}void 0!==c&&By(c,e)}if(!o){const c=mr(r)||(()=>new r);e({provide:r,useFactory:c,deps:pe},r),e({provide:jy,useValue:r,multi:!0},r),e({provide:Ba,useValue:()=>V(r),multi:!0},r)}const l=s.providers;if(null!=l&&!o){const c=n;Uu(l,h=>{e(h,c)})}}}return r!==n&&void 0!==n.providers}function Uu(n,e){for(let t of n)Od(t)&&(t=t.\u0275providers),Array.isArray(t)?Uu(t,e):e(t)}const K_=me({provide:String,useValue:me});function $u(n){return null!==n&&"object"==typeof n&&K_ in n}function br(n){return"function"==typeof n}const Wu=new O("Set Injector scope."),lc={},J_={};let Gu;function cc(){return void 0===Gu&&(Gu=new qu),Gu}class xn{}class gs extends xn{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xu(e,a=>this.processProvider(a)),this.records.set(Vy,ys(void 0,this)),r.has("environment")&&this.records.set(xn,ys(void 0,this));const s=this.records.get(Wu);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(jy.multi,pe,ne.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Wi(this),i=Ut(void 0);try{return e()}finally{Wi(t),Ut(i)}}get(e,t=fa,i=ne.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(S0))return e[S0](this);i=Cl(i);const s=Wi(this),a=Ut(void 0);try{if(!(i&ne.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function rA(n){return"function"==typeof n||"object"==typeof n&&n instanceof O}(e)&&Ml(e);l=c&&this.injectableDefInScope(c)?ys(Zu(e),lc):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&ne.Self?cc():this.parent).get(e,t=i&ne.Optional&&t===fa?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[xl]=o[xl]||[]).unshift(rt(e)),s)throw o;return function X6(n,e,t,i){const r=n[xl];throw e[_0]&&r.unshift(e[_0]),n.message=function Y6(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=rt(e);if(Array.isArray(e))r=e.map(rt).join(" -> ");else if("object"==typeof e){let s=[];for(let a in e)if(e.hasOwnProperty(a)){let o=e[a];s.push(a+":"+("string"==typeof o?JSON.stringify(o):rt(o)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(U6,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[xl]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Ut(a),Wi(s)}}resolveInjectorInitializers(){const e=Wi(this),t=Ut(void 0);try{const r=this.get(Ba.multi,pe,ne.Self);for(const s of r)s()}finally{Wi(e),Ut(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(rt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new I(205,!1)}processProvider(e){let t=br(e=B(e))?e:B(e&&e.provide);const i=function tA(n){return $u(n)?ys(void 0,n.useValue):ys($y(n),lc)}(e);if(br(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=ys(void 0,lc,!0),r.factory=()=>Ud(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===lc&&(t.value=J_,t.value=t.factory()),"object"==typeof t.value&&t.value&&function iA(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=B(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Zu(n){const e=Ml(n),t=null!==e?e.factory:mr(n);if(null!==t)return t;if(n instanceof O)throw new I(204,!1);if(n instanceof Function)return function eA(n){const e=n.length;if(e>0)throw function Ra(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new I(204,!1);const t=function H6(n){return n&&(n[bl]||n[w0])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new I(204,!1)}function $y(n,e,t){let i;if(br(n)){const r=B(n);return mr(r)||Zu(r)}if($u(n))i=()=>B(n.useValue);else if(function Uy(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Ud(n.deps||[]));else if(function qy(n){return!(!n||!n.useExisting)}(n))i=()=>V(B(n.useExisting));else{const r=B(n&&(n.useClass||n.provide));if(!function nA(n){return!!n.deps}(n))return mr(r)||Zu(r);i=()=>new r(...Ud(n.deps))}return i}function ys(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Xu(n,e){for(const t of n)Array.isArray(t)?Xu(t,e):t&&Od(t)?Xu(t.\u0275providers,e):e(t)}const hc=new O("AppId",{providedIn:"root",factory:()=>sA}),sA="ng",Wy=new O("Platform Initializer"),ms=new O("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Gy=new O("CSP nonce",{providedIn:"root",factory:()=>function fs(){if(void 0!==Nu)return Nu;if(typeof document<"u")return document;throw new I(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Zy=(n,e,t)=>null;function i1(n,e,t=!1){return Zy(n,e,t)}class gA{}class Ky{}class mA{resolveComponentFactory(e){throw function yA(n){const e=Error(`No component factory found for ${rt(n)}.`);return e.ngComponent=n,e}(e)}}let yc=(()=>{class n{static{this.NULL=new mA}}return n})();function kA(){return Ms(yt(),D())}function Ms(n,e){return new Xt(Gt(n,e))}let Xt=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=kA}}return n})();function vA(n){return n instanceof Xt?n.nativeElement:n}class Jy{}let ni=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function MA(){const n=D(),t=ln(yt().index,n);return(Wt(t)?t:n)[W]}()}}return n})(),wA=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>null})}}return n})();class $a{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const bA=new $a("16.2.12"),a1={};function im(n,e=null,t=null,i){const r=rm(n,e,t,i);return r.resolveInjectorInitializers(),r}function rm(n,e=null,t=null,i,r=new Set){const s=[t||pe,Y_(n)];return i=i||("object"==typeof n?void 0:rt(n)),new gs(s,e||cc(),i||null,r)}let Yt=(()=>{class n{static{this.THROW_IF_NOT_FOUND=fa}static{this.NULL=new qu}static create(t,i){if(Array.isArray(t))return im({name:""},i,t,"");{const r=t.name??"";return im({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=j({token:n,providedIn:"any",factory:()=>V(Vy)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function l1(n){return n.ngOriginalError}class xi{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&l1(e);for(;t&&l1(t);)t=l1(t);return t||null}}function c1(n){return e=>{setTimeout(n,void 0,e)}}const ke=class IA extends yn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),a=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(s=c1(s),r&&(r=c1(r)),a&&(a=c1(a)));const o=super.subscribe({next:r,error:s,complete:a});return e instanceof Bt&&e.add(o),o}};function am(...n){}class Ce{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ke(!1),this.onMicrotaskEmpty=new ke(!1),this.onStable=new ke(!1),this.onError=new ke(!1),typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function TA(){const n="function"==typeof Ee.requestAnimationFrame;let e=Ee[n?"requestAnimationFrame":"setTimeout"],t=Ee[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function LA(n){const e=()=>{!function RA(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ee,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,d1(n),n.isCheckStableRunning=!0,h1(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),d1(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,a,o)=>{if(function FA(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(o))return t.invokeTask(r,s,a,o);try{return om(n),t.invokeTask(r,s,a,o)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),lm(n)}},onInvoke:(t,i,r,s,a,o,l)=>{try{return om(n),t.invoke(r,s,a,o,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),lm(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,d1(n),h1(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ce.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(Ce.isInAngularZone())throw new I(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+r,e,PA,am,am);try{return s.runTask(a,t,i)}finally{s.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const PA={};function h1(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function d1(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function om(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function lm(n){n._nesting--,h1(n)}class OA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ke,this.onMicrotaskEmpty=new ke,this.onStable=new ke,this.onError=new ke}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const cm=new O("",{providedIn:"root",factory:hm});function hm(){const n=L(Ce);let e=!0;return function I6(...n){const e=pa(n),t=function x6(n,e){return"number"==typeof Td(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?qt(i[0]):Ur(t)(Qe(i,e)):Gn}(new Ue(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Ue(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const a=n.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),a.unsubscribe()}}).pipe(k0()))}function Ci(n){return n instanceof Function?n():n}let u1=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Wa(n){for(;n;){n[K]|=64;const e=Na(n);if(Yd(n)&&!e)return n;n=e}return null}const gm=new O("",{providedIn:"root",factory:()=>!1});let vc=null;function vm(n,e){return n[e]??bm()}function Mm(n,e){const t=bm();t.producerNode?.length&&(n[e]=vc,t.lView=n,vc=wm())}const WA={...$0,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Wa(n.lView)},lView:null};function wm(){return Object.create(WA)}function bm(){return vc??=wm(),vc}const X={};function wt(n){xm(ce(),D(),Rt()+n,!1)}function xm(n,e,t,i){if(!i)if(3==(3&e[K])){const s=n.preOrderCheckHooks;null!==s&&Ol(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Fl(e,s,0,t)}kr(t)}function T(n,e=ne.Default){const t=D();return null===t?V(n,e):Fg(yt(),t,B(n),e)}function Mc(n,e,t,i,r,s,a,o,l,c,h){const d=e.blueprint.slice();return d[je]=r,d[K]=140|i,(null!==c||n&&2048&n[K])&&(d[K]|=2048),dg(d),d[Pe]=d[Xr]=n,d[We]=t,d[Zr]=a||n&&n[Zr],d[W]=o||n&&n[W],d[Gi]=l||n&&n[Gi]||null,d[vt]=s,d[ba]=function ZC(){return GC++}(),d[mi]=h,d[z0]=c,d[Ge]=2==e.type?n[Ge]:d,d}function xs(n,e,t,i,r){let s=n.data[e];if(null===s)s=function p1(n,e,t,i,r){const s=mg(),a=ru(),l=n.data[e]=function e7(n,e,t,i,r,s){let a=e?e.injectorIndex:-1,o=0;return function es(){return null!==z.skipHydrationRootTNode}()&&(o|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:o,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(a?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function G8(){return z.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const a=function Ea(){const n=z.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return Jn(s,!0),s}function Ga(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function _m(n,e,t,i,r){const s=vm(e,xa),a=Rt(),o=2&i;try{kr(-1),o&&e.length>ie&&xm(n,e,ie,!1),Qn(o?2:0,r);const c=o?s:null,h=Qd(c);try{null!==c&&(c.dirty=!1),t(i,r)}finally{Jd(c,h)}}finally{o&&null===e[xa]&&Mm(e,xa),kr(a),Qn(o?3:1,r)}}function f1(n,e,t){if(Xd(e)){const i=Mn(null);try{const s=e.directiveEnd;for(let a=e.directiveStart;a<s;a++){const o=n.data[a];o.contentQueries&&o.contentQueries(1,t[a],a)}}finally{Mn(i)}}}function g1(n,e,t){yg()&&(function o7(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;yr(t)&&function f7(n,e,t){const i=Gt(e,n),r=Am(t);let a=16;t.signals?a=4096:t.onPush&&(a=64);const o=wc(n,Mc(n,r,null,a,i,e,null,n[Zr].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Vl(t,e),Mt(i,e);const a=t.initialInputs;for(let o=r;o<s;o++){const l=n.data[o],c=vr(e,n,o,t);Mt(c,e),null!==a&&g7(0,o-r,c,l,0,a),Nn(l)&&(ln(t.index,e)[We]=vr(e,n,o,t))}}(n,e,t,Gt(t,e)),64==(64&t.flags)&&Tm(n,e,t))}function y1(n,e,t=Gt){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const a=i[s+1],o=-1===a?t(e,n):n[a];n[r++]=o}}}function Am(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=m1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function m1(n,e,t,i,r,s,a,o,l,c,h){const d=ie+i,u=d+r,p=function ZA(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:X);return t}(d,u),f="function"==typeof c?c():c;return p[R]={type:n,blueprint:p,template:t,queries:null,viewQuery:o,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:h}}let Em=n=>null;function Sm(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?Dm(t,e,r,s):i.hasOwnProperty(r)&&Dm(t,e,i[r],s)}return t}function Dm(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function k1(n,e,t,i){if(yg()){const r=null===i?null:{"":-1},s=function c7(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const a=t[s];if(O0(e,a.selectors,!1))if(i||(i=[]),Nn(a))if(null!==a.findHostDirectiveDefs){const o=[];r=r||new Map,a.findHostDirectiveDefs(a,o,r),i.unshift(...o,a),v1(n,e,o.length)}else i.unshift(a),v1(n,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return null===i?null:[i,r]}(n,t);let a,o;null===s?a=o=null:[a,o]=s,null!==a&&Im(n,e,t,a,r,o),r&&function h7(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new I(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=ma(t.mergedAttrs,t.attrs)}function Im(n,e,t,i,r,s){for(let c=0;c<i.length;c++)yu(Vl(t,e),n,i[c].type);!function u7(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const h=i[c];h.providersResolver&&h.providersResolver(h)}let a=!1,o=!1,l=Ga(n,e,i.length,null);for(let c=0;c<i.length;c++){const h=i[c];t.mergedAttrs=ma(t.mergedAttrs,h.hostAttrs),p7(n,t,e,l,h),d7(l,h,r),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const d=h.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!o&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),o=!0),l++}!function t7(n,e,t){const r=e.directiveEnd,s=n.data,a=e.attrs,o=[];let l=null,c=null;for(let h=e.directiveStart;h<r;h++){const d=s[h],u=t?t.get(d):null,f=u?u.outputs:null;l=Sm(d.inputs,h,l,u?u.inputs:null),c=Sm(d.outputs,h,c,f);const g=null===l||null===a||L0(e)?null:y7(l,h,a);o.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=o,e.inputs=l,e.outputs=c}(n,t,s)}function Tm(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,a=function X8(){return z.lFrame.currentDirectiveIndex}();try{kr(s);for(let o=i;o<r;o++){const l=n.data[o],c=e[o];au(o),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&l7(l,c)}}finally{kr(-1),au(a)}}function l7(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function v1(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function d7(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Nn(e)&&(t[""]=n)}}function p7(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=mr(r.type)),a=new Sa(s,Nn(r),T);n.blueprint[i]=a,t[i]=a,function s7(n,e,t,i,r){const s=r.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const o=~e.index;(function a7(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=o&&a.push(o),a.push(t,i,s)}}(n,e,i,Ga(n,t,r.hostVars,X),r)}function g7(n,e,t,i,r,s){const a=s[e];if(null!==a)for(let o=0;o<a.length;)Pm(i,t,a[o++],a[o++],a[o++])}function Pm(n,e,t,i,r){const s=Mn(null);try{const a=n.inputTransforms;null!==a&&a.hasOwnProperty(i)&&(r=a[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{Mn(s)}}function y7(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const a=n[s];for(let o=0;o<a.length;o+=2)if(a[o]===e){i.push(s,a[o+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Rm(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function Lm(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const a=n.data[s];lu(t[i]),a.contentQueries(2,e[s],s)}}}function wc(n,e){return n[Ma]?n[H0][Fn]=e:n[Ma]=e,n[H0]=e,e}function w1(n,e,t){lu(0);const i=Mn(null);try{e(n,t)}finally{Mn(i)}}function Om(n){return n[Gr]||(n[Gr]=[])}function Fm(n){return n.cleanup||(n.cleanup=[])}function Vm(n,e){const t=n[Gi],i=t?t.get(xi,null):null;i&&i.handleError(e)}function b1(n,e,t,i,r){for(let s=0;s<t.length;){const a=t[s++],o=t[s++];Pm(n.data[a],e[a],i,o,r)}}function m7(n,e){const t=ln(e,n),i=t[R];!function k7(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[je];null!==r&&null===t[mi]&&(t[mi]=i1(r,t[Gi])),x1(i,t,t[We])}function x1(n,e,t){cu(e);try{const i=n.viewQuery;null!==i&&w1(1,i,t);const r=n.template;null!==r&&_m(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Lm(n,e),n.staticViewQueries&&w1(2,n.viewQuery,t);const s=n.components;null!==s&&function v7(n,e){for(let t=0;t<e.length;t++)m7(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[K]&=-5,hu()}}let jm=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,a=function _8(n,e,t){const i=Object.create(A8);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=a=>{i.cleanupFn=a};return i.ref={notify:()=>X0(i),run:()=>{if(i.dirty=!1,i.hasRun&&!Y0(i))return;i.hasRun=!0;const a=Qd(i);try{i.cleanupFn(),i.cleanupFn=rg,i.fn(r)}finally{Jd(i,a)}},cleanup:()=>i.cleanupFn()},i.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},r);let o;this.all.add(a),a.notify();const l=()=>{a.cleanup(),o?.(),this.all.delete(a),this.queue.delete(a)};return o=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}}return n})();function bc(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let a=0;a<e.length;a++){const o=e[a];"number"==typeof o?s=o:1==s?r=Rd(r,o):2==s&&(i=Rd(i,o+": "+e[++a]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Za(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(Se(s)),Tt(s)&&Hm(s,i);const a=t.type;if(8&a)Za(n,e,t.child,i);else if(32&a){const o=Su(t,e);let l;for(;l=o();)i.push(l)}else if(16&a){const o=wy(e,t);if(Array.isArray(o))i.push(...o);else{const l=Na(e[Ge]);Za(l[R],l,o,i,!0)}}t=r?t.projectionNext:t.next}return i}function Hm(n,e){for(let t=ft;t<n.length;t++){const i=n[t],r=i[R].firstChild;null!==r&&Za(i[R],i,r,e)}n[Kn]!==n[je]&&e.push(n[Kn])}function xc(n,e,t,i=!0){const r=e[Zr],s=r.rendererFactory,a=r.afterRenderEventManager;s.begin?.(),a?.begin();try{zm(n,e,n.template,t)}catch(l){throw i&&Vm(e,l),l}finally{s.end?.(),r.effectManager?.flush(),a?.end()}}function zm(n,e,t,i){const r=e[K];if(256!=(256&r)){e[Zr].effectManager?.flush(),cu(e);try{dg(e),function vg(n){return z.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&_m(n,e,t,2,i);const a=3==(3&r);if(a){const c=n.preOrderCheckHooks;null!==c&&Ol(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Fl(e,c,0,null),du(e,0)}if(function b7(n){for(let e=cy(n);null!==e;e=hy(e)){if(!e[B0])continue;const t=e[Kr];for(let i=0;i<t.length;i++){F8(t[i])}}}(e),Bm(e,2),null!==n.contentQueries&&Lm(n,e),a){const c=n.contentCheckHooks;null!==c&&Ol(e,c)}else{const c=n.contentHooks;null!==c&&Fl(e,c,1),du(e,1)}!function GA(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=vm(e,Ca);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)kr(~s);else{const a=s,o=t[++r],l=t[++r];Z8(o,a),i.dirty=!1;const c=Qd(i);try{l(2,e[a])}finally{Jd(i,c)}}}}finally{null===e[Ca]&&Mm(e,Ca),kr(-1)}}(n,e);const o=n.components;null!==o&&Um(e,o,0);const l=n.viewQuery;if(null!==l&&w1(2,l,i),a){const c=n.viewCheckHooks;null!==c&&Ol(e,c)}else{const c=n.viewHooks;null!==c&&Fl(e,c,2),du(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[K]&=-73,ug(e)}finally{hu()}}}function Bm(n,e){for(let t=cy(n);null!==t;t=hy(t))for(let i=ft;i<t.length;i++)qm(t[i],e)}function x7(n,e,t){qm(ln(e,n),t)}function qm(n,e){if(!function L8(n){return 128==(128&n[K])}(n))return;const t=n[R],i=n[K];if(80&i&&0===e||1024&i||2===e)zm(t,n,t.template,n[We]);else if(n[va]>0){Bm(n,1);const r=t.components;null!==r&&Um(n,r,1)}}function Um(n,e,t){for(let i=0;i<e.length;i++)x7(n,e[i],t)}class Xa{get rootNodes(){const e=this._lView,t=e[R];return Za(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[We]}set context(e){this._lView[We]=e}get destroyed(){return 256==(256&this._lView[K])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Pe];if(Tt(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Jl(e,i),Bl(t,i))}this._attachedToViewContainer=!1}Iu(this._lView[R],this._lView)}onDestroy(e){!function fg(n,e){if(256==(256&n[K]))throw new I(911,!1);null===n[Zi]&&(n[Zi]=[]),n[Zi].push(e)}(this._lView,e)}markForCheck(){Wa(this._cdRefInjectingView||this._lView)}detach(){this._lView[K]&=-129}reattach(){this._lView[K]|=128}detectChanges(){xc(this._lView[R],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function l_(n,e){ja(n,e,e[W],2,null,null)}(this._lView[R],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e}}class C7 extends Xa{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;xc(e[R],e,e[We],!1)}checkNoChanges(){}get context(){return null}}class $m extends yc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=le(e);return new Ya(t,this.ngModule)}}function Wm(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class A7{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Cl(i);const r=this.injector.get(e,a1,i);return r!==a1||t===a1?r:this.parentInjector.get(e,t,i)}}class Ya extends Ky{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=Wm(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return Wm(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function a8(n){return n.map(s8).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof xn?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new A7(e,s):e,o=a.get(Jy,null);if(null===o)throw new I(407,!1);const d={rendererFactory:o,sanitizer:a.get(wA,null),effectManager:a.get(jm,null),afterRenderEventManager:a.get(u1,null)},u=o.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",f=i?function XA(n,e,t,i){const s=i.get(gm,!1)||t===Ln.ShadowDom,a=n.selectRootElement(e,s);return function YA(n){Em(n)}(a),a}(u,i,this.componentDef.encapsulation,a):Ql(u,p,function _7(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(p)),y=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let k=null;null!==f&&(k=i1(f,a,!0));const v=m1(0,null,null,1,0,null,null,null,null,null,null),M=Mc(null,v,null,y,null,null,d,u,a,null,k);let w,x;cu(M);try{const A=this.componentDef;let E,b=null;A.findHostDirectiveDefs?(E=[],b=new Map,A.findHostDirectiveDefs(A,E,b),E.push(A)):E=[A];const C=function S7(n,e){const t=n[R],i=ie;return n[i]=e,xs(t,i,2,"#host",null)}(M,f),P=function D7(n,e,t,i,r,s,a){const o=r[R];!function I7(n,e,t,i){for(const r of n)e.mergedAttrs=ma(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(bc(e,e.mergedAttrs,!0),null!==t&&_y(i,t,e))}(i,n,e,a);let l=null;null!==e&&(l=i1(e,r[Gi]));const c=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const d=Mc(r,Am(t),null,h,r[n.index],n,s,c,null,null,l);return o.firstCreatePass&&v1(o,n,i.length-1),wc(r,d),r[n.index]=d}(C,f,A,E,M,d,u);x=hg(v,ie),f&&function P7(n,e,t,i){if(i)Gd(n,t,["ng-version",bA.full]);else{const{attrs:r,classes:s}=function o8(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!On(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Gd(n,t,r),s&&s.length>0&&Cy(n,t,s.join(" "))}}(u,A,f,i),void 0!==t&&function R7(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(x,this.ngContentSelectors,t),w=function T7(n,e,t,i,r,s){const a=yt(),o=r[R],l=Gt(a,r);Im(o,r,a,t,null,i);for(let h=0;h<t.length;h++)Mt(vr(r,o,a.directiveStart+h,a),r);Tm(o,r,a),l&&Mt(l,r);const c=vr(r,o,a.directiveStart+a.componentOffset,a);if(n[We]=r[We]=c,null!==s)for(const h of s)h(c,e);return f1(o,a,n),c}(P,A,E,b,M,[L7]),x1(v,M,null)}finally{hu()}return new E7(this.componentType,w,Ms(x,M),M,x)}}class E7 extends gA{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new C7(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;b1(s[R],s,r,e,t),this.previousInputValues.set(e,t),Wa(ln(this._tNode.index,s))}}get injector(){return new Lt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function L7(){const n=yt();Ll(D()[R],n)}function ve(n){let e=function Gm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(Nn(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new I(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const a=n;a.inputs=Cc(n.inputs),a.inputTransforms=Cc(n.inputTransforms),a.declaredInputs=Cc(n.declaredInputs),a.outputs=Cc(n.outputs);const o=r.hostBindings;o&&V7(n,o);const l=r.viewQuery,c=r.contentQueries;if(l&&F7(n,l),c&&N7(n,c),kl(n.inputs,r.inputs),kl(n.declaredInputs,r.declaredInputs),kl(n.outputs,r.outputs),null!==r.inputTransforms&&(null===a.inputTransforms&&(a.inputTransforms={}),kl(a.inputTransforms,r.inputTransforms)),Nn(r)&&r.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let a=0;a<s.length;a++){const o=s[a];o&&o.ngInherit&&o(n),o===ve&&(t=!1)}}e=Object.getPrototypeOf(e)}!function O7(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ma(r.hostAttrs,t=ma(t,r.hostAttrs))}}(i)}function Cc(n){return n===Xn?{}:n===pe?[]:n}function F7(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function N7(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function V7(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function _c(n){return!!function C1(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function bt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function to(n,e,t,i,r,s,a,o){const l=D(),c=ce(),h=n+ie,d=c.firstCreatePass?function cE(n,e,t,i,r,s,a,o,l){const c=e.consts,h=xs(e,n,4,a||null,Yi(c,o));k1(e,t,h,Yi(c,l)),Ll(e,h);const d=h.tView=m1(2,h,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),d.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,t,i,r,s,a):c.data[h];Jn(d,!1);const u=hk(c,l,d,n);Rl()&&tc(c,l,u,d),Mt(u,l),wc(l,l[h]=Rm(u,l,u,d)),Dl(d)&&g1(c,l,d),null!=a&&y1(l,d,o)}let hk=function dk(n,e,t,i){return Ki(!0),e[W].createComment("")};function Vn(n,e,t){const i=D();return bt(i,ts(),e)&&function dn(n,e,t,i,r,s,a,o){const l=Gt(e,t);let h,c=e.inputs;!o&&null!=c&&(h=c[i])?(b1(n,t,h,i,r),yr(e)&&function i7(n,e){const t=ln(e,n);16&t[K]||(t[K]|=64)}(t,e.index)):3&e.type&&(i=function n7(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=a?a(r,e.value||"",i):r,s.setProperty(l,i,r))}(ce(),function Oe(){const n=z.lFrame;return hg(n.tView,n.selectedIndex)}(),i,n,e,i[W],t,!1),Vn}function I1(n,e,t,i,r){const a=r?"class":"style";b1(n,t,e.inputs[a],a,i)}function de(n,e,t,i){const r=D(),s=ce(),a=ie+n,o=r[W],l=s.firstCreatePass?function pE(n,e,t,i,r,s){const a=e.consts,l=xs(e,n,2,i,Yi(a,r));return k1(e,t,l,Yi(a,s)),null!==l.attrs&&bc(l,l.attrs,!1),null!==l.mergedAttrs&&bc(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(a,s,r,e,t,i):s.data[a],c=pk(s,r,l,o,e,n);r[a]=c;const h=Dl(l);return Jn(l,!0),_y(o,c,l),32!=(32&l.flags)&&Rl()&&tc(s,r,c,l),0===function V8(){return z.lFrame.elementDepthCount}()&&Mt(c,r),function j8(){z.lFrame.elementDepthCount++}(),h&&(g1(s,r,l),f1(s,l,r)),null!==i&&y1(r,l),de}function we(){let n=yt();ru()?su():(n=n.parent,Jn(n,!1));const e=n;(function z8(n){return z.skipHydrationRootTNode===n})(e)&&function $8(){z.skipHydrationRootTNode=null}(),function H8(){z.lFrame.elementDepthCount--}();const t=ce();return t.firstCreatePass&&(Ll(t,n),Xd(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function aC(n){return 0!=(8&n.flags)}(e)&&I1(t,e,D(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function oC(n){return 0!=(16&n.flags)}(e)&&I1(t,e,D(),e.stylesWithoutHost,!1),we}function Kt(n,e,t,i){return de(n,e,t,i),we(),Kt}let pk=(n,e,t,i,r,s)=>(Ki(!0),Ql(i,r,function Eg(){return z.lFrame.currentNamespace}()));function no(n,e,t){const i=D(),r=ce(),s=n+ie,a=r.firstCreatePass?function yE(n,e,t,i,r){const s=e.consts,a=Yi(s,i),o=xs(e,n,8,"ng-container",a);return null!==a&&bc(o,a,!0),k1(e,t,o,Yi(s,r)),null!==e.queries&&e.queries.elementStart(e,o),o}(s,r,i,e,t):r.data[s];Jn(a,!0);const o=gk(r,i,a,n);return i[s]=o,Rl()&&tc(r,i,o,a),Mt(o,i),Dl(a)&&(g1(r,i,a),f1(r,a,i)),null!=t&&y1(i,a),no}function io(){let n=yt();const e=ce();return ru()?su():(n=n.parent,Jn(n,!1)),e.firstCreatePass&&(Ll(e,n),Xd(n)&&e.queries.elementEnd(n)),io}let gk=(n,e,t,i)=>(Ki(!0),Du(e[W],""));function ro(){return D()}function so(n){return!!n&&"function"==typeof n.then}function yk(n){return!!n&&"function"==typeof n.subscribe}function Je(n,e,t,i){const r=D(),s=ce(),a=yt();return function kk(n,e,t,i,r,s,a){const o=Dl(i),c=n.firstCreatePass&&Fm(n),h=e[We],d=Om(e);let u=!0;if(3&i.type||a){const g=Gt(i,e),m=a?a(g):g,y=d.length,k=a?M=>a(Se(M[i.index])):i.index;let v=null;if(!a&&o&&(v=function vE(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const a=r[s];if(a===t&&r[s+1]===i){const o=e[Gr],l=r[s+2];return o.length>l?o[l]:null}"string"==typeof a&&(s+=2)}return null}(n,e,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,u=!1;else{s=Mk(i,e,h,s,!1);const M=t.listen(m,r,s);d.push(s,M),c&&c.push(r,k,y,y+1)}}else s=Mk(i,e,h,s,!1);const p=i.outputs;let f;if(u&&null!==p&&(f=p[r])){const g=f.length;if(g)for(let m=0;m<g;m+=2){const w=e[f[m]][f[m+1]].subscribe(s),x=d.length;d.push(s,w),c&&c.push(r,i.index,x,-(x+1))}}}(s,r,r[W],a,n,e,i),Je}function vk(n,e,t,i){try{return Qn(6,e,t),!1!==t(i)}catch(r){return Vm(n,r),!1}finally{Qn(7,e,t)}}function Mk(n,e,t,i,r){return function s(a){if(a===Function)return i;Wa(n.componentOffset>-1?ln(n.index,e):e);let l=vk(e,t,i,a),c=s.__ngNextListenerFn__;for(;c;)l=vk(e,t,c,a)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&a.preventDefault(),l}}function _n(n=1){return function K8(n){return(z.lFrame.contextLView=function Q8(n,e){for(;n>0;)e=e[Xr],n--;return e}(n,z.lFrame.contextLView))[We]}(n)}function Ic(n,e){return n<<17|e<<2}function Ji(n){return n>>17&32767}function P1(n){return 2|n}function Cr(n){return(131068&n)>>2}function R1(n,e){return-131069&n|e<<2}function L1(n){return 1|n}function Ik(n,e,t,i,r){const s=n[t+1],a=null===e;let o=i?Ji(s):Cr(s),l=!1;for(;0!==o&&(!1===l||a);){const h=n[o+1];SE(n[o],e)&&(l=!0,n[o+1]=i?L1(h):P1(h)),o=i?Ji(h):Cr(h)}l&&(n[t+1]=i?P1(s):L1(s))}function SE(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&cs(n,e)>=0}function Tc(n,e){return function jn(n,e,t,i){const r=D(),s=ce(),a=function wi(n){const e=z.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function jk(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Rt()],a=function Vk(n,e){return e>=n.expandoStartIndex}(n,t);(function qk(n,e){return 0!=(n.flags&(e?8:16))})(s,i)&&null===e&&!a&&(e=!1),e=function NE(n,e,t,i){const r=function ou(n){const e=z.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=ao(t=O1(null,n,e,t,i),e.attrs,i),s=null);else{const a=e.directiveStylingLast;if(-1===a||n[a]!==r)if(t=O1(r,n,e,t,i),null===s){let l=function VE(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Cr(i))return n[Ji(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=O1(null,n,e,l[1],i),l=ao(l,e.attrs,i),function jE(n,e,t,i){n[Ji(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function HE(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=ao(i,n[s].hostAttrs,t);return ao(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function AE(n,e,t,i,r,s){let a=s?e.classBindings:e.styleBindings,o=Ji(a),l=Cr(a);n[i]=t;let h,c=!1;if(Array.isArray(t)?(h=t[1],(null===h||cs(t,h)>0)&&(c=!0)):h=t,r)if(0!==l){const u=Ji(n[o+1]);n[i+1]=Ic(u,o),0!==u&&(n[u+1]=R1(n[u+1],i)),n[o+1]=function CE(n,e){return 131071&n|e<<17}(n[o+1],i)}else n[i+1]=Ic(o,0),0!==o&&(n[o+1]=R1(n[o+1],i)),o=i;else n[i+1]=Ic(l,0),0===o?o=i:n[l+1]=R1(n[l+1],i),l=i;c&&(n[i+1]=P1(n[i+1])),Ik(n,h,i,!0),Ik(n,h,i,!1),function EE(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&cs(s,e)>=0&&(t[i+1]=L1(t[i+1]))}(e,h,n,i,s),a=Ic(o,l),s?e.classBindings=a:e.styleBindings=a}(r,s,e,t,a,i)}}(s,n,a,i),e!==X&&bt(r,a,e)&&function zk(n,e,t,i,r,s,a,o){if(!(3&e.type))return;const l=n.data,c=l[o+1],h=function _E(n){return 1==(1&n)}(c)?Bk(l,e,t,r,Cr(c),a):void 0;Pc(h)||(Pc(s)||function xE(n){return 2==(2&n)}(c)&&(s=Bk(l,null,t,r,o,a)),function k_(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Qi.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Qi.Important),n.setStyle(t,i,r,s))}}(i,a,Pl(Rt(),t),r,s))}(s,s.data[Rt()],r,r[W],n,r[a+1]=function UE(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=rt(hn(n)))),n}(e,t),i,a)}(n,e,null,!0),Tc}function O1(n,e,t,i,r){let s=null;const a=t.directiveEnd;let o=t.directiveStylingLast;for(-1===o?o=t.directiveStart:o++;o<a&&(s=e[o],i=ao(i,s.hostAttrs,r),s!==n);)o++;return null!==n&&(t.directiveStylingLast=o),i}function ao(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?r=a:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),cn(n,a,!!t||e[++s]))}return void 0===n?null:n}function Bk(n,e,t,i,r,s){const a=null===e;let o;for(;r>0;){const l=n[r],c=Array.isArray(l),h=c?l[1]:l,d=null===h;let u=t[r+1];u===X&&(u=d?pe:void 0);let p=d?vu(u,i):h===i?u:void 0;if(c&&!Pc(p)&&(p=vu(l,i)),Pc(p)&&(o=p,a))return o;const f=n[r+1];r=a?Ji(f):Cr(f)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(o=vu(l,i))}return o}function Pc(n){return void 0!==n}function xt(n,e=""){const t=D(),i=ce(),r=n+ie,s=i.firstCreatePass?xs(i,r,1,e,null):i.data[r],a=Uk(i,t,s,e,n);t[r]=a,Rl()&&tc(i,t,a,s),Jn(s,!1)}let Uk=(n,e,t,i,r)=>(Ki(!0),function Kl(n,e){return n.createText(e)}(e[W],i));function Ls(n){return oo("",n,""),Ls}function oo(n,e,t){const i=D(),r=function _s(n,e,t,i){return bt(n,ts(),t)?e+$(t)+i:X}(i,n,e,t);return r!==X&&function _i(n,e,t){const i=Pl(e,n);!function uy(n,e,t){n.setValue(e,t)}(n[W],i,t)}(i,Rt(),r),oo}const Fs="en-US";let uv=Fs;function V1(n,e,t,i,r){if(n=B(n),Array.isArray(n))for(let s=0;s<n.length;s++)V1(n[s],e,t,i,r);else{const s=ce(),a=D(),o=yt();let l=br(n)?n:B(n.provide);const c=$y(n),h=1048575&o.providerIndexes,d=o.directiveStart,u=o.providerIndexes>>20;if(br(n)||!n.multi){const p=new Sa(c,r,T),f=H1(l,e,r?h:h+u,d);-1===f?(yu(Vl(o,a),s,l),j1(s,n,e.length),e.push(l),o.directiveStart++,o.directiveEnd++,r&&(o.providerIndexes+=1048576),t.push(p),a.push(p)):(t[f]=p,a[f]=p)}else{const p=H1(l,e,h+u,d),f=H1(l,e,h,h+u),m=f>=0&&t[f];if(r&&!m||!r&&!(p>=0&&t[p])){yu(Vl(o,a),s,l);const y=function dD(n,e,t,i,r){const s=new Sa(n,t,T);return s.multi=[],s.index=e,s.componentProviders=0,Nv(s,r,i&&!t),s}(r?hD:cD,t.length,r,i,c);!r&&m&&(t[f].providerFactory=y),j1(s,n,e.length,0),e.push(l),o.directiveStart++,o.directiveEnd++,r&&(o.providerIndexes+=1048576),t.push(y),a.push(y)}else j1(s,n,p>-1?p:f,Nv(t[r?f:p],c,!r&&i));!r&&i&&m&&t[f].componentProviders++}}}function j1(n,e,t,i){const r=br(e),s=function Q_(n){return!!n.useClass}(e);if(r||s){const l=(s?B(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[i,l]):c[h+1].push(i,l)}else c.push(t,l)}}}function Nv(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function H1(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function cD(n,e,t,i){return z1(this.multi,[])}function hD(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,o=vr(t,t[R],this.providerFactory.index,i);s=o.slice(0,a),z1(r,s);for(let l=a;l<o.length;l++)s.push(o[l])}else s=[],z1(r,s);return s}function z1(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Re(n,e=[]){return t=>{t.providersResolver=(i,r)=>function lD(n,e,t){const i=ce();if(i.firstCreatePass){const r=Nn(n);V1(t,i.data,i.blueprint,r,!0),V1(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Ar{}class Vv{}class B1 extends Ar{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $m(this);const r=an(e);this._bootstrapComponents=Ci(r.bootstrap),this._r3Injector=rm(e,t,[{provide:Ar,useValue:this},{provide:yc,useValue:this.componentFactoryResolver},...i],rt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class q1 extends Vv{constructor(e){super(),this.moduleType=e}create(e){return new B1(this.moduleType,e,[])}}class jv extends Ar{constructor(e){super(),this.componentFactoryResolver=new $m(this),this.instance=null;const t=new gs([...e.providers,{provide:Ar,useValue:this},{provide:yc,useValue:this.componentFactoryResolver}],e.parent||cc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function U1(n,e,t=null){return new jv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let fD=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=zy(0,t.type),r=i.length>0?U1([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=j({token:n,providedIn:"environment",factory:()=>new n(V(xn))})}}return n})();function Hv(n){n.getStandaloneInjector=e=>e.get(fD).getOrCreateStandaloneInjector(n)}function HD(){return this._results[Symbol.iterator]()}class W1{get changes(){return this._changes||(this._changes=new ke)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=W1.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=HD)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function wn(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function wC(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function BD(n,e,t,i=!0){const r=e[R];if(function h_(n,e,t,i){const r=ft+i,s=t.length;i>0&&(t[r-1][Fn]=e),i<s-ft?(e[Fn]=t[r],Bg(t,ft+i,e)):(t.push(e),e[Fn]=null),e[Pe]=t;const a=e[wa];null!==a&&t!==a&&function d_(n,e){const t=n[Kr];e[Ge]!==e[Pe][Pe][Ge]&&(n[B0]=!0),null===t?n[Kr]=[e]:t.push(e)}(a,e);const o=e[Yn];null!==o&&o.insertView(n),e[K]|=128}(r,e,n,t),i){const s=Lu(t,n),a=e[W],o=ec(a,n[Kn]);null!==o&&function o_(n,e,t,i,r,s){i[je]=r,i[vt]=e,ja(n,i,t,1,r,s)}(r,n[vt],a,e,o,s)}}let Ai=(()=>{class n{static{this.__NG_ELEMENT_ID__=$D}}return n})();const qD=Ai,UD=class extends qD{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function zD(n,e,t,i){const r=e.tView,o=Mc(n,r,t,4096&n[K]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);o[wa]=n[e.index];const c=n[Yn];return null!==c&&(o[Yn]=c.createEmbeddedView(r)),x1(r,o,t),o}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new Xa(r)}};function $D(){return Nc(yt(),D())}function Nc(n,e){return 4&n.type?new UD(e,n,Ms(n,e)):null}let zn=(()=>{class n{static{this.__NG_ELEMENT_ID__=KD}}return n})();function KD(){return r4(yt(),D())}const QD=zn,n4=class extends QD{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ms(this._hostTNode,this._hostLView)}get injector(){return new Lt(this._hostTNode,this._hostLView)}get parentInjector(){const e=jl(this._hostTNode,this._hostLView);if(pu(e)){const t=Ia(e,this._hostLView),i=Da(e);return new Lt(t[R].data[i+8],t)}return new Lt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=i4(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(o,r,false),o}createComponent(e,t,i,r,s){const a=e&&!function Pa(n){return"function"==typeof n}(e);let o;if(a)o=t;else{const g=t||{};o=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const l=a?e:new Ya(le(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const m=(a?c:this.parentInjector).get(xn,null);m&&(s=m)}le(l.componentType??{});const p=l.create(c,r,null,s);return this.insertImpl(p.hostView,o,false),p}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function O8(n){return Tt(n[Pe])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=r[Pe],h=new n4(c,c[vt],c[Pe]);h.detach(h.indexOf(e))}}const a=this._adjustIndex(t),o=this._lContainer;return BD(o,r,a,!i),e.attachToViewContainerRef(),Bg(G1(o),a,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=i4(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Jl(this._lContainer,t);i&&(Bl(G1(this._lContainer),t),Iu(i[R],i))}detach(e){const t=this._adjustIndex(e,-1),i=Jl(this._lContainer,t);return i&&null!=Bl(G1(this._lContainer),t)?new Xa(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function i4(n){return n[8]}function G1(n){return n[8]||(n[8]=[])}function r4(n,e){let t;const i=e[n.index];return Tt(i)?t=i:(t=Rm(i,e,null,n),e[n.index]=t,wc(e,t)),s4(t,e,n,i),new n4(t,n,e)}let s4=function a4(n,e,t,i){if(n[Kn])return;let r;r=8&t.type?Se(i):function JD(n,e){const t=n[W],i=t.createComment(""),r=Gt(e,n);return Mr(t,ec(t,r),i,function g_(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Kn]=r};class Z1{constructor(e){this.queryList=e,this.matches=null}clone(){return new Z1(this.queryList)}setDirty(){this.queryList.setDirty()}}class X1{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const a=t.getByIndex(s);r.push(this.queries[a.indexInDeclarationView].clone())}return new X1(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==u4(e,t).matches&&this.queries[t].setDirty()}}class o4{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Y1{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Y1(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class K1{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new K1(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,n9(t,s)),this.matchTNodeWithReadOption(e,t,Hl(t,e,s,!1,!1))}else i===Ai?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Hl(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Xt||r===zn||r===Ai&&4&t.type)this.addMatch(t.index,-2);else{const s=Hl(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function n9(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function r9(n,e,t,i){return-1===t?function i9(n,e){return 11&n.type?Ms(n,e):4&n.type?Nc(n,e):null}(e,n):-2===t?function s9(n,e,t){return t===Xt?Ms(e,n):t===Ai?Nc(e,n):t===zn?r4(e,n):void 0}(n,e,i):vr(n,n[R],t,e)}function l4(n,e,t,i){const r=e[Yn].queries[i];if(null===r.matches){const s=n.data,a=t.matches,o=[];for(let l=0;l<a.length;l+=2){const c=a[l];o.push(c<0?null:r9(e,s[c],a[l+1],t.metadata.read))}r.matches=o}return r.matches}function Q1(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const a=l4(n,e,r,t);for(let o=0;o<s.length;o+=2){const l=s[o];if(l>0)i.push(a[o/2]);else{const c=s[o+1],h=e[-l];for(let d=ft;d<h.length;d++){const u=h[d];u[wa]===u[Pe]&&Q1(u[R],u,c,i)}if(null!==h[Kr]){const d=h[Kr];for(let u=0;u<d.length;u++){const p=d[u];Q1(p[R],p,c,i)}}}}}return i}function jc(n){const e=D(),t=ce(),i=wg();lu(i+1);const r=u4(t,i);if(n.dirty&&function R8(n){return 4==(4&n[K])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?Q1(t,e,i,[]):l4(t,e,r,i);n.reset(s,vA),n.notifyOnChanges()}return!0}return!1}function J1(n,e,t){const i=ce();i.firstCreatePass&&(function d4(n,e,t){null===n.queries&&(n.queries=new Y1),n.queries.track(new K1(e,t))}(i,new o4(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function h4(n,e,t){const i=new W1(4==(4&t));(function JA(n,e,t,i){const r=Om(e);r.push(t),n.firstCreatePass&&Fm(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Yn]&&(e[Yn]=new X1),e[Yn].queries.push(new Z1(i))}(i,D(),e)}function Hc(){return function a9(n,e){return n[Yn].queries[e].queryList}(D(),wg())}function u4(n,e){return n.queries.getByIndex(e)}function p4(n,e){return Nc(n,e)}const sp=new O("Application Initializer");let ap=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=L(sp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(so(s))t.push(s);else if(yk(s)){const a=new Promise((o,l)=>{s.subscribe({complete:o,error:l})});t.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),I4=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Ei=new O("LocaleId",{providedIn:"root",factory:()=>L(Ei,ne.Optional|ne.SkipSelf)||function S9(){return typeof $localize<"u"&&$localize.locale||Fs}()});let T4=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new mn(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class T9{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let P4=(()=>{class n{compileModuleSync(t){return new q1(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Ci(an(t).declarations).reduce((a,o)=>{const l=le(o);return l&&a.push(new Ya(l)),a},[]);return new T9(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const F4=new O(""),qc=new O("");let dp,cp=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dp||(function J9(n){dp=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static{this.\u0275fac=function(i){return new(i||n)(V(Ce),V(hp),V(qc))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),hp=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return dp?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),er=null;const N4=new O("AllowMultipleToken"),up=new O("PlatformDestroyListeners"),pp=new O("appBootstrapListener");class j4{constructor(e,t){this.name=e,this.token=t}}function z4(n,e,t=[]){const i=`Platform: ${e}`,r=new O(i);return(s=[])=>{let a=fp();if(!a||a.injector.get(N4,!1)){const o=[...t,...s,{provide:r,useValue:!0}];n?n(o):function nI(n){if(er&&!er.get(N4,!1))throw new I(400,!1);(function V4(){!function M8(n){eg=n}(()=>{throw new I(600,!1)})})(),er=n;const e=n.get(q4);(function H4(n){n.get(Wy,null)?.forEach(t=>t())})(n)}(function B4(n=[],e){return Yt.create({name:e,providers:[{provide:Wu,useValue:"platform"},{provide:up,useValue:new Set([()=>er=null])},...n]})}(o,i))}return function rI(n){const e=fp();if(!e)throw new I(401,!1);return e}()}}function fp(){return er?.get(q4)??null}let q4=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function sI(n="zone.js",e){return"noop"===n?new OA:"zone.js"===n?new Ce(e):n}(i?.ngZone,function U4(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function pD(n,e,t){return new B1(n,e,t)}(t.moduleType,this.injector,function X4(n){return[{provide:Ce,useFactory:n},{provide:Ba,multi:!0,useFactory:()=>{const e=L(oI,{optional:!0});return()=>e.initialize()}},{provide:Z4,useFactory:aI},{provide:cm,useFactory:hm}]}(()=>r)),a=s.injector.get(xi,null);return r.runOutsideAngular(()=>{const o=r.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{Uc(this._modules,s),o.unsubscribe()})}),function $4(n,e,t){try{const i=t();return so(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(a,r,()=>{const o=s.injector.get(ap);return o.runInitializers(),o.donePromise.then(()=>(function pv(n){kn(n,"Expected localeId to be defined"),"string"==typeof n&&(uv=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ei,Fs)||Fs),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=W4({},i);return function eI(n,e,t){const i=new q1(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(js);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new I(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new I(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(up,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)(V(Yt))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function W4(n,e){return Array.isArray(e)?e.reduce(W4,n):{...n,...e}}let js=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(Z4),this.zoneIsStable=L(cm),this.componentTypes=[],this.components=[],this.isStable=L(T4).hasPendingTasks.pipe(Zn(t=>t?U(!1):this.zoneIsStable),function T6(n,e=Ui){return n=n??P6,Ke((t,i)=>{let r,s=!0;t.subscribe($e(i,a=>{const o=e(a);(s||!n(r,o))&&(s=!1,r=o,i.next(a))}))})}(),k0()),this._injector=L(xn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof Ky;if(!this._injector.get(ap).done)throw!r&&function Wr(n){const e=le(n)||pt(n)||It(n);return null!==e&&e.standalone}(t),new I(405,!1);let a;a=r?t:this._injector.get(yc).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const o=function tI(n){return n.isBoundToModule}(a)?void 0:this._injector.get(Ar),c=a.create(Yt.NULL,[],i||a.selector,o),h=c.location.nativeElement,d=c.injector.get(F4,null);return d?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),Uc(this.components,c),d?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new I(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Uc(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(pp,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Uc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new I(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Z4=new O("",{providedIn:"root",factory:()=>L(xi).handleError.bind(void 0)});function aI(){const n=L(Ce),e=L(xi);return t=>n.runOutsideAngular(()=>e.handleError(t))}let oI=(()=>{class n{constructor(){this.zone=L(Ce),this.applicationRef=L(js)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let $c=(()=>{class n{static{this.__NG_ELEMENT_ID__=cI}}return n})();function cI(n){return function hI(n,e,t){if(yr(n)&&!t){const i=ln(n.index,e);return new Xa(i,i)}return 47&n.type?new Xa(e[Ge],e):null}(yt(),D(),16==(16&n))}class eM{constructor(){}supports(e){return _c(e)}create(e){return new gI(e)}}const fI=(n,e)=>e;class gI{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fI}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const a=!i||t&&t.currentIndex<nM(i,r,s)?t:i,o=nM(a,r,s),l=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{s||(s=[]);const c=o-r,h=l-r;if(c!=h){for(let u=0;u<c;u++){const p=u<s.length?s[u]:s[u]=0,f=p+u;h<=f&&f<c&&(s[u]=p+1)}s[a.previousIndex]=h-c}}o!==l&&e(a,o,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!_c(e))throw new I(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,a,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let o=0;o<this.length;o++)s=e[o],a=this._trackByFn(o,s),null!==t&&Object.is(t.trackById,a)?(i&&(t=this._verifyReinsertion(t,s,a,o)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,a,o),i=!0),t=t._next}else r=0,function $7(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,o=>{a=this._trackByFn(r,o),null!==t&&Object.is(t.trackById,a)?(i&&(t=this._verifyReinsertion(t,o,a,r)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,a,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new yI(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new tM),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class yI{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mI{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class tM{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new mI,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nM(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function rM(){return new Zc([new eM])}let Zc=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:rM})}constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||rM()),deps:[[n,new Ul,new La]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new I(901,!1)}}return n})();const bI=z4(null,"core",[]);let xI=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)(V(js))}}static{this.\u0275mod=vn({type:n})}static{this.\u0275inj=sn({})}}return n})();let Mp=null;function tr(){return Mp}class NI{}const en=new O("DocumentToken");let wp=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:function(){return L(jI)},providedIn:"platform"})}}return n})();const VI=new O("Location Initialized");let jI=(()=>{class n extends wp{constructor(){super(),this._doc=L(en),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tr().getBaseHref(this._doc)}onPopState(t){const i=tr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=tr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function bp(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function fM(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Si(n){return n&&"?"!==n[0]?"?"+n:n}let Sr=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:function(){return L(yM)},providedIn:"root"})}}return n})();const gM=new O("appBaseHref");let yM=(()=>{class n extends Sr{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??L(en).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return bp(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Si(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const a=this.prepareExternalUrl(r+Si(s));this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,s){const a=this.prepareExternalUrl(r+Si(s));this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(V(wp),V(gM,8))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HI=(()=>{class n extends Sr{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=bp(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let a=this.prepareExternalUrl(r+Si(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,i,a)}replaceState(t,i,r,s){let a=this.prepareExternalUrl(r+Si(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(V(wp),V(gM,8))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),xp=(()=>{class n{constructor(t){this._subject=new ke,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function qI(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(fM(mM(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Si(i))}normalize(t){return n.stripTrailingSlash(function BI(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,mM(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Si(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Si(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=Si}static{this.joinWithSlash=bp}static{this.stripTrailingSlash=fM}static{this.\u0275fac=function(i){return new(i||n)(V(Sr))}}static{this.\u0275prov=j({token:n,factory:function(){return function zI(){return new xp(V(Sr))}()},providedIn:"root"})}}return n})();function mM(n){return n.replace(/\/index.html$/,"")}class IT{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let SM=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,a)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new IT(r.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)i.remove(null===s?void 0:s);else if(null!==s){const o=i.get(s);i.move(o,a),DM(o,r)}});for(let r=0,s=i.length;r<s;r++){const o=i.get(r).context;o.index=r,o.count=s,o.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{DM(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(T(zn),T(Ai),T(Zc))}}static{this.\u0275dir=q({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function DM(n,e){n.context.$implicit=e.item}let IM=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new TT,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){TM("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){TM("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(T(zn),T(Ai))}}static{this.\u0275dir=q({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class TT{constructor(){this.$implicit=null,this.ngIf=null}}function TM(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${rt(e)}'.`)}let nP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=vn({type:n})}static{this.\u0275inj=sn({})}}return n})();function OM(n){return"server"===n}let aP=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new oP(V(en),window)})}}return n})();class oP{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function lP(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class PP extends NI{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hp extends PP{static makeCurrent(){!function FI(n){Mp||(Mp=n)}(new Hp)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function RP(){return bo=bo||document.querySelector("base"),bo?bo.getAttribute("href"):null}();return null==t?null:function LP(n){lh=lh||document.createElement("a"),lh.setAttribute("href",n);const e=lh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){bo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ET(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let lh,bo=null,FP=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();const zp=new O("EventManagerPlugins");let HM=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new I(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(V(zp),V(Ce))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();class zM{constructor(e){this._doc=e}}const Bp="ng-app-id";let BM=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=OM(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Bp}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(Bp),s;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Bp,this.appId),a}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,a=s.get(i)?.elements;a?a.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(V(en),V(hc),V(Gy,8),V(ms))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();const qp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Up=/%COMP%/g,HP=new O("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function UM(n,e){return e.map(t=>t.replace(Up,n))}let $M=(()=>{class n{constructor(t,i,r,s,a,o,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=o,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=OM(o),this.defaultRenderer=new $p(t,a,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ln.ShadowDom&&(i={...i,encapsulation:Ln.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof GM?r.applyToHost(t):r instanceof Wp&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const a=this.doc,o=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Ln.Emulated:s=new GM(l,c,i,this.appId,h,a,o,d);break;case Ln.ShadowDom:return new UP(l,c,t,i,a,o,this.nonce,d);default:s=new Wp(l,c,i,h,a,o,d)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(V(HM),V(BM),V(hc),V(HP),V(en),V(ms),V(Ce),V(Gy))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();class $p{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(qp[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(WM(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(WM(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new I(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=qp[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=qp[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Qi.DashCase|Qi.Important)?e.style.setProperty(t,i,r&Qi.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Qi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=tr().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function WM(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class UP extends $p{constructor(e,t,i,r,s,a,o,l){super(e,s,a,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=UM(r.id,r.styles);for(const h of c){const d=document.createElement("style");o&&d.setAttribute("nonce",o),d.textContent=h,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wp extends $p{constructor(e,t,i,r,s,a,o,l){super(e,s,a,o),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?UM(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class GM extends Wp{constructor(e,t,i,r,s,a,o,l){const c=r+"-"+i.id;super(e,t,i,s,a,o,l,c),this.contentAttr=function zP(n){return"_ngcontent-%COMP%".replace(Up,n)}(c),this.hostAttr=function BP(n){return"_nghost-%COMP%".replace(Up,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let $P=(()=>{class n extends zM{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(V(en))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();const ZM=["alt","control","meta","shift"],WP={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ZP=(()=>{class n extends zM{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tr().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let a="",o=i.indexOf("code");if(o>-1&&(i.splice(o,1),a="code."),ZM.forEach(c=>{const h=i.indexOf(c);h>-1&&(i.splice(h,1),a+=c+".")}),a+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=a,l}static matchEventFullKeyCode(t,i){let r=WP[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),ZM.forEach(a=>{a!==r&&(0,GP[a])(t)&&(s+=a+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(V(en))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();const QP=z4(bI,"browser",[{provide:ms,useValue:"browser"},{provide:Wy,useValue:function XP(){Hp.makeCurrent()},multi:!0},{provide:en,useFactory:function KP(){return function x_(n){Nu=n}(document),document},deps:[]}]),JP=new O(""),KM=[{provide:qc,useClass:class OP{addToWindow(e){Ee.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new I(5103,!1);return s},Ee.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ee.getAllAngularRootElements=()=>e.getAllRootElements(),Ee.frameworkStabilizers||(Ee.frameworkStabilizers=[]),Ee.frameworkStabilizers.push(i=>{const r=Ee.getAllAngularTestabilities();let s=r.length,a=!1;const o=function(l){a=a||l,s--,0==s&&i(a)};r.forEach(l=>{l.whenStable(o)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?tr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:F4,useClass:cp,deps:[Ce,hp,qc]},{provide:cp,useClass:cp,deps:[Ce,hp,qc]}],QM=[{provide:Wu,useValue:"root"},{provide:xi,useFactory:function YP(){return new xi},deps:[]},{provide:zp,useClass:$P,multi:!0,deps:[en,Ce,ms]},{provide:zp,useClass:ZP,multi:!0,deps:[en]},$M,BM,HM,{provide:Jy,useExisting:$M},{provide:class cP{},useClass:FP,deps:[]},[]];let eR=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:hc,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(V(JP,12))}}static{this.\u0275mod=vn({type:n})}static{this.\u0275inj=sn({providers:[...QM,...KM],imports:[nP,xI]})}}return n})(),JM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(V(en))}}static{this.\u0275prov=j({token:n,factory:function(i){let r=null;return r=i?new i:function nR(){return new JM(V(en))}(),r},providedIn:"root"})}}return n})();typeof window<"u"&&window;let n5=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:function(i){let r=null;return r=i?new(i||n):V(i5),r},providedIn:"root"})}}return n})(),i5=(()=>{class n extends n5{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case bn.NONE:return i;case bn.HTML:return ti(i,"HTML")?hn(i):Oy(this._doc,String(i)).toString();case bn.STYLE:return ti(i,"Style")?hn(i):i;case bn.SCRIPT:if(ti(i,"Script"))return hn(i);throw new I(5200,!1);case bn.URL:return ti(i,"URL")?hn(i):sc(String(i));case bn.RESOURCE_URL:if(ti(i,"ResourceURL"))return hn(i);throw new I(5201,!1);default:throw new I(5202,!1)}}bypassSecurityTrustHtml(t){return function I_(n){return new C_(n)}(t)}bypassSecurityTrustStyle(t){return function T_(n){return new __(n)}(t)}bypassSecurityTrustScript(t){return function P_(n){return new A_(n)}(t)}bypassSecurityTrustUrl(t){return function R_(n){return new E_(n)}(t)}bypassSecurityTrustResourceUrl(t){return function L_(n){return new S_(n)}(t)}static{this.\u0275fac=function(i){return new(i||n)(V(en))}}static{this.\u0275prov=j({token:n,factory:function(i){let r=null;return r=i?new i:function aR(n){return new i5(n.get(en))}(V(Yt)),r},providedIn:"root"})}}return n})();const{isArray:lR}=Array,{getPrototypeOf:cR,prototype:hR,keys:dR}=Object;function s5(n){if(1===n.length){const e=n[0];if(lR(e))return{args:e,keys:null};if(function uR(n){return n&&"object"==typeof n&&cR(n)===hR}(e)){const t=dR(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:pR}=Array;function Zp(n){return xe(e=>function fR(n,e){return pR(e)?n(...e):n(e)}(n,e))}function a5(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Xp(...n){const e=pa(n),t=f0(n),{args:i,keys:r}=s5(n);if(0===i.length)return Qe([],e);const s=new Ue(function gR(n,e,t=Ui){return i=>{o5(e,()=>{const{length:r}=n,s=new Array(r);let a=r,o=r;for(let l=0;l<r;l++)o5(e,()=>{const c=Qe(n[l],e);let h=!1;c.subscribe($e(i,d=>{s[l]=d,h||(h=!0,o--),o||i.next(t(s.slice()))},()=>{--a||i.complete()}))},i)},i)}}(i,e,r?a=>a5(r,a):Ui));return t?s.pipe(Zp(t)):s}function o5(n,e,t){n?fi(t,n,e):e()}const ch=md(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Yp(...n){return function yR(){return Ur(1)}()(Qe(n,pa(n)))}function l5(n){return new Ue(e=>{qt(n()).subscribe(e)})}function xo(n,e){const t=ue(n)?n:()=>n,i=r=>r.error(t());return new Ue(e?r=>e.schedule(i,0,r):i)}function Kp(){return Ke((n,e)=>{let t=null;n._refCount++;const i=$e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class c5 extends Ue{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,J2(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bt;const t=this.getSubject();e.add(this.source.subscribe($e(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bt.EMPTY)}return e}refCount(){return Kp()(this)}}function Bs(n){return n<=0?()=>Gn:Ke((e,t)=>{let i=0;e.subscribe($e(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Ti(n,e){return Ke((t,i)=>{let r=0;t.subscribe($e(i,s=>n.call(e,s,r++)&&i.next(s)))})}function hh(n){return Ke((e,t)=>{let i=!1;e.subscribe($e(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function h5(n=kR){return Ke((e,t)=>{let i=!1;e.subscribe($e(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function kR(){return new ch}function Dr(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ti((r,s)=>n(r,s,i)):Ui,Bs(1),t?hh(e):h5(()=>new ch))}function Co(n,e){return ue(e)?ht(n,e,1):ht(n,1)}function Ct(n,e,t){const i=ue(n)||e||t?{next:n,error:e,complete:t}:n;return i?Ke((r,s)=>{var a;null===(a=i.subscribe)||void 0===a||a.call(i);let o=!0;r.subscribe($e(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;o=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;o=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;o&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Ui}function Ir(n){return Ke((e,t)=>{let s,i=null,r=!1;i=e.subscribe($e(t,void 0,void 0,a=>{s=qt(n(a,Ir(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Qp(n){return n<=0?()=>Gn:Ke((e,t)=>{let i=[];e.subscribe($e(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Jp(n){return Ke((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Fe(n){return Ke((e,t)=>{qt(n).subscribe($e(t,()=>t.complete(),vd)),!t.closed&&e.subscribe(t)})}const Q="primary",_o=Symbol("RouteTitle");class xR{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qs(n){return new xR(n)}function CR(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const a=i[s],o=n[s];if(a.startsWith(":"))r[a.substring(1)]=o;else if(a!==o.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function li(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!d5(n[r],e[r]))return!1;return!0}function d5(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function u5(n){return n.length>0?n[n.length-1]:null}function ir(n){return function oR(n){return!!n&&(n instanceof Ue||ue(n.lift)&&ue(n.subscribe))}(n)?n:so(n)?Qe(Promise.resolve(n)):U(n)}const AR={exact:function g5(n,e,t){if(!Tr(n.segments,e.segments)||!dh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!g5(n.children[i],e.children[i],t))return!1;return!0},subset:y5},p5={exact:function ER(n,e){return li(n,e)},subset:function SR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>d5(n[t],e[t]))},ignored:()=>!0};function f5(n,e,t){return AR[t.paths](n.root,e.root,t.matrixParams)&&p5[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function y5(n,e,t){return m5(n,e,e.segments,t)}function m5(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Tr(r,t)||e.hasChildren()||!dh(r,t,i))}if(n.segments.length===t.length){if(!Tr(n.segments,t)||!dh(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!y5(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Tr(n.segments,r)&&dh(n.segments,r,i)&&n.children[Q])&&m5(n.children[Q],e,s,i)}}function dh(n,e,t){return e.every((i,r)=>p5[t](n[r].parameters,i.parameters))}class Us{constructor(e=new Me([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return TR.serialize(this)}}class Me{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uh(this)}}class Ao{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qs(this.parameters)),this._parameterMap}toString(){return M5(this)}}function Tr(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Eo=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:function(){return new ef},providedIn:"root"})}}return n})();class ef{parse(e){const t=new BR(e);return new Us(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${So(e.root,!0)}`,i=function LR(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${ph(t)}=${ph(r)}`).join("&"):`${ph(t)}=${ph(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function PR(n){return encodeURI(n)}(e.fragment)}`:""}`}}const TR=new ef;function uh(n){return n.segments.map(e=>M5(e)).join("/")}function So(n,e){if(!n.hasChildren())return uh(n);if(e){const t=n.children[Q]?So(n.children[Q],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Q&&i.push(`${r}:${So(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function IR(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Q&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Q&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===Q?[So(n.children[Q],!1)]:[`${r}:${So(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Q]?`${uh(n)}/${t[0]}`:`${uh(n)}/(${t.join("//")})`}}function k5(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ph(n){return k5(n).replace(/%3B/gi,";")}function tf(n){return k5(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fh(n){return decodeURIComponent(n)}function v5(n){return fh(n.replace(/\+/g,"%20"))}function M5(n){return`${tf(n.path)}${function RR(n){return Object.keys(n).map(e=>`;${tf(e)}=${tf(n[e])}`).join("")}(n.parameters)}`}const OR=/^[^\/()?;#]+/;function nf(n){const e=n.match(OR);return e?e[0]:""}const FR=/^[^\/()?;=#]+/,VR=/^[^=?&#]+/,HR=/^[^&#]+/;class BR{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Q]=new Me(e,t)),i}parseSegment(){const e=nf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new I(4009,!1);return this.capture(e),new Ao(fh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function NR(n){const e=n.match(FR);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=nf(this.remaining);r&&(i=r,this.capture(i))}e[fh(t)]=fh(i)}parseQueryParam(e){const t=function jR(n){const e=n.match(VR);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const a=function zR(n){const e=n.match(HR);return e?e[0]:""}(this.remaining);a&&(i=a,this.capture(i))}const r=v5(t),s=v5(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=nf(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new I(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Q);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[Q]:new Me([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new I(4011,!1)}}function w5(n){return n.segments.length>0?new Me([],{[Q]:n}):n}function b5(n){const e={};for(const i of Object.keys(n.children)){const s=b5(n.children[i]);if(i===Q&&0===s.segments.length&&s.hasChildren())for(const[a,o]of Object.entries(s.children))e[a]=o;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function qR(n){if(1===n.numberOfChildren&&n.children[Q]){const e=n.children[Q];return new Me(n.segments.concat(e.segments),e.children)}return n}(new Me(n.segments,e))}function Pr(n){return n instanceof Us}function x5(n){let e;const r=w5(function t(s){const a={};for(const l of s.children){const c=t(l);a[l.outlet]=c}const o=new Me(s.url,a);return s===n&&(e=o),o}(n.root));return e??r}function C5(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return rf(r,r,r,t,i);const s=function $R(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new A5(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const o={};return Object.entries(s.outlets).forEach(([l,c])=>{o[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:o}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===a?(s.split("/").forEach((o,l)=>{0==l&&"."===o||(0==l&&""===o?t=!0:".."===o?e++:""!=o&&r.push(o))}),r):[...r,s]},[]);return new A5(t,e,i)}(e);if(s.toRoot())return rf(r,r,new Me([],{}),t,i);const a=function WR(n,e,t){if(n.isAbsolute)return new yh(e,!0,0);if(!t)return new yh(e,!1,NaN);if(null===t.parent)return new yh(t,!0,0);const i=gh(n.commands[0])?0:1;return function GR(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new I(4005,!1);r=i.segments.length}return new yh(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),o=a.processChildren?Io(a.segmentGroup,a.index,s.commands):E5(a.segmentGroup,a.index,s.commands);return rf(r,a.segmentGroup,o,t,i)}function gh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Do(n){return"object"==typeof n&&null!=n&&n.outlets}function rf(n,e,t,i,r){let a,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),a=n===e?t:_5(n,e,t);const o=w5(b5(a));return new Us(o,s,r)}function _5(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:_5(s,e,t)}),new Me(n.segments,i)}class A5{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&gh(i[0]))throw new I(4003,!1);const r=i.find(Do);if(r&&r!==u5(i))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yh{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function E5(n,e,t){if(n||(n=new Me([],{})),0===n.segments.length&&n.hasChildren())return Io(n,e,t);const i=function XR(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const a=n.segments[r],o=t[i];if(Do(o))break;const l=`${o}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!D5(l,c,a))return s;i+=2}else{if(!D5(l,{},a))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Me(n.segments.slice(0,i.pathIndex),{});return s.children[Q]=new Me(n.segments.slice(i.pathIndex),n.children),Io(s,0,r)}return i.match&&0===r.length?new Me(n.segments,{}):i.match&&!n.hasChildren()?sf(n,e,t):i.match?Io(n,0,r):sf(n,e,t)}function Io(n,e,t){if(0===t.length)return new Me(n.segments,{});{const i=function ZR(n){return Do(n[0])?n[0].outlets:{[Q]:n}}(t),r={};if(Object.keys(i).some(s=>s!==Q)&&n.children[Q]&&1===n.numberOfChildren&&0===n.children[Q].segments.length){const s=Io(n.children[Q],e,t);return new Me(n.segments,s.children)}return Object.entries(i).forEach(([s,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(r[s]=E5(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{void 0===i[s]&&(r[s]=a)}),new Me(n.segments,r)}}function sf(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Do(s)){const l=YR(s.outlets);return new Me(i,l)}if(0===r&&gh(t[0])){i.push(new Ao(n.segments[e].path,S5(t[0]))),r++;continue}const a=Do(s)?s.outlets[Q]:`${s}`,o=r<t.length-1?t[r+1]:null;a&&o&&gh(o)?(i.push(new Ao(a,S5(o))),r+=2):(i.push(new Ao(a,{})),r++)}return new Me(i,{})}function YR(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=sf(new Me([],{}),0,i))}),e}function S5(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function D5(n,e,t){return n==t.path&&li(e,t.parameters)}const To="imperative";class ci{constructor(e,t){this.id=e,this.url=t}}class mh extends ci{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class rr extends ci{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Po extends ci{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $s extends ci{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class kh extends ci{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class I5 extends ci{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KR extends ci{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QR extends ci{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class JR extends ci{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eL extends ci{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tL{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class iL{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rL{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sL{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aL{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class T5{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class af{}class lf{constructor(e){this.url=e}}class oL{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ro,this.attachRef=null}}let Ro=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new oL,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class P5{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=cf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=cf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=hf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return hf(e,this._root).map(t=>t.value)}}function cf(n,e){if(n===e.value)return e;for(const t of e.children){const i=cf(n,t);if(i)return i}return null}function hf(n,e){if(n===e.value)return[e];for(const t of e.children){const i=hf(n,t);if(i.length)return i.unshift(e),i}return[]}class Pi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ws(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class R5 extends P5{constructor(e,t){super(e),this.snapshot=t,df(this,e)}toString(){return this.snapshot.toString()}}function L5(n,e){const t=function lL(n,e){const a=new vh([],{},{},"",{},Q,e,null,{});return new F5("",new Pi(a,[]))}(0,e),i=new mn([new Ao("",{})]),r=new mn({}),s=new mn({}),a=new mn({}),o=new mn(""),l=new Gs(i,r,a,o,s,Q,e,t.root);return l.snapshot=t.root,new R5(new Pi(l,[]),t)}class Gs{constructor(e,t,i,r,s,a,o,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=o,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(xe(c=>c[_o]))??U(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(xe(e=>qs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(xe(e=>qs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function O5(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function cL(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class vh{get title(){return this.data?.[_o]}constructor(e,t,i,r,s,a,o,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=o,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class F5 extends P5{constructor(e,t){super(t),this.url=e,df(this,t)}toString(){return N5(this._root)}}function df(n,e){e.value._routerState=n,e.children.forEach(t=>df(n,t))}function N5(n){const e=n.children.length>0?` { ${n.children.map(N5).join(", ")} } `:"";return`${n.value}${e}`}function uf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,li(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),li(e.params,t.params)||n.paramsSubject.next(t.params),function _R(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!li(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),li(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function pf(n,e){const t=li(n.params,e.params)&&function DR(n,e){return Tr(n,e)&&n.every((t,i)=>li(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pf(n.parent,e.parent))}let ff=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Q,this.activateEvents=new ke,this.deactivateEvents=new ke,this.attachEvents=new ke,this.detachEvents=new ke,this.parentContexts=L(Ro),this.location=L(zn),this.changeDetector=L($c),this.environmentInjector=L(xn),this.inputBinder=L(Mh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new I(4013,!1);this._activatedRoute=t;const r=this.location,a=t.snapshot.component,o=this.parentContexts.getOrCreateContext(this.name).children,l=new hL(t,o,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=q({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[on]})}}return n})();class hL{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Gs?this.route:e===Ro?this.childContexts:this.parent.get(e,t)}}const Mh=new O("");let V5=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=Xp([i.queryParams,i.params,i.data]).pipe(Zn(([s,a,o],l)=>(o={...s,...a,...o},0===l?U(o):Promise.resolve(o)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const a=function OI(n){const e=le(n);if(!e)return null;const t=new Ya(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(a)for(const{templateName:o}of a.inputs)t.activatedComponentRef.setInput(o,s[o]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();function Lo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function uL(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Lo(n,i,r);return Lo(n,i)})}(n,e,t);return new Pi(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(o=>Lo(n,o)),a}}const i=function pL(n){return new Gs(new mn(n.url),new mn(n.params),new mn(n.queryParams),new mn(n.fragment),new mn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Lo(n,s));return new Pi(i,r)}}const gf="ngNavigationCancelingError";function j5(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Pr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=H5(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function H5(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[gf]=!0,i.cancellationCode=e,t&&(i.url=t),i}function z5(n){return n&&n[gf]}let B5=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ka({type:n,selectors:[["ng-component"]],standalone:!0,features:[Hv],decls:1,vars:0,template:function(i,r){1&i&&Kt(0,"router-outlet")},dependencies:[ff],encapsulation:2})}}return n})();function yf(n){const e=n.children&&n.children.map(yf),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Q&&(t.component=B5),t}function Un(n){return n.outlet||Q}function Oo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class wL{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),uf(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ws(t);e.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,r[a],i),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ws(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);if(i&&i.outlet){const a=i.outlet.detach(),o=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:o})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ws(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ws(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new aL(s.value.snapshot))}),e.children.length&&this.forwardEvent(new rL(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(uf(r),r===s)if(r.component){const a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const o=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(o.contexts),a.attachRef=o.componentRef,a.route=o.route.value,a.outlet&&a.outlet.attach(o.componentRef,o.route.value),uf(o.route.value),this.activateChildRoutes(e,null,a.children)}else{const o=Oo(r.snapshot);a.attachRef=null,a.route=r,a.injector=o,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}}class q5{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wh{constructor(e,t){this.component=e,this.route=t}}function bL(n,e,t){const i=n._root;return Fo(i,e?e._root:null,t,[i.value])}function Zs(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function j6(n){return null!==Ml(n)}(n)?e.get(n):n:i}function Fo(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ws(e);return n.children.forEach(a=>{(function CL(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,a=e?e.value:null,o=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const l=function _L(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Tr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tr(n.url,e.url)||!li(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pf(n,e)||!li(n.queryParams,e.queryParams);default:return!pf(n,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new q5(i)):(s.data=a.data,s._resolvedData=a._resolvedData),Fo(n,e,s.component?o?o.children:null:t,i,r),l&&o&&o.outlet&&o.outlet.isActivated&&r.canDeactivateChecks.push(new wh(o.outlet.component,a))}else a&&No(e,o,r),r.canActivateChecks.push(new q5(i)),Fo(n,null,s.component?o?o.children:null:t,i,r)})(a,s[a.value.outlet],t,i.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,o])=>No(o,t.getContext(a),r)),r}function No(n,e,t){const i=Ws(n),r=n.value;Object.entries(i).forEach(([s,a])=>{No(a,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new wh(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Vo(n){return"function"==typeof n}function U5(n){return n instanceof ch||"EmptyError"===n?.name}const bh=Symbol("INITIAL_VALUE");function Xs(){return Zn(n=>Xp(n.map(e=>e.pipe(Bs(1),function mR(...n){const e=pa(n);return Ke((t,i)=>{(e?Yp(n,t,e):Yp(n,t)).subscribe(i)})}(bh)))).pipe(xe(e=>{for(const t of e)if(!0!==t){if(t===bh)return bh;if(!1===t||t instanceof Us)return t}return!0}),Ti(e=>e!==bh),Bs(1)))}function $5(n){return function Fx(...n){return Y2(n)}(Ct(e=>{if(Pr(e))throw j5(0,e)}),xe(e=>!0===e))}class xh{constructor(e){this.segmentGroup=e||null}}class W5{constructor(e){this.urlTree=e}}function Ys(n){return xo(new xh(n))}function G5(n){return xo(new W5(n))}class $L{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new I(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return U(i);if(r.numberOfChildren>1||!r.children[Q])return xo(new I(4e3,!1));r=r.children[Q]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Us(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const o=s.substring(1);i[r]=t[o]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let a={};return Object.entries(t.children).forEach(([o,l])=>{a[o]=this.createSegmentGroup(e,l,i,r)}),new Me(s,a)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new I(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const mf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WL(n,e,t,i,r){const s=kf(n,e,t);return s.matched?(i=function gL(n,e){return n.providers&&!n._injector&&(n._injector=U1(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function BL(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?U(r.map(a=>{const o=Zs(a,n);return ir(function TL(n){return n&&Vo(n.canMatch)}(o)?o.canMatch(e,t):n.runInContext(()=>o(e,t)))})).pipe(Xs(),$5()):U(!0)}(i,e,t).pipe(xe(a=>!0===a?s:{...mf}))):U(s)}function kf(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...mf}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||CR)(t,n,e);if(!r)return{...mf};const s={};Object.entries(r.posParams??{}).forEach(([o,l])=>{s[o]=l.path});const a=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function Z5(n,e,t,i){return t.length>0&&function XL(n,e,t){return t.some(i=>Ch(n,e,i)&&Un(i)!==Q)}(n,t,i)?{segmentGroup:new Me(e,ZL(i,new Me(t,n.children))),slicedSegments:[]}:0===t.length&&function YL(n,e,t){return t.some(i=>Ch(n,e,i))}(n,t,i)?{segmentGroup:new Me(n.segments,GL(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Me(n.segments,n.children),slicedSegments:t}}function GL(n,e,t,i,r){const s={};for(const a of i)if(Ch(n,t,a)&&!r[Un(a)]){const o=new Me([],{});s[Un(a)]=o}return{...r,...s}}function ZL(n,e){const t={};t[Q]=e;for(const i of n)if(""===i.path&&Un(i)!==Q){const r=new Me([],{});t[Un(i)]=r}return t}function Ch(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class eO{constructor(e,t,i,r,s,a,o){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=o,this.allowRedirects=!0,this.applyRedirects=new $L(this.urlSerializer,this.urlTree)}noMatchError(e){return new I(4002,!1)}recognize(){const e=Z5(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Q).pipe(Ir(t=>{if(t instanceof W5)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof xh?this.noMatchError(t):t}),xe(t=>{const i=new vh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Q,this.rootComponentType,null,{}),r=new Pi(i,t),s=new F5("",r),a=function UR(n,e,t=null,i=null){return C5(x5(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(s._root),{state:s,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Q).pipe(Ir(i=>{throw i instanceof xh?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=O5(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Qe(r).pipe(Co(s=>{const a=i.children[s],o=function vL(n,e){const t=n.filter(i=>Un(i)===e);return t.push(...n.filter(i=>Un(i)!==e)),t}(t,s);return this.processSegmentGroup(e,o,a,s)}),function MR(n,e){return Ke(function vR(n,e,t,i,r){return(s,a)=>{let o=t,l=e,c=0;s.subscribe($e(a,h=>{const d=c++;l=o?n(l,h,d):(o=!0,h),i&&a.next(l)},r&&(()=>{o&&a.next(l),a.complete()})))}}(n,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),hh(null),function wR(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Ti((r,s)=>n(r,s,i)):Ui,Qp(1),t?hh(e):h5(()=>new ch))}(),ht(s=>{if(null===s)return Ys(i);const a=X5(s);return function tO(n){n.sort((e,t)=>e.value.outlet===Q?-1:t.value.outlet===Q?1:e.value.outlet.localeCompare(t.value.outlet))}(a),U(a)}))}processSegment(e,t,i,r,s,a){return Qe(t).pipe(Co(o=>this.processSegmentAgainstRoute(o._injector??e,t,o,i,r,s,a).pipe(Ir(l=>{if(l instanceof xh)return U(null);throw l}))),Dr(o=>!!o),Ir(o=>{if(U5(o))return function QL(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?U([]):Ys(i);throw o}))}processSegmentAgainstRoute(e,t,i,r,s,a,o){return function KL(n,e,t,i){return!!(Un(n)===i||i!==Q&&Ch(e,t,n))&&("**"===n.path||kf(e,n,t).matched)}(i,r,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,a,o):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,a):Ys(r):Ys(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?G5(s):this.applyRedirects.lineralizeSegments(i,s).pipe(ht(a=>{const o=new Me(a,{});return this.processSegment(e,t,o,a,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,a){const{matched:o,consumedSegments:l,remainingSegments:c,positionalParamSegments:h}=kf(t,r,s);if(!o)return Ys(t);const d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?G5(d):this.applyRedirects.lineralizeSegments(r,d).pipe(ht(u=>this.processSegment(e,i,t,u.concat(c),a,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,a){let o;if("**"===i.path){const l=r.length>0?u5(r).parameters:{};o=U({snapshot:new vh(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Y5(i),Un(i),i.component??i._loadedComponent??null,i,K5(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else o=WL(t,i,r,e).pipe(xe(({matched:l,consumedSegments:c,remainingSegments:h,parameters:d})=>l?{snapshot:new vh(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Y5(i),Un(i),i.component??i._loadedComponent??null,i,K5(i)),consumedSegments:c,remainingSegments:h}:null));return o.pipe(Zn(l=>null===l?Ys(t):this.getChildConfig(e=i._injector??e,i,r).pipe(Zn(({routes:c})=>{const h=i._loadedInjector??e,{snapshot:d,consumedSegments:u,remainingSegments:p}=l,{segmentGroup:f,slicedSegments:g}=Z5(t,u,p,c);if(0===g.length&&f.hasChildren())return this.processChildren(h,c,f).pipe(xe(y=>null===y?null:[new Pi(d,y)]));if(0===c.length&&0===g.length)return U([new Pi(d,[])]);const m=Un(i)===s;return this.processSegment(h,c,f,g,m?Q:s,!0).pipe(xe(y=>[new Pi(d,y)]))}))))}getChildConfig(e,t,i){return t.children?U({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?U({routes:t._loadedRoutes,injector:t._loadedInjector}):function zL(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?U(!0):U(r.map(a=>{const o=Zs(a,n);return ir(function EL(n){return n&&Vo(n.canLoad)}(o)?o.canLoad(e,t):n.runInContext(()=>o(e,t)))})).pipe(Xs(),$5())}(e,t,i).pipe(ht(r=>r?this.configLoader.loadChildren(e,t).pipe(Ct(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function UL(n){return xo(H5(!1,3))}())):U({routes:[],injector:e})}}function nO(n){const e=n.value.routeConfig;return e&&""===e.path}function X5(n){const e=[],t=new Set;for(const i of n){if(!nO(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=X5(i.children);e.push(new Pi(i.value,r))}return e.filter(i=>!t.has(i))}function Y5(n){return n.data||{}}function K5(n){return n.resolve||{}}function Q5(n){return"string"==typeof n.title||null===n.title}function vf(n){return Zn(e=>{const t=n(e);return t?Qe(t).pipe(xe(()=>e)):U(e)})}const Ks=new O("ROUTES");let Mf=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(P4)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return U(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=ir(t.loadComponent()).pipe(xe(J5),Ct(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Jp(()=>{this.componentLoaders.delete(t)})),r=new c5(i,()=>new yn).pipe(Kp());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return U({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function cO(n,e,t,i){return ir(n.loadChildren()).pipe(xe(J5),ht(r=>r instanceof Vv||Array.isArray(r)?U(r):Qe(e.compileModuleAsync(r))),xe(r=>{i&&i(n);let s,a,o=!1;return Array.isArray(r)?(a=r,!0):(s=r.create(t).injector,a=s.get(Ks,[],{optional:!0,self:!0}).flat()),{routes:a.map(yf),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Jp(()=>{this.childrenLoaders.delete(i)})),a=new c5(s,()=>new yn).pipe(Kp());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function J5(n){return function hO(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let _h=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yn,this.transitionAbortSubject=new yn,this.configLoader=L(Mf),this.environmentInjector=L(xn),this.urlSerializer=L(Eo),this.rootContexts=L(Ro),this.inputBindingEnabled=null!==L(Mh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>U(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new nL(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new tL(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new mn({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:To,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ti(s=>0!==s.id),xe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Zn(s=>{this.currentTransition=s;let a=!1,o=!1;return U(s).pipe(Ct(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zn(l=>{const c=l.currentBrowserUrl.toString(),h=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new $s(l.id,this.urlSerializer.serialize(l.rawUrl),u,0)),l.resolve(null),Gn}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return U(l).pipe(Zn(u=>{const p=this.transitions?.getValue();return this.events.next(new mh(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),p!==this.transitions?.getValue()?Gn:Promise.resolve(u)}),function iO(n,e,t,i,r,s){return ht(a=>function JL(n,e,t,i,r,s,a="emptyOnly"){return new eO(n,e,t,i,r,a,s).recognize()}(n,e,t,i,a.extractedUrl,r,s).pipe(xe(({state:o,tree:l})=>({...a,targetSnapshot:o,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ct(u=>{s.targetSnapshot=u.targetSnapshot,s.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects};const p=new I5(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}));if(h&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:u,extractedUrl:p,source:f,restoredState:g,extras:m}=l,y=new mh(u,this.urlSerializer.serialize(p),f,g);this.events.next(y);const k=L5(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:k,urlAfterRedirects:p,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},U(s)}{const u="";return this.events.next(new $s(l.id,this.urlSerializer.serialize(l.extractedUrl),u,1)),l.resolve(null),Gn}}),Ct(l=>{const c=new KR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),xe(l=>(this.currentTransition=s={...l,guards:bL(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function RL(n,e){return ht(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?U({...t,guardsResult:!0}):function LL(n,e,t,i){return Qe(n).pipe(ht(r=>function HL(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?U(s.map(o=>{const l=Oo(e)??r,c=Zs(o,l);return ir(function IL(n){return n&&Vo(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(Dr())})).pipe(Xs()):U(!0)}(r.component,r.route,t,e,i)),Dr(r=>!0!==r,!0))}(a,i,r,n).pipe(ht(o=>o&&function AL(n){return"boolean"==typeof n}(o)?function OL(n,e,t,i){return Qe(e).pipe(Co(r=>Yp(function NL(n,e){return null!==n&&e&&e(new iL(n)),U(!0)}(r.route.parent,i),function FL(n,e){return null!==n&&e&&e(new sL(n)),U(!0)}(r.route,i),function jL(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>function xL(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>l5(()=>U(a.guards.map(l=>{const c=Oo(a.node)??t,h=Zs(l,c);return ir(function DL(n){return n&&Vo(n.canActivateChild)}(h)?h.canActivateChild(i,n):c.runInContext(()=>h(i,n))).pipe(Dr())})).pipe(Xs())));return U(s).pipe(Xs())}(n,r.path,t),function VL(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return U(!0);const r=i.map(s=>l5(()=>{const a=Oo(e)??t,o=Zs(s,a);return ir(function SL(n){return n&&Vo(n.canActivate)}(o)?o.canActivate(e,n):a.runInContext(()=>o(e,n))).pipe(Dr())}));return U(r).pipe(Xs())}(n,r.route,t))),Dr(r=>!0!==r,!0))}(i,s,n,e):U(o)),xe(o=>({...t,guardsResult:o})))})}(this.environmentInjector,l=>this.events.next(l)),Ct(l=>{if(s.guardsResult=l.guardsResult,Pr(l.guardsResult))throw j5(0,l.guardsResult);const c=new QR(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Ti(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),vf(l=>{if(l.guards.canActivateChecks.length)return U(l).pipe(Ct(c=>{const h=new JR(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),Zn(c=>{let h=!1;return U(c).pipe(function rO(n,e){return ht(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return U(t);let s=0;return Qe(r).pipe(Co(a=>function sO(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Q5(r)&&(s[_o]=r.title),function aO(n,e,t,i){const r=function oO(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return U({});const s={};return Qe(r).pipe(ht(a=>function lO(n,e,t,i){const r=Oo(e)??i,s=Zs(n,r);return ir(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[a],e,t,i).pipe(Dr(),Ct(o=>{s[a]=o}))),Qp(1),function bR(n){return xe(()=>n)}(s),Ir(a=>U5(a)?Gn:xo(a)))}(s,n,e,i).pipe(xe(a=>(n._resolvedData=a,n.data=O5(n,t).resolve,r&&Q5(r)&&(n.data[_o]=r.title),null)))}(a.route,i,n,e)),Ct(()=>s++),Qp(1),ht(a=>s===r.length?U(t):Gn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ct({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",2)}}))}),Ct(c=>{const h=new eL(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),vf(l=>{const c=h=>{const d=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ct(u=>{h.component=u}),xe(()=>{})));for(const u of h.children)d.push(...c(u));return d};return Xp(c(l.targetSnapshot.root)).pipe(hh(),Bs(1))}),vf(()=>this.afterPreactivation()),xe(l=>{const c=function dL(n,e,t){const i=Lo(n,e._root,t?t._root:void 0);return new R5(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),Ct(()=>{this.events.next(new af)}),((n,e,t,i)=>xe(r=>(new wL(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Bs(1),Ct({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Fe(this.transitionAbortSubject.pipe(Ct(l=>{throw l}))),Jp(()=>{a||o||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ir(l=>{if(o=!0,z5(l))this.events.next(new Po(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function fL(n){return z5(n)&&Pr(n.url)}(l)?this.events.next(new lf(l.url)):s.resolve(!1);else{this.events.next(new kh(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return Gn}))}))}cancelNavigationTransition(t,i,r){const s=new Po(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e3(n){return n!==To}let t3=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Q);return i}getResolvedTitleForRoute(t){return t.data[_o]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:function(){return L(dO)},providedIn:"root"})}}return n})(),dO=(()=>{class n extends t3{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(V(JM))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:function(){return L(fO)},providedIn:"root"})}}return n})();class pO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let fO=(()=>{class n extends pO{static{this.\u0275fac=function(){let t;return function(r){return(t||(t=mt(n)))(r||n)}}()}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ah=new O("",{providedIn:"root",factory:()=>({})});let gO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:function(){return L(yO)},providedIn:"root"})}}return n})(),yO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jo=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(jo||{});function n3(n,e){n.events.pipe(Ti(t=>t instanceof rr||t instanceof Po||t instanceof kh||t instanceof $s),xe(t=>t instanceof rr||t instanceof $s?jo.COMPLETE:t instanceof Po&&(0===t.code||1===t.code)?jo.REDIRECTING:jo.FAILED),Ti(t=>t!==jo.REDIRECTING),Bs(1)).subscribe(()=>{e()})}function mO(n){throw n}function kO(n,e,t){return e.parse("/")}const vO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=L(I4),this.isNgZoneEnabled=!1,this._events=new yn,this.options=L(Ah,{optional:!0})||{},this.pendingTasks=L(T4),this.errorHandler=this.options.errorHandler||mO,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||kO,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=L(gO),this.routeReuseStrategy=L(uO),this.titleStrategy=L(t3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=L(Ks,{optional:!0})?.flat()??[],this.navigationTransitions=L(_h),this.urlSerializer=L(Eo),this.location=L(xp),this.componentInputBindingEnabled=!!L(Mh,{optional:!0}),this.eventsSubscription=new Bt,this.isNgZoneEnabled=L(Ce)instanceof Ce&&Ce.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Us,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=L5(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(i3(i)&&this._events.next(i));if(i instanceof mh)e3(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof $s)this.rawUrlTree=r.rawUrl;else if(i instanceof I5){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof af)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof Po)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof lf){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),a={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||e3(r.source)};this.scheduleNavigation(s,To,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof kh&&this.restoreHistory(r,!0),i instanceof rr&&(this.navigated=!0),i3(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),To,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const o=this.parseUrl(t);this.scheduleNavigation(o,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:o,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:a;let d,h=null;switch(o){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{d=x5(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return C5(d,t,h,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Pr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,To,null,i)}navigate(t,i={skipLocationChange:!1}){return function wO(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new I(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...vO}:!1===i?{...MO}:i,Pr(t))return f5(this.currentUrlTree,t,r);const s=this.parseUrl(t);return f5(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,a){if(this.disposed)return Promise.resolve(!1);let o,l,c;a?(o=a.resolve,l=a.reject,c=a.promise):c=new Promise((d,u)=>{o=d,l=u});const h=this.pendingTasks.add();return n3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:o,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const a={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",a)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function i3(n){return!(n instanceof af||n instanceof lf)}class r3{}let CO=(()=>{class n{constructor(t,i,r,s,a){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ti(t=>t instanceof rr),Co(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=U1(s.providers,t,`Route: ${s.path}`));const a=s._injector??t,o=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(o,s.children??s._loadedRoutes))}return Qe(r).pipe(Ur())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):U(null);const s=r.pipe(ht(a=>null===a?U(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return i.loadComponent&&!i._loadedComponent?Qe([s,this.loader.loadComponent(i)]).pipe(Ur()):s})}static{this.\u0275fac=function(i){return new(i||n)(V(Sn),V(P4),V(xn),V(r3),V(Mf))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const bf=new O("");let s3=(()=>{class n{constructor(t,i,r,s,a={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof rr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof $s&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof T5&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new T5(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){!function Cm(){throw new Error("invalid")}()}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();function Ri(n,e){return{\u0275kind:n,\u0275providers:e}}function o3(){const n=L(Yt);return e=>{const t=n.get(js);if(e!==t.components[0])return;const i=n.get(Sn),r=n.get(l3);1===n.get(xf)&&i.initialNavigation(),n.get(c3,null,ne.Optional)?.setUpPreloading(),n.get(bf,null,ne.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const l3=new O("",{factory:()=>new yn}),xf=new O("",{providedIn:"root",factory:()=>1}),c3=new O("");function SO(n){return Ri(0,[{provide:c3,useExisting:CO},{provide:r3,useExisting:n}])}const h3=new O("ROUTER_FORROOT_GUARD"),IO=[xp,{provide:Eo,useClass:ef},Sn,Ro,{provide:Gs,useFactory:function a3(n){return n.routerState.root},deps:[Sn]},Mf,[]];function TO(){return new j4("Router",Sn)}let d3=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[IO,[],{provide:Ks,multi:!0,useValue:t},{provide:h3,useFactory:OO,deps:[[Sn,new La,new Ul]]},{provide:Ah,useValue:i||{}},i?.useHash?{provide:Sr,useClass:HI}:{provide:Sr,useClass:yM},{provide:bf,useFactory:()=>{const n=L(aP),e=L(Ce),t=L(Ah),i=L(_h),r=L(Eo);return t.scrollOffset&&n.setOffset(t.scrollOffset),new s3(r,i,n,e,t)}},i?.preloadingStrategy?SO(i.preloadingStrategy).\u0275providers:[],{provide:j4,multi:!0,useFactory:TO},i?.initialNavigation?FO(i):[],i?.bindToComponentInputs?Ri(8,[V5,{provide:Mh,useExisting:V5}]).\u0275providers:[],[{provide:u3,useFactory:o3},{provide:pp,multi:!0,useExisting:u3}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ks,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)(V(h3,8))}}static{this.\u0275mod=vn({type:n})}static{this.\u0275inj=sn({})}}return n})();function OO(n){return"guarded"}function FO(n){return["disabled"===n.initialNavigation?Ri(3,[{provide:sp,multi:!0,useFactory:()=>{const e=L(Sn);return()=>{e.setUpLocationChangeListener()}}},{provide:xf,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ri(2,[{provide:xf,useValue:0},{provide:sp,multi:!0,deps:[Yt],useFactory:e=>{const t=e.get(VI,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Sn),s=e.get(l3);n3(r,()=>{i(!0)}),e.get(_h).afterPreactivation=()=>(i(!0),s.closed?U(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const u3=new O(""),VO=[];let jO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=vn({type:n})}static{this.\u0275inj=sn({imports:[d3.forRoot(VO),d3]})}}return n})();const HO=JSON.parse('{"M":[{"title":"Alaba al Se\xf1or","url":"assets/pdf/LETRA_Alaba_Al_Sen\u0303or.pdf","version":"Est\xe1ndar   "},{"title":"Salmo 84","url":"assets/pdf/LETRA_Salmo_84.pdf","version":"Danilo Montero"},{"title":"A ti Adoramos","url":"assets/pdf/LETRA_A_Ti_Adoramos.pdf","version":"Est\xe1ndar"},{"title":"Abre mis Ojos","url":"assets/pdf/LETRA_Abre_mis_ojos.pdf","version":"Ethnos"},{"title":"Agnus Dei","url":"assets/pdf/LETRA_Agnus_Dei.pdf","version":"Ethnos"},{"title":"Al que es Digno - Venci\xf3","url":"assets/pdf/LETRA_AL_QUE_ES_DIGNO_+_VENCIO.pdf","version":"Marcos Witt"},{"title":"Alaba","url":"assets/pdf/LETRA_Alaba.pdf","version":"Evan Craft"},{"title":"Ambici\xf3n Secreta","url":"assets/pdf/LETRA_Ambici\xf3n_Secreta.pdf","version":"Est\xe1ndar"},{"title":"Amor sin Condici\xf3n","url":"assets/pdf/LETRA_Amor_Sin_Condici\xf3n_(Zion).pdf","version":"Evan Craft"},{"title":"\xc1ngeles Cantando","url":"assets/pdf/LETRA_Angeles_Cantando_Est\xe1n.pdf","version":"Tommee Profitt - Nicole Serrano"},{"title":"Ante tu Presencia","url":"assets/pdf/LETRA_Ante_tu_presencia.pdf","version":"Ethnos"},{"title":"Aqu\xed Est\xe1","url":"assets/pdf/LETRA_Aqui_Esta_(Te Adoro a Ti).pdf","version":"Passion"},{"title":"Babel","url":"assets/pdf/LETRA_Babel.pdf","version":"Un Coraz\xf3n"},{"title":"Bendito Sea el Nombre","url":"assets/pdf/LETRA_Bendito_sea_el_nombre.pdf","version":"Est\xe1ndar"},{"title":"Cante a Ti","url":"assets/pdf/LETRA_Cante_a_Ti.pdf","version":"Est\xe1ndar"},{"title":"Canto de Adoraci\xf3n","url":"assets/pdf/LETRA_Canto_de_Adoraci\xf3n.pdf","version":"Ethnos"},{"title":"Celeste Voz","url":"assets/pdf/LETRA_Celeste_Voz.pdf","version":"Lincoln Brewster"},{"title":"Con Todo","url":"assets/pdf/LETRA_Con_Todo.pdf","version":"Hillsong"},{"title":"Conmigo Est\xe1s","url":"assets/pdf/LETRA_Conmigo_Est\xe1s.pdf","version":"GCLA"},{"title":"Diez Veces M\xe1s","url":"assets/pdf/LETRA_Diez_Veces_Mas.pdf","version":"GCLA, Rony Pav\xf3n"},{"title":"Dios el m\xe1s Grande","url":"assets/pdf/LETRA_Dios_el_m\xe1s_Grande.pdf","version":"Clase Canto"},{"title":"Dios tanto Am\xf3","url":"assets/pdf/LETRA_Dios_tanto_am\xf3.pdf","version":"We The Kingdom"},{"title":"Eco","url":"assets/pdf/LETRA_ECO.pdf","version":"Tauren Wells"},{"title":"Es el Rey Legado","url":"assets/pdf/LETRA_El_es_Rey_Legado.pdf","version":"Est\xe1ndar"}]}');let p3=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(T(ni),T(Xt))}}static{this.\u0275dir=q({type:n})}}return n})(),Rr=(()=>{class n extends p3{static{this.\u0275fac=function(){let t;return function(r){return(t||(t=mt(n)))(r||n)}}()}static{this.\u0275dir=q({type:n,features:[ve]})}}return n})();const hi=new O("NgValueAccessor"),qO={provide:hi,useExisting:Ae(()=>Eh),multi:!0},$O=new O("CompositionEventMode");let Eh=(()=>{class n extends p3{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function UO(){const n=tr()?tr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(T(ni),T(Xt),T($O,8))}}static{this.\u0275dir=q({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Je("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[Re([qO]),ve]})}}return n})();const _t=new O("NgValidators"),ar=new O("NgAsyncValidators");function C3(n){return null!=n}function _3(n){return so(n)?Qe(n):n}function A3(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function E3(n,e){return e.map(t=>t(n))}function S3(n){return n.map(e=>function GO(n){return!n.validate}(e)?e:t=>e.validate(t))}function Cf(n){return null!=n?function D3(n){if(!n)return null;const e=n.filter(C3);return 0==e.length?null:function(t){return A3(E3(t,e))}}(S3(n)):null}function _f(n){return null!=n?function I3(n){if(!n)return null;const e=n.filter(C3);return 0==e.length?null:function(t){return function zO(...n){const e=f0(n),{args:t,keys:i}=s5(n),r=new Ue(s=>{const{length:a}=t;if(!a)return void s.complete();const o=new Array(a);let l=a,c=a;for(let h=0;h<a;h++){let d=!1;qt(t[h]).subscribe($e(s,u=>{d||(d=!0,c--),o[h]=u},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?a5(i,o):o),s.complete())}))}});return e?r.pipe(Zp(e)):r}(E3(t,e).map(_3)).pipe(xe(A3))}}(S3(n)):null}function T3(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Af(n){return n?Array.isArray(n)?n:[n]:[]}function Dh(n,e){return Array.isArray(n)?n.includes(e):n===e}function L3(n,e){const t=Af(e);return Af(n).forEach(r=>{Dh(t,r)||t.push(r)}),t}function O3(n,e){return Af(e).filter(t=>!Dh(n,t))}class F3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_f(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vt extends F3{get formDirective(){return null}get path(){return null}}class or extends F3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class N3{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let V3=(()=>{class n extends N3{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(T(or,2))}}static{this.\u0275dir=q({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Tc("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ve]})}}return n})();const Ho="VALID",Th="INVALID",Qs="PENDING",zo="DISABLED";function Ph(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Tf{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ho}get invalid(){return this.status===Th}get pending(){return this.status==Qs}get disabled(){return this.status===zo}get enabled(){return this.status!==zo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(L3(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(L3(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O3(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O3(e,this._rawAsyncValidators))}hasValidator(e){return Dh(this._rawValidators,e)}hasAsyncValidator(e){return Dh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qs,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zo,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ho,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ho||this.status===Qs)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zo:Ho}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qs,this._hasOwnPendingAsyncValidator=!0;const t=_3(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ke,this.statusChanges=new ke}_calculateStatus(){return this._allControlsDisabled()?zo:this.errors?Th:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qs)?Qs:this._anyControlsHaveStatus(Th)?Th:Ho}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ph(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function QO(n){return Array.isArray(n)?Cf(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function JO(n){return Array.isArray(n)?_f(n):n||null}(this._rawAsyncValidators)}}const Js=new O("CallSetDisabledState",{providedIn:"root",factory:()=>Rh}),Rh="always";function Bo(n,e,t=Rh){(function Rf(n,e){const t=function P3(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(T3(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function R3(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(T3(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Fh(e._rawValidators,r),Fh(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function nF(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&B3(n,e)})}(n,e),function rF(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function iF(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&B3(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tF(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function B3(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $3(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function W3(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const G3=class extends Tf{constructor(e=null,t,i){super(function Df(n){return(Ph(n)?n.validators:n)||null}(t),function If(n,e){return(Ph(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ph(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=W3(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$3(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$3(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){W3(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},uF={provide:or,useExisting:Ae(()=>Vf)},Y3=(()=>Promise.resolve())();let Vf=(()=>{class n extends or{constructor(t,i,r,s,a,o){super(),this._changeDetectorRef=a,this.callSetDisabledState=o,this.control=new G3,this._registered=!1,this.name="",this.update=new ke,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Ff(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Eh?t=s:function oF(n){return Object.getPrototypeOf(n.constructor)===Rr}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Of(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Bo(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Y3.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function Hs(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);Y3.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Lh(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(T(Vt,9),T(_t,10),T(ar,10),T(hi,10),T($c,8),T(Js,8))}}static{this.\u0275dir=q({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Re([uF]),ve,on]})}}return n})(),Q3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=vn({type:n})}static{this.\u0275inj=sn({})}}return n})(),NF=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=vn({type:n})}static{this.\u0275inj=sn({imports:[Q3]})}}return n})(),jF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Js,useValue:t.callSetDisabledState??Rh}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=vn({type:n})}static{this.\u0275inj=sn({imports:[NF]})}}return n})();const HF=["addListener","removeListener"],zF=["addEventListener","removeEventListener"],BF=["on","off"];function ze(n,e,t,i){if(ue(t)&&(i=t,t=void 0),i)return ze(n,e,t).pipe(Zp(i));const[r,s]=function $F(n){return ue(n.addEventListener)&&ue(n.removeEventListener)}(n)?zF.map(a=>o=>n[a](e,o,t)):function qF(n){return ue(n.addListener)&&ue(n.removeListener)}(n)?HF.map(yw(n,e)):function UF(n){return ue(n.on)&&ue(n.off)}(n)?BF.map(yw(n,e)):[];if(!r&&Id(n))return ht(a=>ze(a,e,t))(qt(n));if(!r)throw new TypeError("Invalid event target");return new Ue(a=>{const o=(...l)=>a.next(1<l.length?l:l[0]);return r(o),()=>s(o)})}function yw(n,e){return t=>i=>n[t](e,i)}class WF extends Bt{constructor(e,t){super()}schedule(e,t=0){return this}}const Vh={setInterval(n,e,...t){const{delegate:i}=Vh;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Vh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0},mw={now:()=>(mw.delegate||Date).now(),delegate:void 0};class Uo{constructor(e,t=Uo.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Uo.now=mw.now;const XF=new class ZF extends Uo{constructor(e,t=Uo.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}(class GF extends WF{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Vh.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&Vh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fl(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});function kw(n,e,t,i,r,s,a){try{var o=n[s](a),l=o.value}catch(c){return void t(c)}o.done?e(l):Promise.resolve(l).then(i,r)}function S(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function a(l){kw(s,i,r,a,o,"next",l)}function o(l){kw(s,i,r,a,o,"throw",l)}a(void 0)})}}var $o={d:(n,e)=>{for(var t in e)$o.o(e,t)&&!$o.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},Y=globalThis.pdfjsLib={};$o.d(Y,{AbortException:()=>Fr,AnnotationEditorLayer:()=>JV,AnnotationEditorParamsType:()=>G,AnnotationEditorType:()=>J,AnnotationEditorUIManager:()=>Ko,AnnotationLayer:()=>YV,AnnotationMode:()=>lr,ColorPicker:()=>Tn,DOMSVGFactory:()=>k2,DrawLayer:()=>St,FeatureTest:()=>jt,GlobalWorkerOptions:()=>Jo,ImageKind:()=>Hh,InvalidPDFException:()=>Mw,MissingPDFException:()=>Or,OPS:()=>$n,OutputScale:()=>t2,PDFDataRangeTransport:()=>nb,PDFDateString:()=>_w,PDFWorker:()=>dt,PasswordResponses:()=>eN,PermissionFlag:()=>JF,PixelsPerInch:()=>ta,RenderingCancelledException:()=>Qf,TextLayer:()=>zt,UnexpectedResponseException:()=>Uh,Util:()=>F,VerbosityLevel:()=>zh,XfaLayer:()=>ab,build:()=>IV,createValidAbsoluteUrl:()=>rN,fetchData:()=>Wh,getDocument:()=>wV,getFilenameFromUrl:()=>fN,getPdfFilenameFromUrl:()=>gN,getXfaPageViewport:()=>yN,isDataScheme:()=>Gh,isPdfFile:()=>Jf,noContextMenu:()=>Dn,normalizeUnicode:()=>dN,setLayerDimensions:()=>Nr,shadow:()=>oe,version:()=>DV});const At=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),vw=[1,0,0,1,0,0],$f=[.001,0,0,.001,0,0],lr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},J={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},G={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},JF={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Hh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},zh={ERRORS:0,WARNINGS:1,INFOS:5},$n={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},eN={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Bh=zh.WARNINGS;function nN(){return Bh}function qh(n){Bh>=zh.INFOS&&console.log(`Info: ${n}`)}function ee(n){Bh>=zh.WARNINGS&&console.log(`Warning: ${n}`)}function Te(n){throw new Error(n)}function lt(n,e){n||Te(e)}function rN(n,e=null,t=null){if(!n)return null;try{if(t&&"string"==typeof n&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=function hN(n){return decodeURIComponent(escape(n))}(n)}catch{}const i=e?new URL(n,e):new URL(n);if(function iN(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null}function oe(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const cr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class Wf extends cr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Gf extends cr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Mw extends cr{constructor(e){super(e,"InvalidPDFException")}}class Or extends cr{constructor(e){super(e,"MissingPDFException")}}class Uh extends cr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class sN extends cr{constructor(e){super(e,"FormatError")}}class Fr extends cr{constructor(e){super(e,"AbortException")}}function ww(n){("object"!=typeof n||void 0===n?.length)&&Te("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),a=n.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function ea(n){"string"!=typeof n&&Te("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=255&n.charCodeAt(i);return t}function Zf(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}class jt{static get isLittleEndian(){return oe(this,"isLittleEndian",function oN(){const n=new Uint8Array(4);return n[0]=1,1===new Uint32Array(n.buffer,0,1)[0]}())}static get isEvalSupported(){return oe(this,"isEvalSupported",function lN(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return oe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&"string"==typeof navigator?.platform?oe(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof navigator?.userAgent&&navigator.userAgent.includes("Firefox")}):oe(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return oe(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const $h=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class F{static makeHexColor(e,t,i){return`#${$h[e]}${$h[t]}${$h[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],s[0],a[0]),Math.min(i[1],r[1],s[1],a[1]),Math.max(i[0],r[0],s[0],a[0]),Math.max(i[1],r[1],s[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-(e[2]*t[0]+e[3]*t[2])*(e[0]*t[1]+e[1]*t[3])))/2,h=o-l||1;return[Math.sqrt(o+l||1),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[i,s,r,a]}static#e(e,t,i,r,s,a,o,l,c,h){if(c<=0||c>=1)return;const d=1-c,u=c*c,p=u*c,f=d*(d*(d*e+3*c*t)+3*u*i)+p*r,g=d*(d*(d*s+3*c*a)+3*u*o)+p*l;h[0]=Math.min(h[0],f),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],f),h[3]=Math.max(h[3],g)}static#t(e,t,i,r,s,a,o,l,c,h,d,u){if(Math.abs(c)<1e-12)return void(Math.abs(h)>=1e-12&&this.#e(e,t,i,r,s,a,o,l,-d/h,u));const p=h**2-4*d*c;if(p<0)return;const f=Math.sqrt(p),g=2*c;this.#e(e,t,i,r,s,a,o,l,(-h+f)/g,u),this.#e(e,t,i,r,s,a,o,l,(-h-f)/g,u)}static bezierBoundingBox(e,t,i,r,s,a,o,l,c){return c?(c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],this.#t(e,i,s,o,t,r,a,l,3*(3*(i-s)-e+o),6*(e-2*i+s),3*(i-e),c),this.#t(e,i,s,o,t,r,a,l,3*(3*(r-a)-t+l),6*(t-2*r+a),3*(r-t),c),c}}let Xf=null,bw=null;function dN(n){return Xf||(Xf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,bw=new Map([["\ufb05","\u017ft"]])),n.replaceAll(Xf,(e,t,i)=>t?t.normalize("NFKC"):bw.get(i))}const Yf="pdfjs_internal_id_",Oi="http://www.w3.org/2000/svg";class ta{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}function Wh(n){return Kf.apply(this,arguments)}function Kf(){return(Kf=S(function*(n,e="text"){if(Zo(n,document.baseURI)){const t=yield fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){switch(e){case"arraybuffer":case"blob":case"json":return void t(r.response)}return void t(r.responseText)}i(new Error(r.statusText))}},r.send(null)})})).apply(this,arguments)}class Go{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=s;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,h,d,u,p,f,g,m;switch((i%=360)<0&&(i+=360),i){case 180:c=-1,h=0,d=0,u=1;break;case 90:c=0,h=1,d=1,u=0;break;case 270:c=0,h=-1,d=-1,u=0;break;case 0:c=1,h=0,d=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,u=-u),0===c?(p=Math.abs(l-e[1])*t+r,f=Math.abs(o-e[0])*t+s,g=(e[3]-e[1])*t,m=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+r,f=Math.abs(l-e[1])*t+s,g=(e[2]-e[0])*t,m=(e[3]-e[1])*t),this.transform=[c*t,h*t,d*t,u*t,p-c*t*o-d*t*l,f-h*t*o-u*t*l],this.width=g,this.height=m}get rawDims(){const{viewBox:e}=this;return oe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new Go({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return F.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=F.applyTransform([e[0],e[1]],this.transform),i=F.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return F.applyInverseTransform([e,t],this.transform)}}class Qf extends cr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Gh(n){const e=n.length;let t=0;for(;t<e&&""===n[t].trim();)t++;return"data:"===n.substring(t,t+5).toLowerCase()}function Jf(n){return"string"==typeof n&&/\.pdf$/i.test(n)}function fN(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function gN(n,e="document.pdf"){if("string"!=typeof n)return e;if(Gh(n))return ee('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(n);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class xw{started=Object.create(null);times=[];time(e){e in this.started&&ee(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ee(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-r}ms\n`);return e.join("")}}function Zo(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return"http:"===t||"https:"===t}catch{return!1}}function Dn(n){n.preventDefault()}function Cw(n){console.log("Deprecated API usage: "+n)}class _w{static#e;static toDateObject(e){if(!e||"string"!=typeof e)return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===c?(a+=h,o+=d):"+"===c&&(a-=h,o-=d),new Date(Date.UTC(i,r,s,a,o,l))}}function yN(n,{scale:e=1,rotation:t=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new Go({viewBox:s,scale:e,rotation:t})}function e2(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ee(`Not a valid color format: "${n}"`),[0,0,0])}function Ne(n){const{a:e,b:t,c:i,d:r,e:s,f:a}=n.getTransform();return[e,t,i,r,s,a]}function Fi(n){const{a:e,b:t,c:i,d:r,e:s,f:a}=n.getTransform().invertSelf();return[e,t,i,r,s,a]}function Nr(n,e,t=!1,i=!0){if(e instanceof Go){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=n,o=jt.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,c=`var(--scale-factor) * ${s}px`,h=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=o?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;t&&e.rotation%180!=0?(a.width=d,a.height=h):(a.width=h,a.height=d)}i&&n.setAttribute("data-main-rotation",e.rotation)}class t2{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}class Xo{#e=null;#t=null;#n;#i=null;#r=null;static#s=null;constructor(e){this.#n=e,Xo.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",Dn,{signal:t}),e.addEventListener("pointerdown",Xo.#l,{signal:t});const i=this.#i=document.createElement("div");i.className="buttons",e.append(i);const r=this.#n.toolbarPosition;if(r){const{style:s}=e,a="ltr"===this.#n._uiManager.direction?1-r[0]:r[0];s.insetInlineEnd=100*a+"%",s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#h(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#o(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Dn,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown()}#d(){const{editorType:e,_uiManager:t}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",Xo.#s[e]),this.#o(i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#i.append(i)}get#a(){const e=document.createElement("div");return e.className="divider",e}addAltText(e){var t=this;return S(function*(){const i=yield e.render();t.#o(i),t.#i.prepend(i,t.#a),t.#r=e})()}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#o(t),this.#i.prepend(t,this.#a)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class kN{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Dn,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#s(),e}#r(e,t){let i=0,r=0;for(const s of e){const a=s.y+s.height;if(a<i)continue;const o=s.x+(t?s.width:0);a>i?(r=o,i=a):t?o>r&&(r=o):o<r&&(r=o)}return[t?1-r:r,i]}show(e,t,i){const[r,s]=this.#r(t,i),{style:a}=this.#t||=this.#i();e.append(this.#t),a.insetInlineEnd=100*r+"%",a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#n._signal;e.addEventListener("contextmenu",Dn,{signal:i}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#e.append(e)}}function Zh(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}class MN{#e=0;get id(){return"pdfjs_internal_editor_"+this.#e++}}class n2{#e=function uN(){if(typeof crypto<"u"&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(255*Math.random());return ww(n)}();#t=0;#n=null;static get _isSVGFittingCanvas(){const i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;return r.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',oe(this,"_isSVGFittingCanvas",r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),0===new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0])))}#i(e,t){var i=this;return S(function*(){i.#n||=new Map;let r=i.#n.get(e);if(null===r)return null;if(r?.bitmap)return r.refCounter+=1,r;try{let s;if(r||={bitmap:null,id:`image_${i.#e}_${i.#t++}`,refCounter:0,isSvg:!1},"string"==typeof t?(r.url=t,s=yield Wh(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),"image/svg+xml"===s.type){const a=n2._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((h,d)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,h()},o.onload=S(function*(){const u=r.svgUrl=o.result;l.src=(yield a)?`${u}#svgView(preserveAspectRatio(none))`:u}),l.onerror=o.onerror=d});o.readAsDataURL(s),yield c}else r.bitmap=yield createImageBitmap(s);r.refCounter=1}catch(s){console.error(s),r=null}return i.#n.set(e,r),r&&i.#n.set(r.id,r),r})()}getFromFile(e){var t=this;return S(function*(){const{lastModified:i,name:r,size:s,type:a}=e;return t.#i(`${i}_${r}_${s}_${a}`,e)})()}getFromUrl(e){var t=this;return S(function*(){return t.#i(e,e)})()}getFromBlob(e,t){var i=this;return S(function*(){const r=yield t;return i.#i(e,r)})()}getFromId(e){var t=this;return S(function*(){t.#n||=new Map;const i=t.#n.get(e);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return t.getFromFile(i.file);if(i.blobPromise){const{blobPromise:r}=i;return delete i.blobPromise,t.getFromBlob(i.id,r)}return t.getFromUrl(i.url)})()}getFromCanvas(e,t){this.#n||=new Map;let i=this.#n.get(e);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,i),this.#n.set(i.id,i),i}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,0!==t.refCounter))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class wN{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),this.#t)return;const l={cmd:e,undo:t,post:i,type:s};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(l);if(a&&this.#e[this.#i].type===s)return o&&(l.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=l);const c=this.#i+1;c===this.#n?this.#e.splice(0,1):(this.#i=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(-1===this.#i)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}class Yo{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=jt.platform;for(const[i,r,s={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#e(t));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(r.bind(e,...a,t)(),s||(t.stopPropagation(),t.preventDefault()))}}class i2{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function mN(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,e2(i))}e.remove()}(e),oe(this,"_colors",e)}convert(e){const t=e2(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((s,a)=>s===t[a]))return i2._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?F.makeHexColor(...t):e}}let Ko=(()=>{class n{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#r=null;#s=null;#l=null;#c=new wN;#h=null;#o=0;#d=new Set;#a=null;#u=null;#f=new Set;#p=!1;#g=!1;#m=!1;#y=null;#k=null;#M=null;#x=null;#w=!1;#b=null;#I=new MN;#E=!1;#C=!1;#S=null;#A=null;#T=null;#R=null;#_=J.NONE;#v=new Set;#D=null;#P=null;#N=null;#z={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#F=null;#V=null;#j=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=n.prototype,i=o=>o.#V.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&o.hasSomethingToControl(),r=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return"text"!==c&&"number"!==c}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return oe(this,"_keyboardManager",new Yo([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#V.contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:i}]]))}constructor(t,i,r,s,a,o,l,c,h,d,u){const p=this._signal=this.#e.signal;this.#V=t,this.#j=i,this.#r=r,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:p}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),s._on("setpreference",this.onSetPreference.bind(this),{signal:p}),s._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:p}),this.#ee(),this.#re(),this.#G(),this.#s=a.annotationStorage,this.#y=a.filterFactory,this.#P=o,this.#x=l||null,this.#p=c,this.#g=h,this.#m=d,this.#R=u||null,this.viewParameters={realScale:ta.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#L?.resolve(),this.#L=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#f.clear(),this.#t=null,this.#v.clear(),this.#c.destroy(),this.#r?.destroy(),this.#b?.hide(),this.#b=null,this.#k&&(clearTimeout(this.#k),this.#k=null),this.#F&&(clearTimeout(this.#F),this.#F=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#R}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#m}get hcmFilter(){return oe(this,"hcmFilter",this.#P?this.#y.addHCMFilter(this.#P.foreground,this.#P.background):"none")}get direction(){return oe(this,"direction",getComputedStyle(this.#V).direction)}get highlightColors(){return oe(this,"highlightColors",this.#x?new Map(this.#x.split(",").map(t=>t.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return oe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#T=t}editAltText(t,i=!1){this.#r?.editAltText(this,t,i)}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){"enableNewAltTextWhenAddingImage"===t&&(this.#m=i)}onPageChanging({pageNumber:t}){this.#o=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const r of this.#i.values()){const{x:s,y:a,width:o,height:l}=r.div.getBoundingClientRect();if(t>=s&&t<=s+o&&i>=a&&i<=a+l)return r}return null}disableUserSelect(t=!1){this.#j.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#f.add(t)}removeShouldRescale(t){this.#f.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ta.PDF_TO_CSS_UNITS;for(const i of this.#f)i.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#U({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#W(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const r of this.#i.values())if(r.hasTextLayer(t))return r;return null}highlightSelection(t=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o}=i,l=i.toString(),h=this.#U(i).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;i.empty();const u=this.#W(h),p=this.#_===J.NONE,f=()=>{u?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o,text:l}),p&&this.showAllEditors("highlight",!0,!0)};p?this.switchToMode(J.HIGHLIGHT,f):f()}#Q(){const t=document.getSelection();if(!t||t.isCollapsed)return;const r=this.#U(t).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(this.#b||=new kN(this),this.#b.show(r,s,"ltr"===this.direction))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#J(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#D&&(this.#b?.hide(),this.#D=null,this.#O({hasSelectedText:!1})));const{anchorNode:i}=t;if(i===this.#D)return;const s=this.#U(t).closest(".textLayer");if(s){if(this.#b?.hide(),this.#D=i,this.#O({hasSelectedText:!0}),(this.#_===J.HIGHLIGHT||this.#_===J.NONE)&&(this.#_===J.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#_===J.HIGHLIGHT?this.#W(s):null;a?.toggleDrawing();const o=new AbortController,l=this.combinedSignal(o),c=h=>{"pointerup"===h.type&&0!==h.button||(o.abort(),a?.toggleDrawing(!0),"pointerup"===h.type&&this.#$("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}else this.#D&&(this.#b?.hide(),this.#D=null,this.#O({hasSelectedText:!1}))}#$(t=""){this.#_===J.HIGHLIGHT?this.highlightSelection(t):this.#p&&this.#Q()}#ee(){document.addEventListener("selectionchange",this.#J.bind(this),{signal:this._signal})}#te(){if(this.#M)return;this.#M=new AbortController;const t=this.combinedSignal(this.#M);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ne(){this.#M?.abort(),this.#M=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#v)if(i.div.contains(t)){this.#A=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#A)return;const[t,i]=this.#A;this.#A=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#G(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ie(){this.#S?.abort(),this.#S=null}#Z(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#X(){this.#h?.abort(),this.#h=null}#re(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#G(),this.#Z()}removeEditListeners(){this.#ie(),this.#X()}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const r of this.#u)if(r.isHandlingMimeForPasting(i))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const i of t.dataTransfer.items)for(const r of this.#u)if(r.isHandlingMimeForPasting(i.type))return r.paste(i,this.currentLayer),void t.preventDefault()}copy(t){if(t.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const r of this.#v){const s=r.serialize(!0);s&&i.push(s)}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}paste(t){var i=this;return S(function*(){t.preventDefault();const{clipboardData:r}=t;for(const o of r.items)for(const l of i.#u)if(l.isHandlingMimeForPasting(o.type))return void l.paste(o,i.currentLayer);let s=r.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){return void ee(`paste: "${o.message}".`)}if(!Array.isArray(s))return;i.unselectAll();const a=i.currentLayer;try{const o=[];for(const h of s){const d=yield a.deserialize(h);if(!d)return;o.push(d)}const l=()=>{for(const h of o)i.#Y(h);i.#K(o)};i.addCommands({cmd:l,undo:()=>{for(const h of o)h.remove()},mustExec:!0})}catch(o){ee(`paste: "${o.message}".`)}})()}keydown(t){!this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!0),this.#_!==J.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#$("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#O(t){Object.entries(t).some(([r,s])=>this.#z[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#z,t)}),this.#_===J.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#B([[G.HIGHLIGHT_FREE,!0]]))}#B(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#te(),this.#Z(),this.#O({isEditing:this.#_!==J.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#X(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#B(i.defaultPropertiesToUpdate)}}getId(){return this.#I.id}get currentLayer(){return this.#i.get(this.#o)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#o}addLayer(t){this.#i.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}updateMode(t,i=null,r=!1){var s=this;return S(function*(){if(s.#_!==t&&(!s.#L||(yield s.#L.promise,s.#L))){if(s.#L=Promise.withResolvers(),s.#_=t,t===J.NONE)return s.setEditingState(!1),s.#ae(),void s.#L.resolve();s.setEditingState(!0),yield s.#se(),s.unselectAll();for(const a of s.#i.values())a.updateMode(t);if(!i)return r&&s.addNewEditorFromKeyboard(),void s.#L.resolve();for(const a of s.#n.values())a.annotationElementId===i?(s.setSelected(a),a.enterInEditMode()):a.unselect();s.#L.resolve()}})()}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,i){if(this.#u){switch(t){case G.CREATE:return void this.currentLayer.addNewEditor();case G.HIGHLIGHT_DEFAULT_COLOR:this.#T?.updateColor(i);break;case G.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#N||=new Map).set(t,i),this.showAllEditors("highlight",i)}for(const r of this.#v)r.updateParams(t,i);for(const r of this.#u)r.updateDefaultParams(t,i)}}showAllEditors(t,i,r=!1){for(const a of this.#n.values())a.editorType===t&&a.show(i);(this.#N?.get(G.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#B([[G.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#C!==t){this.#C=t;for(const i of this.#i.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}#se(){var t=this;return S(function*(){if(!t.#E){t.#E=!0;const i=[];for(const r of t.#i.values())i.push(r.enable());yield Promise.all(i);for(const r of t.#n.values())r.enable()}})()}#ae(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const i=[];for(const r of this.#n.values())r.pageIndex===t&&i.push(r);return i}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.focusMainContainer(),this.#k=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#d.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#d.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#d.has(t)}removeDeletedAnnotationElement(t){this.#d.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Y(t){const i=this.#i.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#t!==t&&(this.#t=t,t&&this.#B(t.propertiesToUpdate))}get#oe(){let t=null;for(t of this.#v);return t}updateUI(t){this.#oe===t&&this.#B(t.propertiesToUpdate)}toggleSelected(t){if(this.#v.has(t))return this.#v.delete(t),t.unselect(),void this.#O({hasSelectedEditor:this.hasSelection});this.#v.add(t),t.select(),this.#B(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){for(const i of this.#v)i!==t&&i.unselect();this.#v.clear(),this.#v.add(t),t.select(),this.#B(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#v.has(t)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(t){t.unselect(),this.#v.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#v.size}get isEnterHandled(){return 1===this.#v.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#O({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()})}redo(){this.#c.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(t){this.#c.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}#q(){if(0===this.#n.size)return!0;if(1===this.#n.size)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#v];this.addCommands({cmd:()=>{for(const s of t)s.remove()},undo:()=>{for(const s of t)this.#Y(s)},mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#K(t){for(const i of this.#v)i.unselect();this.#v.clear();for(const i of t)i.isEmpty()||(this.#v.add(i),i.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#v)t.commit();this.#K(this.#n.values())}unselectAll(){if((!this.#t||(this.#t.commitOrRemove(),this.#_===J.NONE))&&this.hasSelection){for(const t of this.#v)t.unselect();this.#v.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=i;const[s,a]=this.#H,o=[...this.#v];this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const c of o)this.#n.has(c.id)&&c.translateInPage(s,a)},undo:()=>{for(const c of o)this.#n.has(c.id)&&c.translateInPage(-s,-a)},mustExec:!1})},1e3);for(const c of o)c.translateInPage(t,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#a=new Map;for(const t of this.#v)this.#a.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#a)return!1;this.disableUserSelect(!1);const t=this.#a;this.#a=null;let i=!1;for(const[{x:s,y:a,pageIndex:o},l]of t)l.newX=s,l.newY=a,l.newPageIndex=o,i||=s!==l.savedX||a!==l.savedY||o!==l.savedPageIndex;if(!i)return!1;const r=(s,a,o,l)=>{if(this.#n.has(s.id)){const c=this.#i.get(l);c?s._setParentAndPosition(c,a,o):(s.pageIndex=l,s.x=a,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:o,newPageIndex:l}]of t)r(s,a,o,l)},undo:()=>{for(const[s,{savedX:a,savedY:o,savedPageIndex:l}]of t)r(s,a,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#a)for(const r of this.#a.keys())r.drag(t,i)}rebuild(t){if(null===t.parent){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#v.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#t===t}getActive(){return this.#t}getMode(){return this.#_}get imageManager(){return oe(this,"imageManager",new n2)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let h=0,d=i.rangeCount;h<d;h++)if(!t.contains(i.getRangeAt(h).commonAncestorContainer))return null;const{x:r,y:s,width:a,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(h,d,u,p)=>({x:(d-s)/o,y:1-(h+u-r)/a,width:p/o,height:u/a});break;case"180":l=(h,d,u,p)=>({x:1-(h+u-r)/a,y:1-(d+p-s)/o,width:u/a,height:p/o});break;case"270":l=(h,d,u,p)=>({x:1-(d+p-s)/o,y:(h-r)/a,width:p/o,height:u/a});break;default:l=(h,d,u,p)=>({x:(h-r)/a,y:(d-s)/o,width:u/a,height:p/o})}const c=[];for(let h=0,d=i.rangeCount;h<d;h++){const u=i.getRangeAt(h);if(!u.collapsed)for(const{x:p,y:f,width:g,height:m}of u.getClientRects())0===g||0===m||c.push(l(p,f,g,m))}return 0===c.length?null:c}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#l||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const i=this.#l?.get(t.data.id);if(!i)return;const r=this.#s.getRawValue(i);r&&(this.#_===J.NONE&&!r.hasBeenModified||r.renderAnnotationElement(t))}}return n})(),Aw=(()=>{class n{#e=null;#t=!1;#n=null;#i=null;#r=null;#s=null;#l=!1;#c=null;#h=null;#o=null;#d=null;#a=!1;static#u=null;static _l10n=null;constructor(t){this.#h=t,this.#a=t._uiManager.useNewAltTextFlow,n.#u||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){n._l10n??=t}render(){var t=this;return S(function*(){const i=t.#n=document.createElement("button");i.className="altText",i.tabIndex="0";const r=t.#i=document.createElement("span");i.append(r),t.#a?(i.classList.add("new"),i.setAttribute("data-l10n-id",n.#u.missing),r.setAttribute("data-l10n-id",n.#u["missing-label"])):(i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=t.#h._uiManager._signal;i.addEventListener("contextmenu",Dn,{signal:s}),i.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t.#h._uiManager.editAltText(t.#h),t.#a&&t.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:t.#f}})};return i.addEventListener("click",a,{capture:!0,signal:s}),i.addEventListener("keydown",o=>{o.target===i&&"Enter"===o.key&&(t.#l=!0,a(o))},{signal:s}),yield t.#p(),i})()}get#f(){return(this.#e?"added":null===this.#e&&this.guessedText&&"review")||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#a?null===this.#e:!this.#e&&!this.#t}hasData(){return this.#a?null!==this.#e||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}setGuessedText(t){var i=this;return S(function*(){null===i.#e&&(i.#o=t,i.#d=yield n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),i.#p())})()}toggleAltTextBadge(t=!1){if(!this.#a||this.#e)return this.#c?.remove(),void(this.#c=null);if(!this.#c){const i=this.#c=document.createElement("div");i.className="noAltTextBadge",this.#h.div.append(i)}this.#c.classList.toggle("hidden",!t)}serialize(t){let i=this.#e;return!t&&this.#o===i&&(i=this.#d),{altText:i,decorative:this.#t,guessedText:this.#o,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:t,decorative:i,guessedText:r,textWithDisclaimer:s,cancel:a=!1}){r&&(this.#o=r,this.#d=s),(this.#e!==t||this.#t!==i)&&(a||(this.#e=t,this.#t=i),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#f}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#c?.remove(),this.#c=null}#p(){var t=this;return S(function*(){const i=t.#n;if(!i)return;if(t.#a){if(i.classList.toggle("done",!!t.#e),i.setAttribute("data-l10n-id",n.#u[t.#f]),t.#i?.setAttribute("data-l10n-id",n.#u[`${t.#f}-label`]),!t.#e)return void t.#r?.remove()}else{if(!t.#e&&!t.#t)return i.classList.remove("done"),void t.#r?.remove();i.classList.add("done"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=t.#r;if(!r){t.#r=r=document.createElement("span"),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${t.#h.id}`;const a=100,o=t.#h._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(t.#s),t.#s=null},{once:!0}),i.addEventListener("mouseenter",()=>{t.#s=setTimeout(()=>{t.#s=null,t.#r.classList.add("show"),t.#h._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),i.addEventListener("mouseleave",()=>{t.#s&&(clearTimeout(t.#s),t.#s=null),t.#r?.classList.remove("show")},{signal:o})}t.#t?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=t.#e),r.parentNode||i.append(r),t.#h.getImageForAltText()?.setAttribute("aria-describedby",r.id)})()}}return n})();class Z{#e=null;#t=null;#n=null;#i=!1;#r=!1;#s=null;#l=null;#c=null;#h="";#o=!1;#d=null;#a=!1;#u=!1;#f=!1;#p=null;#g=0;#m=0;#y=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#k=!1;#M=Z._zIndex++;static _borderLineWidth=-1;static _colorManager=new i2;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Z.prototype._resizeWithKeyboard,t=Ko.TRANSLATE_SMALL,i=Ko.TRANSLATE_BIG;return oe(this,"_resizerKeyboardManager",new Yo([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Z.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return oe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new bN({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Z._l10n??=e,Z._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),-1!==Z._borderLineWidth)return;const i=getComputedStyle(document.documentElement);Z._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#k}set _isDraggable(e){this.#k=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#M}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#N(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#o?this.#o=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[s,a]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(t+r)/a,this.fixAndSetPosition()}#x([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()}translate(e,t){this.#x(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#x(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Z,r=i/e,s=i/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:s,width:a,height:o}=this;if(a*=t,o*=i,r*=t,s*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-a,r)),s=Math.max(0,Math.min(i-o,s));break;case 90:r=Math.max(0,Math.min(t-o,r)),s=Math.min(i,Math.max(a,s));break;case 180:r=Math.min(t,Math.max(a,r)),s=Math.min(i,Math.max(o,s));break;case 270:r=Math.min(t,Math.max(o,r)),s=Math.max(0,Math.min(i-a,s))}this.x=r/=t,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c;const{style:h}=this.div;h.left=`${(100*r).toFixed(2)}%`,h.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#w(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Z.#w(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Z.#w(e,t,360-this.parentRotation)}#b(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),s=!this.#r&&t.endsWith("%");if(r&&s)return;const[a,o]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!this.#r&&!s&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#I(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");this.#s.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#E.bind(this,i),{signal:t}),r.addEventListener("contextmenu",Dn,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#s)}#E(e,t){t.preventDefault();const{isMac:i}=jt.platform;if(0!==t.button||t.ctrlKey&&i)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#S.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Dn,{signal:a});const o=this.x,l=this.y,c=this.width,h=this.height,d=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=d,this.div.style.cursor=u,this.#C(o,l,c,h)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})}#C(e,t,i,r){const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===i&&l===r||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=s,this.y=a;const[c,h]=this.parentDimensions;this.setDims(c*o,h*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[c,h]=this.parentDimensions;this.setDims(c*i,h*r),this.fixAndSetPosition()},mustExec:!0})}#S(e,t){const[i,r]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=Z.MIN_SIZE/i,h=Z.MIN_SIZE/r,d=N=>Math.round(1e4*N)/1e4,u=this.#b(this.rotation),p=(N,te)=>[u[0]*N+u[2]*te,u[1]*N+u[3]*te],f=this.#b(360-this.rotation);let m,y,k=!1,v=!1;switch(e){case"topLeft":k=!0,m=(N,te)=>[0,0],y=(N,te)=>[N,te];break;case"topMiddle":m=(N,te)=>[N/2,0],y=(N,te)=>[N/2,te];break;case"topRight":k=!0,m=(N,te)=>[N,0],y=(N,te)=>[0,te];break;case"middleRight":v=!0,m=(N,te)=>[N,te/2],y=(N,te)=>[0,te/2];break;case"bottomRight":k=!0,m=(N,te)=>[N,te],y=(N,te)=>[0,0];break;case"bottomMiddle":m=(N,te)=>[N/2,te],y=(N,te)=>[N/2,0];break;case"bottomLeft":k=!0,m=(N,te)=>[0,te],y=(N,te)=>[N,0];break;case"middleLeft":v=!0,m=(N,te)=>[0,te/2],y=(N,te)=>[N,te/2]}const M=m(o,l),w=y(o,l);let x=p(...w);const A=d(s+x[0]),E=d(a+x[1]);let b=1,C=1,[P,se]=this.screenToPageTranslation(t.movementX,t.movementY);if([P,se]=[f[0]*(N=P/i)+f[2]*(te=se/r),f[1]*N+f[3]*te],k){const N=Math.hypot(o,l);b=C=Math.max(Math.min(Math.hypot(w[0]-M[0]-P,w[1]-M[1]-se)/N,1/o,1/l),c/o,h/l)}else v?b=Math.max(c,Math.min(1,Math.abs(w[0]-M[0]-P)))/o:C=Math.max(h,Math.min(1,Math.abs(w[1]-M[1]-se)))/l;var N,te;const re=d(o*b),ae=d(l*C);x=p(...y(re,ae));const be=A-x[0],qe=E-x[1];this.width=re,this.height=ae,this.x=be,this.y=qe,this.setDims(i*re,r*ae),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}addEditToolbar(){var e=this;return S(function*(){return e._editToolbar||e.#u||(e._editToolbar=new Xo(e),e.div.append(e._editToolbar.render()),e.#n&&(yield e._editToolbar.addAltText(e.#n))),e._editToolbar})()}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){var e=this;return S(function*(){e.#n||(Aw.initialize(Z._l10n),e.#n=new Aw(e),e.#e&&(e.#n.data=e.#e,e.#e=null),yield e.addEditToolbar())})()}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){var t=this;return S(function*(){yield t.#n?.setGuessedText(e)})()}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#R();const[e,t]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Zh(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=jt.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#o=!0,this._isDraggable?this.#T(e):this.#A(e))}get isSelected(){return this._uiManager.isSelected(this)}#A(e){const{isMac:t}=jt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#T(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);t&&(this.div.classList.add("moving"),this.#g=e.clientX,this.#m=e.clientY,window.addEventListener("pointermove",o=>{const{clientX:l,clientY:c}=o,[h,d]=this.screenToPageTranslation(l-this.#g,c-this.#m);this.#g=l,this.#m=c,this._uiManager.dragSelectedEditors(h,d)},{passive:!0,capture:!0,signal:r}));const s=()=>{i.abort(),t&&this.div.classList.remove("moving"),this.#o=!1,this._uiManager.endDragSession()||this.#A(e)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})}moveInDOM(){this.#p&&clearTimeout(this.#p),this.#p=setTimeout(()=>{this.#p=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/r,h=t/r,d=this.x*s,u=this.y*a,p=this.width*s,f=this.height*a;switch(i){case 0:return[d+c+o,a-u-h-f+l,d+c+p+o,a-u-h+l];case 90:return[d+h+o,a-u+c+l,d+h+f+o,a-u+c+p+l];case 180:return[d-c-p+o,a-u+h+l,d-c+o,a-u+h+f+l];case 270:return[d-h-f+o,a-u-c-p+l,d-h+o,a-u-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,s,a]=e,o=s-i,l=a-r;switch(this.rotation){case 0:return[i,t-a,o,l];case 90:return[i,t-r,l,o];case 180:return[s,t-r,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#u=!0}disableEditMode(){this.#u=!1}isInEditMode(){return this.#u}shouldGetKeyboardEvents(){return this.#f}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#R(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#R()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Te("An editor must be serializable")}static deserialize(e,t,i){var r=this;return S(function*(){const s=new r.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,s.#e=e.accessibilityData;const[a,o]=s.pageDimensions,[l,c,h,d]=s.getRectInCurrentCoords(e.rect,o);return s.x=l/a,s.y=c/o,s.width=h/a,s.height=d/o,s})()}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#p&&(clearTimeout(this.#p),this.#p=null),this.#N(),this.removeEditToolbar(),this.#y){for(const e of this.#y.values())clearTimeout(e);this.#y=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#s.classList.remove("hidden"),Zh(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#s.children;if(!this.#t){this.#t=Array.from(t);const a=this.#_.bind(this),o=this.#v.bind(this),l=this._uiManager._signal;for(const c of this.#t){const h=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",this.#D.bind(this,h),{signal:l}),c.setAttribute("data-l10n-id",Z._l10nResizer[h])}}const i=this.#t[0];let r=0;for(const a of t){if(a===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==r){if(s<r)for(let o=0;o<r-s;o++)this.#s.append(this.#s.firstChild);else if(s>r)for(let o=0;o<s-r;o++)this.#s.firstChild.before(this.#s.lastChild);let a=0;for(const o of t){const c=this.#t[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Z._l10nResizer[c])}}this.#P(0),this.#f=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#_(e){Z._resizerKeyboardManager.exec(this,e)}#v(e){this.#f&&e.relatedTarget?.parentNode!==this.#s&&this.#N()}#D(e){this.#h=this.#f?e:""}#P(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#f&&this.#S(this.#h,{movementX:e,movementY:t})}#N(){if(this.#f=!1,this.#P(-1),this.#l){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=this.#l;this.#C(e,t,i,r),this.#l=null}}_stopResizingWithKeyboard(){this.#N(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()})}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#a}set isEditing(e){this.#a=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#r=!0;const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#y||=new Map;const{action:i}=e;let r=this.#y.get(i);return r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#y.delete(i),0===this.#y.size&&(this.#y=null)},Z._telemetryTimeout),void this.#y.set(i,r)}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===t?.nodeName&&t.classList.contains("annotationContent")&&t.remove()}}class bN extends Z{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ew=3285377520,In=4294901760,di=65535;class Sw{constructor(e){this.h1=e?4294967295&e:Ew,this.h2=e?4294967295&e:Ew}update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length),i=0;for(let g=0,m=e.length;g<m;g++){const y=e.charCodeAt(g);y<=255?t[i++]=y:(t[i++]=y>>>8,t[i++]=255&y)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),i=t.byteLength}const r=i>>2,s=i-4*r,a=new Uint32Array(t.buffer,0,r);let o=0,l=0,c=this.h1,h=this.h2;const d=3432918353,u=461845907,p=d&di,f=u&di;for(let g=0;g<r;g++)1&g?(o=a[g],o=o*d&In|o*p&di,o=o<<15|o>>>17,o=o*u&In|o*f&di,c^=o,c=c<<13|c>>>19,c=5*c+3864292196):(l=a[g],l=l*d&In|l*p&di,l=l<<15|l>>>17,l=l*u&In|l*f&di,h^=l,h=h<<13|h>>>19,h=5*h+3864292196);switch(o=0,s){case 3:o^=t[4*r+2]<<16;case 2:o^=t[4*r+1]<<8;case 1:o^=t[4*r],o=o*d&In|o*p&di,o=o<<15|o>>>17,o=o*u&In|o*f&di,1&r?c^=o:h^=o}this.h1=c,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&In|36045*e&di,t=4283543511*t&In|(2950163797*(t<<16|e>>>16)&In)>>>16,e^=t>>>1,e=444984403*e&In|60499*e&di,t=3301882366*t&In|(3120437893*(t<<16|e>>>16)&In)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const r2=Object.freeze({map:null,hash:"",transfer:void 0});class s2{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#n.get(e);return void 0===i?t:Object.assign(t,i)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),0===this.#n.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#n.values())if(t instanceof Z)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#n.get(e);let r=!1;if(void 0!==i)for(const[s,a]of Object.entries(t))i[s]!==a&&(r=!0,i[s]=a);else r=!0,this.#n.set(e,t);r&&this.#i(),t instanceof Z&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?Zf(this.#n):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new Dw(this)}get serializable(){if(0===this.#n.size)return r2;const e=new Map,t=new Sw,i=[],r=Object.create(null);let s=!1;for(const[a,o]of this.#n){const l=o instanceof Z?o.serialize(!1,r):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:r2}get editorStats(){let e=null;const t=new Map;for(const i of this.#n.values()){if(!(i instanceof Z))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||=Object.create(null);const a=e[s]||=new Map;for(const[o,l]of Object.entries(r)){if("type"===o)continue;let c=a.get(o);c||(c=new Map,a.set(o,c));const h=c.get(l)??0;c.set(l,h+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof Z)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class Dw extends s2{#e;constructor(e){super();const{map:t,hash:i,transfer:r}=e.serializable,s=structuredClone(t,r?{transfer:r}:null);this.#e={map:s,hash:i,transfer:r}}get print(){Te("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return oe(this,"modifiedIds",{ids:new Set,hash:""})}}class xN{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont({systemFontInfo:e,_inspectFont:t}){var i=this;return S(function*(){if(e&&!i.#e.has(e.loadedName)){if(lt(!i.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),i.isFontLoadingAPISupported){const{loadedName:r,src:s,style:a}=e,o=new FontFace(r,s,a);i.addNativeFontFace(o);try{yield o.load(),i.#e.add(r),t?.(e)}catch{ee(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),i.removeNativeFontFace(o)}return}Te("Not implemented: loadSystemFont without the Font Loading API.")}})()}bind(e){var t=this;return S(function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(yield t.loadSystemFont(e));if(t.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){t.addNativeFontFace(r);try{yield r.loaded}catch(s){throw ee(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const i=e.createFontFaceRule();if(i){if(t.insertRule(i),t.isSyncFontLoadingSupported)return;yield new Promise(r=>{const s=t._queueLoadingCallback(r);t._prepareFontLoadEvent(e,s)})}})()}get isFontLoadingAPISupported(){return oe(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let e=!1;return(At||typeof navigator<"u"&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),oe(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:i}=this,r={done:!1,complete:function t(){for(lt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}},callback:e};return i.push(r),r}get _loadTestFont(){return oe(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function i(M,w){return M.charCodeAt(w)<<24|M.charCodeAt(w+1)<<16|M.charCodeAt(w+2)<<8|255&M.charCodeAt(w+3)}function r(M,w,x,A){return M.substring(0,w)+A+M.substring(w+x)}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;const d=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=r(u,976,d.length,d);const g=1482184792;let m=i(u,16);for(s=0,a=d.length-3;s<a;s+=4)m=m-g+i(d,s)|0;s<d.length&&(m=m-g+i(d+"XXX",s)|0),u=r(u,16,4,function aN(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,255&n)}(m));const y=`url(data:font/opentype;base64,${btoa(u)});`;this.insertRule(`@font-face {font-family:"${d}";src:${y}}`);const v=this._document.createElement("div");v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px";for(const M of[e.loadedName,d]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=M,v.append(w)}this._document.body.append(v),function h(M,w){if(++c>30)return ee("Load test font never loaded."),void w();l.font="30px "+M,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?w():setTimeout(h.bind(null,M,w))}(d,()=>{v.remove(),t.complete()})}}class CN{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=!0===t,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${function pN(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(ww(n))}(this.data)});`;let t;if(this.cssFontInfo){let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}else t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(s){ee(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[t]=function(s,a){};const r=[];for(let s=0,a=i.length;s<a;)switch(i[s++]){case 0:{const[o,l,c,h,d,u]=i.slice(s,s+6);r.push(p=>p.bezierCurveTo(o,l,c,h,d,u)),s+=6}break;case 1:{const[o,l]=i.slice(s,s+2);r.push(c=>c.moveTo(o,l)),s+=2}break;case 2:{const[o,l]=i.slice(s,s+2);r.push(c=>c.lineTo(o,l)),s+=2}break;case 3:{const[o,l,c,h]=i.slice(s,s+4);r.push(d=>d.quadraticCurveTo(o,l,c,h)),s+=4}break;case 4:r.push(o=>o.restore());break;case 5:r.push(o=>o.save());break;case 6:lt(2===r.length,"Scale command is only valid at the third position.");break;case 7:{const[o,l,c,h,d,u]=i.slice(s,s+6);r.push(p=>p.transform(o,l,c,h,d,u)),s+=6}break;case 8:{const[o,l]=i.slice(s,s+2);r.push(c=>c.translate(o,l)),s+=2}}return this.compiledGlyphs[t]=function(a,o){r[0](a),r[1](a),a.scale(o,-o);for(let l=2,c=r.length;l<c;l++)r[l](a)}}}class Iw{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Te("Abstract method `_createCanvas` called.")}}class Tw{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch({name:e}){var t=this;return S(function*(){if(!t.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const i=t.baseUrl+e+(t.isCompressed?".bcmap":"");return t._fetch(i).then(r=>({cMapData:r,isCompressed:t.isCompressed})).catch(r=>{throw new Error(`Unable to load ${t.isCompressed?"binary ":""}CMap at: ${i}`)})})()}_fetch(e){return S(function*(){Te("Abstract method `_fetch` called.")})()}}class Pw extends Tw{_fetch(e){var t=this;return S(function*(){const i=yield Wh(e,t.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):ea(i)})()}}class Rw{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,s){return"none"}destroy(e=!1){}}class Lw{constructor({baseUrl:e=null}){this.baseUrl=e}fetch({filename:e}){var t=this;return S(function*(){if(!t.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const i=`${t.baseUrl}${e}`;return t._fetch(i).catch(r=>{throw new Error(`Unable to load font data at: ${i}`)})})()}_fetch(e){return S(function*(){Te("Abstract method `_fetch` called.")})()}}class Ow extends Lw{_fetch(e){return S(function*(){const t=yield Wh(e,"arraybuffer");return new Uint8Array(t)})()}}if(At){var a2=Promise.withResolvers(),o2=null;(function(){var e=S(function*(){const t=yield import("fs"),i=yield import("http"),r=yield import("https"),s=yield import("url");return new Map(Object.entries({fs:t,http:i,https:r,url:s,canvas:void 0,path2d:void 0}))});return function(){return e.apply(this,arguments)}})()().then(e=>{o2=e,a2.resolve()},e=>{ee(`loadPackages: ${e}`),o2=new Map,a2.resolve()})}class hr{static get promise(){return a2.promise}static get(e){return o2?.get(e)}}function Fw(n){return l2.apply(this,arguments)}function l2(){return(l2=S(function*(n){const t=yield hr.get("fs").promises.readFile(n);return new Uint8Array(t)})).apply(this,arguments)}function c2(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}class h2{getPattern(){Te("Abstract method `getPattern` called.")}}class TN extends h2{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let s;if("Stroke"===r||"Fill"===r){const a=t.current.getClippedPathBoundingBox(r,Ne(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=t.cachedCanvases.getCanvas("pattern",o,l),h=c.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=F.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),c2(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else c2(e,this._bbox),s=this._createGradient(e);return s}}function d2(n,e,t,i,r,s,a,o){const l=e.coords,c=e.colors,h=n.data,d=4*n.width;let u;l[t+1]>l[i+1]&&(u=t,t=i,i=u,u=s,s=a,a=u),l[i+1]>l[r+1]&&(u=i,i=r,r=u,u=a,a=o,o=u),l[t+1]>l[i+1]&&(u=t,t=i,i=u,u=s,s=a,a=u);const p=(l[t]+e.offsetX)*e.scaleX,f=(l[t+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,m=(l[i+1]+e.offsetY)*e.scaleY,y=(l[r]+e.offsetX)*e.scaleX,k=(l[r+1]+e.offsetY)*e.scaleY;if(f>=k)return;const v=c[s],M=c[s+1],w=c[s+2],x=c[a],A=c[a+1],E=c[a+2],b=c[o],C=c[o+1],P=c[o+2],se=Math.round(f),re=Math.round(k);let ae,be,qe,N,te,ur,qr,Pn;for(let ut=se;ut<=re;ut++){if(ut<m){const Le=ut<f?0:(f-ut)/(f-m);ae=p-(p-g)*Le,be=v-(v-x)*Le,qe=M-(M-A)*Le,N=w-(w-E)*Le}else{let Le;Le=ut>k?1:m===k?0:(m-ut)/(m-k),ae=g-(g-y)*Le,be=x-(x-b)*Le,qe=A-(A-C)*Le,N=E-(E-P)*Le}let it;it=ut<f?0:ut>k?1:(f-ut)/(f-k),te=p-(p-y)*it,ur=v-(v-b)*it,qr=M-(M-C)*it,Pn=w-(w-P)*it;const ha=Math.round(Math.min(ae,te)),pl=Math.round(Math.max(ae,te));let Rn=d*ut+4*ha;for(let Le=ha;Le<=pl;Le++)it=(ae-Le)/(ae-te),it<0?it=0:it>1&&(it=1),h[Rn++]=be-(be-ur)*it|0,h[Rn++]=qe-(qe-qr)*it|0,h[Rn++]=N-(N-Pn)*it|0,h[Rn++]=255}}function PN(n,e,t){const i=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let h=s*o;for(let d=0;d<c;d++,h++)d2(n,t,i[h],i[h+1],i[h+o],r[h],r[h+1],r[h+o]),d2(n,t,i[h+o+1],i[h+1],i[h+o],r[h+o+1],r[h+1],r[h+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)d2(n,t,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class RN extends h2{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=c/d,f=h/u,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/f},k=i.getCanvas("mesh",d+4,u+4),v=k.context,M=v.createImageData(d,u);if(t){const x=M.data;for(let A=0,E=x.length;A<E;A+=4)x[A]=t[0],x[A+1]=t[1],x[A+2]=t[2],x[A+3]=255}for(const x of this._figures)PN(M,x,g);return v.putImageData(M,2,2),{canvas:k.canvas,offsetX:o-2*p,offsetY:l-2*f,scaleX:p,scaleY:f}}getPattern(e,t,i,r){let s;if(c2(e,this._bbox),"Shading"===r)s=F.singularValueDecompose2dScale(Ne(e));else if(s=F.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=F.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}const a=this._createMeshCanvas(s,"Shading"===r?null:this._background,t.cachedCanvases);return"Shading"!==r&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class LN extends h2{getPattern(){return"hotpink"}}let FN=(()=>{class n{static MAX_PATTERN_SIZE=3e3;constructor(t,i,r,s,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=i,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t){const{bbox:i,operatorList:r,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),qh("TilingType: "+a);const d=i[0],u=i[1],p=i[2],f=i[3],g=p-d,m=f-u,y=F.singularValueDecompose2dScale(this.matrix),k=F.singularValueDecompose2dScale(this.baseTransform),v=y[0]*k[0],M=y[1]*k[1];let w=g,x=m,A=!1,E=!1;const b=Math.ceil(c*v),C=Math.ceil(h*M);b>=Math.ceil(g*v)?w=c:A=!0,C>=Math.ceil(m*M)?x=h:E=!0;const re=this.getSizeAndScale(w,this.ctx.canvas.width,v),ae=this.getSizeAndScale(x,this.ctx.canvas.height,M),be=t.cachedCanvases.getCanvas("pattern",re.size,ae.size),qe=be.context,N=l.createCanvasGraphics(qe);if(N.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(N,s,o),qe.translate(-re.scale*d,-ae.scale*u),N.transform(re.scale,0,0,ae.scale,0,0),qe.save(),this.clipBbox(N,d,u,p,f),N.baseTransform=Ne(N.ctx),N.executeOperatorList(r),N.endDrawing(),qe.restore(),A||E){const te=be.canvas;A&&(w=c),E&&(x=h);const ur=this.getSizeAndScale(w,this.ctx.canvas.width,v),qr=this.getSizeAndScale(x,this.ctx.canvas.height,M),Pn=ur.size,ut=qr.size,it=t.cachedCanvases.getCanvas("pattern-workaround",Pn,ut),ha=it.context,pl=A?Math.floor(g/c):0,Rn=E?Math.floor(m/h):0;for(let Le=0;Le<=pl;Le++)for(let Bi=0;Bi<=Rn;Bi++)ha.drawImage(te,Pn*Le,ut*Bi,Pn,ut,0,0,Pn,ut);return{canvas:it.canvas,scaleX:ur.scale,scaleY:qr.scale,offsetX:d,offsetY:u}}return{canvas:be.canvas,scaleX:re.scale,scaleY:ae.scale,offsetX:d,offsetY:u}}getSizeAndScale(t,i,r){const s=Math.max(n.MAX_PATTERN_SIZE,i);let a=Math.ceil(t*r);return a>=s?a=s:r=a/t,{scale:r,size:a}}clipBbox(t,i,r,s,a){t.ctx.rect(i,r,s-i,a-r),t.current.updateRectMinMax(Ne(t.ctx),[i,r,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,r){const s=t.ctx,a=t.current;switch(i){case 1:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,a.fillColor=o.fillStyle,a.strokeColor=o.strokeStyle;break;case 2:const l=F.makeHexColor(r[0],r[1],r[2]);s.fillStyle=l,s.strokeStyle=l,a.fillColor=l,a.strokeColor=l;break;default:throw new sN(`Unsupported paint type: ${i}`)}}getPattern(t,i,r,s){let a=r;"Shading"!==s&&(a=F.transform(a,i.baseTransform),this.matrix&&(a=F.transform(a,this.matrix)));const o=this.createPatternCanvas(i);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}}return n})();function Vw({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=jt.isLittleEndian?4278190080:255,[l,c]=a?[s,o]:[o,s],h=i>>3,d=7&i,u=n.length;t=new Uint32Array(t.buffer);let p=0;for(let f=0;f<r;f++){for(const m=e+h;e<m;e++){const y=e<u?n[e]:255;t[p++]=128&y?c:l,t[p++]=64&y?c:l,t[p++]=32&y?c:l,t[p++]=16&y?c:l,t[p++]=8&y?c:l,t[p++]=4&y?c:l,t[p++]=2&y?c:l,t[p++]=1&y?c:l}if(0===d)continue;const g=e<u?n[e++]:255;for(let m=0;m<d;m++)t[p++]=g&1<<7-m?c:l}return{srcPos:e,destPos:p}}class HN{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache)this.canvasFactory.destroy(this.cache[e]),delete this.cache[e]}}function Xh(n,e,t,i,r,s,a,o,l,c){const[h,d,u,p,f,g]=Ne(n);if(0===d&&0===u){const v=Math.round(a*h+f),w=Math.round(o*p+g),A=Math.abs(Math.round((a+l)*h+f)-v)||1,b=Math.abs(Math.round((o+c)*p+g)-w)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),v,w),n.drawImage(e,t,i,r,s,0,0,A,b),n.setTransform(h,d,u,p,f,g),[A,b]}if(0===h&&0===p){const v=Math.round(o*u+f),w=Math.round(a*d+g),A=Math.abs(Math.round((o+c)*u+f)-v)||1,b=Math.abs(Math.round((a+l)*d+g)-w)||1;return n.setTransform(0,Math.sign(d),Math.sign(u),0,v,w),n.drawImage(e,t,i,r,s,0,0,b,A),n.setTransform(h,d,u,p,f,g),[b,A]}return n.drawImage(e,t,i,r,s,a,o,l,c),[Math.hypot(h,d)*l,Math.hypot(u,p)*c]}class qw{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=vw,this.textMatrixScale=1,this.fontMatrix=$f,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=F.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=F.applyTransform(t,e),r=F.applyTransform(t.slice(2),e),s=F.applyTransform([t[0],t[3]],e),a=F.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],s[0],a[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],a[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],a[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],a[1])}updateScalingPathMinMax(e,t){F.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,s,a,o,l,c,h){const d=F.bezierBoundingBox(t,i,r,s,a,o,l,c,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e="Fill",t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if("Stroke"===e){t||Te("Stroke bounding box must include transform.");const r=F.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=a,i[2]+=s,i[3]+=a}return i}updateClipFromPath(){const e=F.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e="Fill",t=null){return F.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Uw(n,e){if(typeof ImageData<"u"&&e instanceof ImageData)return void n.putImageData(e,0,0);const t=e.height,i=e.width,r=t%16,s=(t-r)/16,a=0===r?s:s+1,o=n.createImageData(i,16);let c,l=0;const h=e.data,d=o.data;let u,p,f,g;if(e.kind===Hh.GRAYSCALE_1BPP){const m=h.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),k=y.length,v=i+7>>3,M=4294967295,w=jt.isLittleEndian?4278190080:255;for(u=0;u<a;u++){for(f=u<s?16:r,c=0,p=0;p<f;p++){const x=m-l;let A=0;const E=x>v?i:8*x-7,b=-8&E;let C=0,P=0;for(;A<b;A+=8)P=h[l++],y[c++]=128&P?M:w,y[c++]=64&P?M:w,y[c++]=32&P?M:w,y[c++]=16&P?M:w,y[c++]=8&P?M:w,y[c++]=4&P?M:w,y[c++]=2&P?M:w,y[c++]=1&P?M:w;for(;A<E;A++)0===C&&(P=h[l++],C=128),y[c++]=P&C?M:w,C>>=1}for(;c<k;)y[c++]=0;n.putImageData(o,0,16*u)}}else if(e.kind===Hh.RGBA_32BPP){for(p=0,g=16*i*4,u=0;u<s;u++)d.set(h.subarray(l,l+g)),l+=g,n.putImageData(o,0,p),p+=16;u<a&&(g=i*r*4,d.set(h.subarray(l,l+g)),n.putImageData(o,0,p))}else{if(e.kind!==Hh.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(f=16,g=i*f,u=0;u<a;u++){for(u>=s&&(f=r,g=i*f),c=0,p=g;p--;)d[c++]=h[l++],d[c++]=h[l++],d[c++]=h[l++],d[c++]=255;n.putImageData(o,0,16*u)}}}function $w(n,e){if(e.bitmap)return void n.drawImage(e.bitmap,0,0);const t=e.height,i=e.width,r=t%16,s=(t-r)/16,a=0===r?s:s+1,o=n.createImageData(i,16);let l=0;const c=e.data,h=o.data;for(let d=0;d<a;d++){const u=d<s?16:r;({srcPos:l}=Vw({src:c,srcPos:l,dest:h,width:i,height:u,nonBlackColor:0})),n.putImageData(o,0,16*d)}}function Qo(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)void 0!==n[i]&&(e[i]=n[i]);void 0!==n.setLineDash&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Yh(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",void 0!==n.setLineDash&&(n.setLineDash([]),n.lineDashOffset=0),!At){const{filter:e}=n;"none"!==e&&""!==e&&(n.filter="none")}}function Ww(n,e){if(e)return!0;const t=F.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*ta.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const BN=["butt","round","square"],qN=["miter","round","bevel"],UN={},Gw={};class na{constructor(e,t,i,r,s,{optionalContentConfig:a,markedContentStack:o=null},l,c){this.ctx=e,this.current=new qw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new HN(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ne(this.compositeCtx))}this.ctx.save(),Yh(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ne(this.ctx)}executeOperatorList(e,t,i,r){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"==typeof i,h=c?Date.now()+15:0;let d=0;const u=this.commonObjs,p=this.objs;let f;for(;;){if(void 0!==r&&o===r.nextBreakPoint)return r.breakIt(o,i),o;if(f=a[o],f!==$n.dependency)this[f].apply(this,s[o]);else for(const g of s[o]){const m=g.startsWith("g_")?u:p;if(!m.has(g))return m.get(g,i),o}if(o++,o===l)return o;if(c&&++d>10){if(Date.now()>h)return i(),o;d=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let h,d,s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,l=r,c="prescale1";for(;s>2&&o>1||a>2&&l>1;){let u=o,p=l;s>2&&o>1&&(u=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/u),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),h=this.cachedCanvases.getCanvas(c,u,p),d=h.context,d.clearRect(0,0,u,p),d.drawImage(e,0,0,o,l,0,0,u,p),e=h.canvas,o=u,l=p,c="prescale1"===c?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,s=this.current.fillColor,a=this.current.patternFill,o=Ne(t);let l,c,h,d;if((e.bitmap||e.data)&&e.count>1){const E=e.bitmap||e.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(E),l||(l=new Map,this._cachedBitmapsMap.set(E,l));const b=l.get(c);if(b&&!a)return{canvas:b,offsetX:Math.round(Math.min(o[0],o[2])+o[4]),offsetY:Math.round(Math.min(o[1],o[3])+o[5])};h=b}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,r),$w(d.context,e));let u=F.transform(o,[1/i,0,0,-1/r,0,0]);u=F.transform(u,[1,0,0,1,0,-r]);const[p,f,g,m]=F.getAxialAlignedBoundingBox([0,0,i,r],u),y=Math.round(g-p)||1,k=Math.round(m-f)||1,v=this.cachedCanvases.getCanvas("fillCanvas",y,k),M=v.context,w=p,x=f;M.translate(-w,-x),M.transform(...u),h||(h=this._scaleImage(d.canvas,Fi(M)),h=h.img,l&&a&&l.set(c,h)),M.imageSmoothingEnabled=Ww(Ne(M),e.interpolate),Xh(M,h,0,0,h.width,h.height,0,0,i,r),M.globalCompositeOperation="source-in";const A=F.transform(Fi(M),[1,0,0,1,-w,-x]);return M.fillStyle=a?s.getPattern(t,this,A,"Fill"):s,M.fillRect(0,0,i,r),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,v.canvas)),{canvas:v.canvas,offsetX:Math.round(w),offsetY:Math.round(x)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=BN[e]}setLineJoin(e){this.ctx.lineJoin=qN[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...Ne(this.suspendedCtx)),Qo(this.suspendedCtx,s),function jN(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,s,a,o,l){e.transform(i,r,s,a,o,l),this.__originalTransform(i,r,s,a,o,l)},n.setTransform=function(i,r,s,a,o,l){e.setTransform(i,r,s,a,o,l),this.__originalSetTransform(i,r,s,a,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,s,a,o){e.bezierCurveTo(t,i,r,s,a,o),this.__originalBezierCurveTo(t,i,r,s,a,o)},n.rect=function(t,i,r,s){e.rect(t,i,r,s),this.__originalRect(t,i,r,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Qo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){this.current.activeSMask&&(e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],this.composeSMask(this.suspendedCtx,this.current.activeSMask,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}composeSMask(e,t,i,r){const s=r[0],a=r[1],o=r[2]-s,l=r[3]-a;0===o||0===l||(this.genericComposeSMask(t.context,i,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,s,a,o,l,c,h,d){let u=e.canvas,p=l-h,f=c-d;if(a){const m=F.makeHexColor(...a);if(p<0||f<0||p+i>u.width||f+r>u.height){const y=this.cachedCanvases.getCanvas("maskExtension",i,r),k=y.context;k.drawImage(u,-p,-f),k.globalCompositeOperation="destination-atop",k.fillStyle=m,k.fillRect(0,0,i,r),k.globalCompositeOperation="source-over",u=y.canvas,p=f=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(p,f,i,r),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=m,e.fillRect(p,f,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&o?t.filter=this.filterFactory.addAlphaFilter(o):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,c,i,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(u,p,f,i,r,l,c,i,r),t.restore()}save(){this.inSMaskMode?(Qo(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Qo(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,s,a){this.ctx.transform(e,t,i,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,s=this.current;let l,c,a=s.x,o=s.y;const h=Ne(r),d=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],u=d?i.slice(0):null;for(let p=0,f=0,g=e.length;p<g;p++)switch(0|e[p]){case $n.rectangle:a=t[f++],o=t[f++];const m=t[f++],y=t[f++],k=a+m,v=o+y;r.moveTo(a,o),0===m||0===y?r.lineTo(k,v):(r.lineTo(k,o),r.lineTo(k,v),r.lineTo(a,v)),d||s.updateRectMinMax(h,[a,o,k,v]),r.closePath();break;case $n.moveTo:a=t[f++],o=t[f++],r.moveTo(a,o),d||s.updatePathMinMax(h,a,o);break;case $n.lineTo:a=t[f++],o=t[f++],r.lineTo(a,o),d||s.updatePathMinMax(h,a,o);break;case $n.curveTo:l=a,c=o,a=t[f+4],o=t[f+5],r.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],a,o),s.updateCurvePathMinMax(h,l,c,t[f],t[f+1],t[f+2],t[f+3],a,o,u),f+=6;break;case $n.curveTo2:l=a,c=o,r.bezierCurveTo(a,o,t[f],t[f+1],t[f+2],t[f+3]),s.updateCurvePathMinMax(h,l,c,a,o,t[f],t[f+1],t[f+2],t[f+3],u),a=t[f+2],o=t[f+3],f+=4;break;case $n.curveTo3:l=a,c=o,a=t[f+2],o=t[f+3],r.bezierCurveTo(t[f],t[f+1],a,o,a,o),s.updateCurvePathMinMax(h,l,c,t[f],t[f+1],a,o,a,o,u),f+=4;break;case $n.closePath:r.closePath()}d&&s.updateScalingPathMinMax(h,u),s.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(t.save(),t.strokeStyle=i.getPattern(t,this,Fi(t),"Stroke"),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor;let s=!1;this.current.patternFill&&(t.save(),t.fillStyle=i.getPattern(t,this,Fi(t),"Fill"),s=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=UN}eoClip(){this.pendingClip=Gw}beginText(){this.current.textMatrix=vw,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||$f,(0===r.fontMatrix[0]||0===r.fontMatrix[3])&&ee("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,s,a){this.current.textMatrix=[e,t,i,r,s,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const s=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,h=3&l,d=!!(4&l),u=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||d||u)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||u?(s.save(),s.translate(t,i),s.beginPath(),p(s,c),r&&s.setTransform(...r),(0===h||2===h)&&s.fill(),(1===h||2===h)&&s.stroke(),s.restore()):((0===h||2===h)&&s.fillText(e,t,i),(1===h||2===h)&&s.strokeText(e,t,i)),d&&(this.pendingTextPaths||=[]).push({transform:Ne(s),x:t,y:i,fontSize:c,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return oe(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(0===r)return;const s=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,h=t.textHScale*c,d=e.length,u=i.vertical,p=u?1:-1,f=i.defaultVMetrics,g=r*t.fontMatrix[0],m=0===t.textRenderingMode&&!i.disableFontFace&&!t.patternFill;let y;if(s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),s.scale(h,c>0?-1:1),t.patternFill){s.save();const x=t.fillColor.getPattern(s,this,Fi(s),"Fill");y=Ne(s),s.restore(),s.fillStyle=x}let k=t.lineWidth;const v=t.textMatrixScale;if(0===v||0===k){const x=3&t.textRenderingMode;(1===x||2===x)&&(k=this.getSinglePixelWidth())}else k/=v;if(1!==a&&(s.scale(a,a),k/=a),s.lineWidth=k,i.isInvalidPDFjsFont){const x=[];let A=0;for(const E of e)x.push(E.unicode),A+=E.width;return s.fillText(x.join(""),0,0),t.x+=A*g*h,s.restore(),void this.compose()}let w,M=0;for(w=0;w<d;++w){const x=e[w];if("number"==typeof x){M+=p*x*r/1e3;continue}let A=!1;const E=(x.isSpace?l:0)+o,b=x.fontChar,C=x.accent;let P,se,re=x.width;if(u){const be=x.vmetric||f,qe=-(x.vmetric?be[1]:.5*re)*g;re=be?-be[0]:re,P=qe/a,se=(M+be[2]*g)/a}else P=M/a,se=0;if(i.remeasure&&re>0){const be=1e3*s.measureText(b).width/r*a;if(re<be&&this.isFontSubpixelAAEnabled){const qe=re/be;A=!0,s.save(),s.scale(qe,1),P/=qe}else re!==be&&(P+=(re-be)/2e3*r/a)}this.contentVisible&&(x.isInFont||i.missingFile)&&(m&&!C?s.fillText(b,P,se):(this.paintChar(b,P,se,y),C&&this.paintChar(C.fontChar,P+r*C.offset.x/a,se-r*C.offset.y/a,y))),M+=u?re*g-E*c:re*g+E*c,A&&s.restore()}u?t.y-=M:t.x+=M*h,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,s=i.fontSize,a=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,h=i.textHScale*a,d=i.fontMatrix||$f,u=e.length;let f,g,m,y;if(3!==i.textRenderingMode&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(h,a),f=0;f<u;++f){if(g=e[f],"number"==typeof g){y=o*g*s/1e3,this.ctx.translate(y,0),i.x+=y*h;continue}const k=(g.isSpace?c:0)+l,v=r.charProcOperatorList[g.operatorListId];v?(this.contentVisible&&(this.processingType3=g,this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(v),this.restore()),m=F.applyTransform([g.width,0],d)[0]*s+k,t.translate(m,0),i.x+=m*h):ee(`Type3 character "${g.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,s,a){this.ctx.rect(i,r,s-i,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const i=e[1],r=this.baseTransform||Ne(this.ctx);t=new FN(e,i,this.ctx,{createCanvasGraphics:a=>new na(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=F.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=F.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=function ON(n){switch(n[0]){case"RadialAxial":return new TN(n);case"Mesh":return new RN(n);case"Dummy":return new LN}throw new Error(`Unknown IR type: ${n[0]}`)}(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,Fi(t),"Shading");const r=Fi(t);if(r){const{width:s,height:a}=t.canvas,[o,l,c,h]=F.getAxialAlignedBoundingBox([0,0,s,a],r);this.ctx.fillRect(o,l,c-o,h-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Te("Should not call beginInlineImage")}beginImageData(){Te("Should not call beginImageData")}paintFormXObjectBegin(e,t){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ne(this.ctx),t)&&(this.ctx.rect(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.current.updateRectMinMax(Ne(this.ctx),t),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||qh("TODO: Support non-isolated groups."),e.knockout&&ee("Knockout groups not supported.");const i=Ne(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=F.getAxialAlignedBoundingBox(e.bbox,Ne(t));r=F.intersect(r,[0,0,t.canvas.width,t.canvas.height])||[0,0,0,0];const a=Math.floor(r[0]),o=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-a,1),c=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,l,c),u=d.context;u.translate(-a,-o),u.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:u,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Qo(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Ne(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=F.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,r,s){if(this.#e(),Yh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=t[0],i[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=a,t[3]=o;const[l,c]=F.singularValueDecompose2dScale(Ne(this.ctx)),{viewportScale:h}=this,d=Math.ceil(a*this.outputScaleX*h),u=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,u);const{canvas:p,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),Yh(this.ctx)}else Yh(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new qw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const i=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function zN(n){const{width:e,height:t}=n;if(e>1e3||t>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o,l,c,a=new Uint8Array(s*(t+1));const h=e+7&-8;let d=new Uint8Array(h*t),u=0;for(const y of n.data){let k=128;for(;k>0;)d[u++]=y&k?0:255,k>>=1}let p=0;for(u=0,0!==d[u]&&(a[0]=1,++p),l=1;l<e;l++)d[u]!==d[u+1]&&(a[l]=d[u]?2:1,++p),u++;for(0!==d[u]&&(a[l]=2,++p),o=1;o<t;o++){u=o*h,c=o*s,d[u-h]!==d[u]&&(a[c]=d[u]?1:8,++p);let y=(d[u]?4:0)+(d[u-h]?8:0);for(l=1;l<e;l++)y=(y>>2)+(d[u+1]?4:0)+(d[u-h+1]?8:0),r[y]&&(a[c+l]=r[y],++p),u++;if(d[u-h]!==d[u]&&(a[c+l]=d[u]?2:4,++p),p>1e3)return null}for(u=h*(t-1),c=o*s,0!==d[u]&&(a[c]=8,++p),l=1;l<e;l++)d[u]!==d[u+1]&&(a[c+l]=d[u]?4:8,++p),u++;if(0!==d[u]&&(a[c+l]=4,++p),p>1e3)return null;const f=new Int32Array([0,s,-1,0,-s,0,0,0,1]),g=new Path2D;for(o=0;p&&o<=t;o++){let y=o*s;const k=y+e;for(;y<k&&!a[y];)y++;if(y===k)continue;g.moveTo(y%s,o);const v=y;let M=a[y];do{const w=f[M];do{y+=w}while(!a[y]);const x=a[y];5!==x&&10!==x?(M=x,a[y]=0):(M=x&51*M>>4,a[y]&=M>>2|M<<2),g.lineTo(y%s,y/s|0),a[y]||--p}while(v!==y);--o}return d=null,a=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(g),y.beginPath(),y.restore()}}(e)),r.compiled))return void r.compiled(i);const s=this._createMaskCanvas(e),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=Ne(o);o.transform(t,i,r,s,0,0);const c=this._createMaskCanvas(e);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let h=0,d=a.length;h<d;h+=2){const u=F.transform(l,[t,i,r,s,a[h],a[h+1]]),[p,f]=F.applyTransform([0,0],u);o.drawImage(c.canvas,p,f)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:a,width:o,height:l,transform:c}=s,h=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=h.context;d.save(),$w(d,this.getObject(a,s)),d.globalCompositeOperation="source-in",d.fillStyle=r?i.getPattern(d,this,Fi(t),"Fill"):i,d.fillRect(0,0,o,l),d.restore(),t.save(),t.transform(...c),t.scale(1,-1),Xh(t,h.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):ee("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s)return void ee("Dependent image isn't ready yet");const a=s.width,o=s.height,l=[];for(let c=0,h=r.length;c<h;c+=2)l.push({transform:[t,0,0,i,r[c],r[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!At){const{filter:o}=r;"none"!==o&&""!==o&&(r.filter="none")}let s;if(r.scale(1/t,-1/i),e.bitmap)s=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Uw(l,e),s=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(s,Fi(r));r.imageSmoothingEnabled=Ww(Ne(r),e.interpolate),Xh(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const l=this.cachedCanvases.getCanvas("inlineImage",e.width,e.height).context;Uw(l,e),r=this.applyTransferMapsToCanvas(l)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),Xh(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){this.markedContentStack.push("OC"===e?{visible:this.optionalContentConfig.isVisible(t)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===Gw?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ne(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:s}=this.ctx.getTransform();let a,o;if(0===i&&0===r){const l=Math.abs(t),c=Math.abs(s);if(l===c)if(0===e)a=o=1/l;else{const h=l*e;a=o=h<1?1/h:1}else if(0===e)a=1/l,o=1/c;else{const h=l*e,d=c*e;a=h<1?1/h:1,o=d<1?1/d:1}}else{const l=Math.abs(t*s-i*r),c=Math.hypot(t,i),h=Math.hypot(r,s);if(0===e)a=h/l,o=c/l;else{const d=e*l;a=h>d?h/d:1,o=c>d?c/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=i||1,1===r&&1===s)return void t.stroke();const a=t.getLineDash();if(e&&t.save(),t.scale(r,s),a.length>0){const o=Math.max(r,s);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in $n)void 0!==na.prototype[n]&&(na.prototype[$n[n]]=na.prototype[n]);class Jo{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");this.#t=e}}function fn(n){switch(n instanceof Error||"object"==typeof n&&null!==n||Te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Fr(n.message);case"MissingPDFException":return new Or(n.message);case"PasswordException":return new Wf(n.message,n.code);case"UnexpectedResponseException":return new Uh(n.message,n.status);case"UnknownErrorException":return new Gf(n.message,n.details);default:return new Gf(n.message,n.toString())}}class el{#e=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#i(e);if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],1===e.callback)r.resolve(e.data);else{if(2!==e.callback)throw new Error("Unexpected callback case");r.reject(fn(e.reason))}return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){s.postMessage({sourceName:i,targetName:r,callback:1,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:r,callback:2,callbackId:e.callbackId,reason:fn(a)})})}else e.streamId?this.#n(e):t(e.data)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:c.desiredSize},r),h.promise},pull:c=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,l.postMessage({sourceName:a,targetName:o,stream:6,streamId:s,desiredSize:c.desiredSize}),h.promise},cancel:c=>{lt(c instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:1,streamId:s,reason:fn(c)}),h.promise}},i)}#n(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(c,h=1,d){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=h,u>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:4,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:3,streamId:t}),delete a.streamSinks[t])},error(c){lt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:5,streamId:t,reason:fn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(o(e.data,l))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:8,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:r,stream:8,streamId:t,reason:fn(c)})})}#i(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case 8:e.success?a.startCall.resolve():a.startCall.reject(fn(e.reason));break;case 7:e.success?a.pullCall.resolve():a.pullCall.reject(fn(e.reason));break;case 6:if(!o){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(l){l(o.onPull?.())}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,reason:fn(l)})});break;case 4:if(lt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case 3:if(lt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#r(a,t);break;case 5:lt(a,"error should have stream controller"),a.controller.error(fn(e.reason)),this.#r(a,t);break;case 2:e.success?a.cancelCall.resolve():a.cancelCall.reject(fn(e.reason)),this.#r(a,t);break;case 1:if(!o)break;new Promise(function(l){l(o.onCancel?.(fn(e.reason)))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:2,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:2,streamId:t,reason:fn(l)})}),o.sinkCapability.reject(fn(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#r(e,t){var i=this;return S(function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete i.streamControllers[t]})()}destroy(){this.#e?.abort(),this.#e=null}}class $N{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return Zf(this.#e)}has(e){return this.#e.has(e)}}const ia=Symbol("INTERNAL");class WN{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:i,usage:r,rbGroups:s}){this.#e=!!(2&e),this.#t=!!(4&e),this.name=t,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?"OFF"!==t?.viewState:!this.#t||"OFF"!==e?.printState}_setVisible(e,t,i=!1){e!==ia&&Te("Internal method `_setVisible` called."),this.#n=i,this.#i=t}}class GN{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=2){if(this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const i of e.groups)this.#t.set(i.id,new WN(t,i));if("OFF"===e.baseState)for(const i of this.#t.values())i._setVisible(ia,!1);for(const i of e.on)this.#t.get(i)._setVisible(ia,!0);for(const i of e.off)this.#t.get(i)._setVisible(ia,!1);this.#n=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const s=e[r];let a;if(Array.isArray(s))a=this.#r(s);else{if(!this.#t.has(s))return ee(`Optional content group not found: ${s}`),!0;a=this.#t.get(s).visible}switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return"And"===i}isVisible(e){if(0===this.#t.size)return!0;if(!e)return qh("Optional content group not defined."),!0;if("OCG"===e.type)return this.#t.has(e.id)?this.#t.get(e.id).visible:(ee(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#r(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return ee(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return ee(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return ee(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return ee(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return ee(`Unknown optional content policy ${e.policy}.`),!0}return ee(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){const r=this.#t.get(e);if(r){if(i&&t&&r.rbGroups.length)for(const s of r.rbGroups)for(const a of s)a!==e&&this.#t.get(a)?._setVisible(ia,!1,!0);r._setVisible(ia,!!t,!0),this.#e=null}else ee(`Optional content group not found: ${e}`)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=this.#t.get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t)}}this.#e=null}get hasInitialVisibility(){return null===this.#n||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?Zf(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(null!==this.#e)return this.#e;const e=new Sw;for(const[t,i]of this.#t)e.update(`${t}:${i.visible}`);return this.#e=e.hexdigest()}}class ZN{constructor(e,{disableRange:t=!1,disableStream:i=!1}){lt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,s?.length>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):lt(this._rangeReaders.some(function(s){return s._begin===e&&(s._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new XN(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new YN(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class XN{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=Jf(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var e=this;return S(function*(){if(e._queuedChunks.length>0)return{value:e._queuedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class YN{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var e=this;return S(function*(){if(e._queuedChunk){const i=e._queuedChunk;return e._queuedChunk=null,{value:i,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function u2(n,e){const t=new Headers;if(!n||!e||"object"!=typeof e)return t;for(const i in e){const r=e[i];void 0!==r&&t.append(i,r)}return t}function p2({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||i||!e||"bytes"!==n.get("Accept-Ranges")||"identity"!==(n.get("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function f2(n){const e=n.get("Content-Disposition");if(e){let t=function KN(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=l(h),h=c(h),s(h)}if(t=function a(h){const d=[];let u;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(u=p.exec(h));){let[,g,m,y]=u;if(g=parseInt(g,10),g in d){if(0===g)break}else d[g]=[m,y]}const f=[];for(let g=0;g<d.length&&g in d;++g){let[m,y]=d[g];y=o(y),m&&(y=unescape(y),0===g&&(y=l(y))),f.push(y)}return f.join("")}(n),t)return s(c(t));if(t=i("filename","i").exec(n),t){t=t[1];let h=o(t);return h=c(h),s(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const u=new TextDecoder(h,{fatal:!0}),p=ea(d);d=u.decode(p),e=!1}catch{}}return d}function s(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function o(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let u=0;u<d.length;++u){const p=d[u].indexOf('"');-1!==p&&(d[u]=d[u].slice(0,p),d.length=u+1),d[u]=d[u].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");return-1===d?h:r(h.slice(0,d),h.slice(d+1).replace(/^[^']*'/,""))}function c(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,u,p,f){if("q"===p||"Q"===p)return r(u,f=(f=f.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(g,m){return String.fromCharCode(parseInt(m,16))}));try{f=atob(f)}catch{}return r(u,f)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Jf(t))return t}return null}function Qh(n,e){return 404===n||0===n&&e.startsWith("file:")?new Or('Missing PDF "'+e+'".'):new Uh(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function Zw(n){return 200===n||206===n}function Xw(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Yw(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ee(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Kw{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=u2(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new QN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new JN(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class QN{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,Xw(i,this._withCredentials,this._abortController)).then(s=>{if(!Zw(s.status))throw Qh(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=p2({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=f2(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return S(function*(){yield e._headersCapability.promise;const{value:t,done:i}=yield e._reader.read();return i?{value:t,done:i}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:Yw(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class JN{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${i-1}`);const a=r.url;fetch(a,Xw(s,this._withCredentials,this._abortController)).then(o=>{if(!Zw(o.status))throw Qh(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return S(function*(){yield e._readCapability.promise;const{value:t,done:i}=yield e._reader.read();return i?{value:t,done:i}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded}),{value:Yw(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class tV{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=u2(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const s in i)r[s]=i[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){const i=this.pendingRequests[e];i&&i.onProgress?.(t)}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==r.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void i.onError?.(r.status);const s=r.status||200;if((200!==s||206!==i.expectedStatus)&&s!==i.expectedStatus)return void i.onError?.(r.status);const o=function eV(n){const e=n.response;return"string"!=typeof e?e:ea(e).buffer}(r);if(206===s){const l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(c[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class nV{constructor(e){this._source=e,this._manager=new tV(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new iV(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new rV(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class iV{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...l]=a.split(": ");return[o,l.join(": ")]})),{allowRangeRequests:r,suggestedLength:s}=p2({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=f2(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Qh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){var e=this;return S(function*(){if(e._storedError)throw e._storedError;if(e._cachedChunks.length>0)return{value:e._cachedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class rV{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Qh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){var e=this;return S(function*(){if(e._storedError)throw e._storedError;if(null!==e._queuedChunk){const i=e._queuedChunk;return e._queuedChunk=null,{value:i,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const sV=/^[a-z][a-z0-9\-+.]+:/i;function Qw(n,e,t){return"http:"===n.protocol?hr.get("http").request(n,{headers:e},t):hr.get("https").request(n,{headers:e},t)}class oV{constructor(e){this.source=e,this.url=function aV(n){if(sV.test(n))return new URL(n);const e=hr.get("url");return new URL(e.pathToFileURL(n))}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.headers=u2(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new hV(this):new lV(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new dV(this,e,t):new cV(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Jw{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return S(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Fr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class eb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!e.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return S(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class lV extends Jw{constructor(e){super(e);const t=Object.fromEntries(e.headers);this._request=Qw(this._url,t,r=>{if(404===r.statusCode){const l=new Or(`Missing PDF "${this._url}".`);return this._storedError=l,void this._headersCapability.reject(l)}this._headersCapability.resolve(),this._setReadableStream(r);const s=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=p2({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=f2(s)}),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class cV extends eb{constructor(e,t,i){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${i-1}`,this._request=Qw(this._url,r,a=>{if(404!==a.statusCode)this._setReadableStream(a);else{const o=new Or(`Missing PDF "${this._url}".`);this._storedError=o}}),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class hV extends Jw{constructor(e){super(e);const t=hr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{"ENOENT"===i.code&&(i=new Or(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class dV extends eb{constructor(e,t,i){super(e);const r=hr.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}class zt{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#l=0;#c=0;#h=null;#o=null;#d=0;#a=0;#u=Object.create(null);#f=[];#p=null;#g=[];#m=new WeakMap;#y=null;static#k=new Map;static#M=new Map;static#x=new WeakMap;static#w=null;static#b=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#p=e;else{if("object"!=typeof e)throw new Error('No "textContentSource" parameter specified.');this.#p=new ReadableStream({start(l){l.enqueue(e),l.close()}})}this.#t=this.#o=t,this.#a=i.scale*(globalThis.devicePixelRatio||1),this.#d=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:s,pageX:a,pageY:o}=i.rawDims;this.#y=[1,0,0,-1,-a,o+s],this.#c=r,this.#l=s,zt.#T(),Nr(t,i),this.#e.promise.finally(()=>{zt.#b.delete(this),this.#s=null,this.#u=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=jt.platform;return oe(this,"fontFamilyMap",new Map([["sans-serif",(e&&t?"Calibri, ":"")+"sans-serif"],["monospace",(e&&t?"Lucida Console, ":"")+"monospace"]]))}render(){const e=()=>{this.#h.read().then(({value:t,done:i})=>{i?this.#e.resolve():(this.#r??=t.lang,Object.assign(this.#u,t.styles),this.#I(t.items),e())},this.#e.reject)};return this.#h=this.#p.getReader(),zt.#b.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==this.#d&&(t?.(),this.#d=r,Nr(this.#o,{rotation:r})),i!==this.#a){t?.(),this.#a=i;const s={div:null,properties:null,ctx:zt.#S(this.#r)};for(const a of this.#g)s.properties=this.#m.get(a),s.div=a,this.#C(s)}}cancel(){const e=new Fr("TextLayer task cancelled.");this.#h?.cancel(e).catch(()=>{}),this.#h=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#f}#I(e){if(this.#n)return;this.#s.ctx??=zt.#S(this.#r);const t=this.#g,i=this.#f;for(const r of e){if(t.length>1e5)return ee("Ignoring additional textDivs for performance reasons."),void(this.#n=!0);if(void 0!==r.str)i.push(r.str),this.#E(r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),null!==r.id&&this.#t.setAttribute("id",`${r.id}`),s.append(this.#t)}else"endMarkedContent"===r.type&&(this.#t=this.#t.parentNode)}}#E(e){const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);const r=F.transform(this.#y,e.transform);let s=Math.atan2(r[1],r[0]);const a=this.#u[e.fontName];a.vertical&&(s+=Math.PI/2);let o=this.#i&&a.fontSubstitution||a.fontFamily;o=zt.fontFamilyMap.get(o)||o;const l=Math.hypot(r[2],r[3]),c=l*zt.#R(o,this.#r);let h,d;0===s?(h=r[4],d=r[5]-c):(h=r[4]+c*Math.sin(s),d=r[5]-c*Math.cos(s));const u="calc(var(--scale-factor)*",p=t.style;this.#t===this.#o?(p.left=`${(100*h/this.#c).toFixed(2)}%`,p.top=`${(100*d/this.#l).toFixed(2)}%`):(p.left=`${u}${h.toFixed(2)}px)`,p.top=`${u}${d.toFixed(2)}px)`),p.fontSize=`${u}${(zt.#w*l).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),0!==s&&(i.angle=s*(180/Math.PI));let f=!1;if(e.str.length>1)f=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const g=Math.abs(e.transform[0]),m=Math.abs(e.transform[3]);g!==m&&Math.max(g,m)/Math.min(g,m)>1.5&&(f=!0)}if(f&&(i.canvasWidth=a.vertical?e.height:e.width),this.#m.set(t,i),this.#s.div=t,this.#s.properties=i,this.#C(this.#s),i.hasText&&this.#t.append(t),i.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#C(e){const{div:t,properties:i,ctx:r}=e,{style:s}=t;let a="";if(zt.#w>1&&(a=`scale(${1/zt.#w})`),0!==i.canvasWidth&&i.hasText){const{fontFamily:o}=s,{canvasWidth:l,fontSize:c}=i;zt.#A(r,c*this.#a,o);const{width:h}=r.measureText(t.textContent);h>0&&(a=`scaleX(${l*this.#a/h}) ${a}`)}0!==i.angle&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(s.transform=a)}static cleanup(){if(!(this.#b.size>0)){this.#k.clear();for(const{canvas:e}of this.#M.values())e.remove();this.#M.clear()}}static#S(e=null){let t=this.#M.get(e||="");if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#M.set(e,t),this.#x.set(t,{size:0,family:""})}return t}static#A(e,t,i){const r=this.#x.get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)}static#T(){if(null!==this.#w)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#R(e,t){const i=this.#k.get(e);if(i)return i;const r=this.#S(t);r.canvas.width=r.canvas.height=30,this.#A(r,30,e);const s=r.measureText("");let a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(a){const h=a/(a+o);return this.#k.set(e,h),r.canvas.width=r.canvas.height=0,h}r.strokeStyle="red",r.clearRect(0,0,30,30),r.strokeText("g",0,0);let l=r.getImageData(0,0,30,30).data;o=0;for(let h=l.length-1-3;h>=0;h-=4)if(l[h]>0){o=Math.ceil(h/4/30);break}r.clearRect(0,0,30,30),r.strokeText("A",0,30),l=r.getImageData(0,0,30,30).data,a=0;for(let h=0,d=l.length;h<d;h+=4)if(l[h]>0){a=30-Math.floor(h/4/30);break}r.canvas.width=r.canvas.height=0;const c=a?a/(a+o):.8;return this.#k.set(e,c),c}}class tl{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};return function r(s){if(!s)return;let a=null;const o=s.name;if("#text"===o)a=s.value;else{if(!tl.shouldBuildText(o))return;s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value)}if(null!==a&&t.push({str:a}),s.children)for(const l of s.children)r(l)}(e),i}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const fV=65536,mV=At?class SN extends Iw{_createCanvas(e,t){return hr.get("canvas").createCanvas(e,t)}}:class _N extends Iw{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}},kV=At?class DN extends Tw{_fetch(e){return S(function*(){return Fw(e)})()}}:Pw,vV=At?class EN extends Rw{}:class AN extends Rw{#e;#t;#n;#i;#r;#s;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#r=t}get#c(){return this.#t||=new Map}get#h(){return this.#s||=new Map}get#o(){if(!this.#n){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#r.createElementNS(Oi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#r.createElementNS(Oi,"defs"),e.append(i),i.append(this.#n),this.#r.body.append(e)}return this.#n}#d(e){if(1===e.length){const l=e[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;const h=c.join(",");return[h,h,h]}const[t,i,r]=e,s=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)s[l]=t[l]/255,a[l]=i[l]/255,o[l]=r[l]/255;return[s.join(","),a.join(","),o.join(",")]}#a(e){if(void 0===this.#e){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(Gh(t)?ee('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[i,r,s]=this.#d(e),a=1===e.length?i:`${i}${r}${s}`;if(t=this.#c.get(a),t)return this.#c.set(e,t),t;const o=`g_${this.#i}_transfer_map_${this.#l++}`,l=this.#a(o);this.#c.set(e,l),this.#c.set(a,l);const c=this.#p(o);return this.#m(i,r,s,c),l}addHCMFilter(e,t){const i=`${e}-${t}`,r="base";let s=this.#h.get(r);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#h.set(r,s)),!e||!t))return s.url;const a=this.#k(e);e=F.makeHexColor(...a);const o=this.#k(t);if(t=F.makeHexColor(...o),this.#o.style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const l=new Array(256);for(let p=0;p<=255;p++){const f=p/255;l[p]=f<=.03928?f/12.92:((f+.055)/1.055)**2.4}const c=l.join(","),h=`g_${this.#i}_hcm_filter`,d=s.filter=this.#p(h);this.#m(c,c,c,d),this.#f(d);const u=(p,f)=>{const g=a[p]/255,m=o[p]/255,y=new Array(f+1);for(let k=0;k<=f;k++)y[k]=g+k/f*(m-g);return y.join(",")};return this.#m(u(0,5),u(1,5),u(2,5),d),s.url=this.#a(h),s.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[i]=this.#d([e]),r=`alpha_${i}`;if(t=this.#c.get(r),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_alpha_map_${this.#l++}`,a=this.#a(s);this.#c.set(e,a),this.#c.set(r,a);const o=this.#p(s);return this.#y(i,o),a}addLuminosityFilter(e){let i,r,t=this.#c.get(e||"luminosity");if(t)return t;if(e?([i]=this.#d([e]),r=`luminosity_${i}`):r="luminosity",t=this.#c.get(r),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_luminosity_map_${this.#l++}`,a=this.#a(s);this.#c.set(e,a),this.#c.set(r,a);const o=this.#p(s);return this.#u(o),e&&this.#y(i,o),a}addHighlightHCMFilter(e,t,i,r,s){const a=`${t}-${i}-${r}-${s}`;let o=this.#h.get(e);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#h.set(e,o)),!t||!i))return o.url;const[l,c]=[t,i].map(this.#k.bind(this));let h=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[u,p]=[r,s].map(this.#k.bind(this));d<h&&([h,d,u,p]=[d,h,p,u]),this.#o.style.color="";const f=(y,k,v)=>{const M=new Array(256),w=(d-h)/v,x=y/255,A=(k-y)/(255*v);let E=0;for(let b=0;b<=v;b++){const C=Math.round(h+b*w),P=x+b*A;for(let se=E;se<=C;se++)M[se]=P;E=C+1}for(let b=E;b<256;b++)M[b]=M[E-1];return M.join(",")},g=`g_${this.#i}_hcm_${e}_filter`,m=o.filter=this.#p(g);return this.#f(m),this.#m(f(u[0],p[0],5),f(u[1],p[1],5),f(u[2],p[2],5),m),o.url=this.#a(g),o.url}destroy(e=!1){e&&0!==this.#h.size||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#u(e){const t=this.#r.createElementNS(Oi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#f(e){const t=this.#r.createElementNS(Oi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#r.createElementNS(Oi,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#o.append(t),t}#g(e,t,i){const r=this.#r.createElementNS(Oi,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)}#m(e,t,i,r){const s=this.#r.createElementNS(Oi,"feComponentTransfer");r.append(s),this.#g(s,"feFuncR",e),this.#g(s,"feFuncG",t),this.#g(s,"feFuncB",i)}#y(e,t){const i=this.#r.createElementNS(Oi,"feComponentTransfer");t.append(i),this.#g(i,"feFuncA",e)}#k(e){return this.#o.style.color=e,e2(getComputedStyle(this.#o).getPropertyValue("color"))}},MV=At?class IN extends Lw{_fetch(e){return S(function*(){return Fw(e)})()}}:Ow;function wV(n={}){"string"==typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new m2,{docId:t}=e,i=n.url?function bV(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(At&&"string"==typeof n)return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,r=n.data?function xV(n){if(At&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if("string"==typeof n)return ea(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||"object"==typeof n&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,s=n.httpHeaders||null,a=!0===n.withCredentials,o=n.password??null,l=n.range instanceof nb?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:fV;let h=n.worker instanceof dt?n.worker:null;const d=n.verbosity,u="string"!=typeof n.docBaseUrl||Gh(n.docBaseUrl)?null:n.docBaseUrl,p="string"==typeof n.cMapUrl?n.cMapUrl:null,f=!1!==n.cMapPacked,g=n.CMapReaderFactory||kV,m="string"==typeof n.standardFontDataUrl?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||MV,k=!0!==n.stopAtErrors,v=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,M=!1!==n.isEvalSupported,w="boolean"==typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!At,x="boolean"==typeof n.isChrome?n.isChrome:!jt.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,A=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,E="boolean"==typeof n.disableFontFace?n.disableFontFace:At,b=!0===n.fontExtraProperties,C=!0===n.enableXfa,P=n.ownerDocument||globalThis.document,se=!0===n.disableRange,re=!0===n.disableStream,ae=!0===n.disableAutoFetch,be=!0===n.pdfBug,qe=n.CanvasFactory||mV,N=n.FilterFactory||vV,te=!0===n.enableHWA,ur=l?l.length:n.length??NaN,qr="boolean"==typeof n.useSystemFonts?n.useSystemFonts:!At&&!E,Pn="boolean"==typeof n.useWorkerFetch?n.useWorkerFetch:g===Pw&&y===Ow&&p&&m&&Zo(p,document.baseURI)&&Zo(m,document.baseURI);n.canvasFactory&&Cw("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&Cw("`filterFactory`-instance option, please use `FilterFactory` instead."),function tN(n){Number.isInteger(n)&&(Bh=n)}(d);const it={canvasFactory:new qe({ownerDocument:P,enableHWA:te}),filterFactory:new N({docId:t,ownerDocument:P}),cMapReaderFactory:Pn?null:new g({baseUrl:p,isCompressed:f}),standardFontDataFactory:Pn?null:new y({baseUrl:m})};if(!h){const Rn={verbosity:d,port:Jo.workerPort};h=Rn.port?dt.fromPort(Rn):new dt(Rn),e._worker=h}const ha={docId:t,apiVersion:"4.8.69",data:r,password:o,disableAutoFetch:ae,rangeChunkSize:c,length:ur,docBaseUrl:u,enableXfa:C,evaluatorOptions:{maxImageSize:v,disableFontFace:E,ignoreErrors:k,isEvalSupported:M,isOffscreenCanvasSupported:w,isChrome:x,canvasMaxAreaInBytes:A,fontExtraProperties:b,useSystemFonts:qr,cMapUrl:Pn?p:null,standardFontDataUrl:Pn?m:null}},pl={disableFontFace:E,fontExtraProperties:b,ownerDocument:P,pdfBug:be,styleElement:null,loadingParams:{disableAutoFetch:ae,enableXfa:C}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Rn=h.messageHandler.sendWithPromise("GetDocRequest",ha,r?[r.buffer]:null);let Le;if(l)Le=new ZN(l,{disableRange:se,disableStream:re});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Bi;Bi=At?typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Zo(i)?Kw:oV:Zo(i)?Kw:nV,Le=new Bi({url:i,length:ur,httpHeaders:s,withCredentials:a,rangeChunkSize:c,disableRange:se,disableStream:re})}return Rn.then(Bi=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const U2=new el(t,Bi,h.port),Ufe=new EV(U2,e,Le,pl,it);e._transport=Ufe,U2.send("Ready",null)})}).catch(e._capability.reject),e}function tb(n){return"object"==typeof n&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class m2{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+m2.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var e=this;return S(function*(){e.destroyed=!0;try{e._worker?.port&&(e._worker._pendingDestroy=!0),yield e._transport?.destroy()}catch(t){throw e._worker?.port&&delete e._worker._pendingDestroy,t}e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)})()}}class nb{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class CV{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return oe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class _V{#e=null;#t=!1;constructor(e,t,i,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new xw:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new ib,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new Go({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return oe(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var e=this;return S(function*(){return e._transport._htmlForXfa?.children[e._pageIndex]||null})()}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=lr.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:h=null,isEditing:d=!1}){this._stats?.time("Overall");const u=this._transport.getRenderingIntent(i,r,h,d),{renderingIntent:p,cacheKey:f}=u;this.#t=!1,this.#i(),o||=this._transport.getOptionalContentConfig(p);let g=this._intentStates.get(f);g||(g=Object.create(null),this._intentStates.set(f,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const m=!!(4&p);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u));const y=M=>{g.renderTasks.delete(k),(this._maybeCleanupAfterRender||m)&&(this.#t=!0),this.#n(!m),M?(k.capability.reject(M),this._abortOperatorList({intentState:g,reason:M instanceof Error?M:new Error(M)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new ra({callback:y,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||=new Set).add(k);const v=k.task;return Promise.all([g.displayReadyCapability.promise,o]).then(([M,w])=>{if(this.destroyed)y();else{if(this._stats?.time("Rendering"),!(w.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:M,optionalContentConfig:w}),k.operatorListChanged()}}).catch(y),v}getOperatorList({intent:e="display",annotationMode:t=lr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){const a=this._transport.getRenderingIntent(e,t,i,r,!0);let l,o=this._intentStates.get(a.cacheKey);return o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o)),o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))},o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:r=>r.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>tl.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};!function s(){a.read().then(function({value:l,done:c}){c?i(o):(o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),s())},r)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new xw),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},5e3),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),c=this._intentStates.get(t);c.streamReader=l;const h=()=>{l.read().then(({value:d,done:u})=>{u?c.streamReader=null:this._transport.destroyed||(this._renderPageChunk(d,c),h())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const u of c.renderTasks)u.operatorListChanged();this.#n(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else{if(!c.opListReadCapability)throw d;c.opListReadCapability.reject(d)}}})};h()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Qf){let r=100;return t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r))}}if(e.streamReader.cancel(new Fr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class AV{#e=new Map;#t=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted)return void ee("LoopbackPort - cannot use an `aborted` signal.");const a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}class dt{static#e=0;static#t=!1;static#n;static{At&&(this.#t=!0,Jo.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||"null"===i.origin)return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},this._createCDNWrapper=e=>URL.createObjectURL(new Blob([`await import("${e}");`],{type:"text/javascript"}))}constructor({name:e=null,port:t=null,verbosity:i=nN()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(dt.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(dt.#n||=new WeakMap).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return At?Promise.all([hr.promise,this._readyCapability.promise]):this._readyCapability.promise}#i(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new el("main","worker",e),this._messageHandler.on("ready",function(){}),this.#i()}_initialize(){if(dt.#t||dt.#r)return void this._setupFakeWorker();let{workerSrc:e}=dt;try{dt._isSameOrigin(window.location.href,e)||(e=dt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new el("main","worker",t),r=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",o=>{s.abort(),!this.destroyed&&o?(this._messageHandler=i,this._port=t,this._webWorker=t,this.#i()):r()}),i.on("ready",o=>{if(s.abort(),this.destroyed)r();else try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};return void a()}catch{qh("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){dt.#t||(ee("Setting up fake worker."),dt.#t=!0),dt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new AV;this._port=t;const i="fake"+dt.#e++,r=new el(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new el(i,i+"_worker",t),this.#i()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),dt.#n?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new dt(e)}static get workerSrc(){if(Jo.workerSrc)return Jo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#r(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var e=this;return oe(this,"_setupFakeWorkerGlobal",function(){var i=S(function*(){return e.#r?e.#r:(yield import(e.workerSrc)).WorkerMessageHandler});return function(){return i.apply(this,arguments)}}()())}}class EV{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#r=null;constructor(e,t,i,r,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new ib,this.fontLoader=new xN({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,t=null){const i=this.#e.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return oe(this,"annotationStorage",new s2)}getRenderingIntent(e,t=lr.ENABLE,i=null,r=!1,s=!1){let a=2,o=r2;switch(e){case"any":a=1;break;case"display":break;case"print":a=4;break;default:ee(`getRenderingIntent - invalid intent: ${e}`)}const l=4&a&&i instanceof Dw?i:this.annotationStorage;switch(t){case lr.DISABLE:a+=64;break;case lr.ENABLE:break;case lr.ENABLE_FORMS:a+=16;break;case lr.ENABLE_STORAGE:a+=32,o=l.serializable;break;default:ee(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=128),s&&(a+=256);const{ids:c,hash:h}=l.modifiedIds;return{renderingIntent:a,cacheKey:[a,o.hash,h].join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),zt.cleanup(),this._networkStream?.cancelAllRequests(new Fr("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){var e=this;const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(r,s)=>{lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){o?s.close():(lt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a]))}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",function(){var r=S(function*(s){yield e._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=e._fullReader;return(!a||!o)&&(e._lastProgress&&i.onProgress?.(e._lastProgress),e._fullReader.onProgress=c=>{i.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}});return function(s){return r.apply(this,arguments)}}()),t.on("GetRangeReader",(r,s)=>{lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);a?(s.onPull=()=>{a.read().then(function({value:o,done:l}){l?s.close():(lt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o]))}).catch(o=>{s.error(o)})},s.onCancel=o=>{a.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}):s.close()}),t.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,i._capability.resolve(new CV(r,this))}),t.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new Wf(r.message,r.code);break;case"InvalidPDFException":s=new Mw(r.message);break;case"MissingPDFException":s=new Or(r.message);break;case"UnexpectedResponseException":s=new Uh(r.message,r.status);break;case"UnknownErrorException":s=new Gf(r.message,r.details);break;default:Te("DocException - expected a valid Error.")}i._capability.reject(s)}),t.on("PasswordRequest",r=>{if(this.#r=Promise.withResolvers(),i.onPassword){const s=a=>{a instanceof Error?this.#r.reject(a):this.#r.resolve({password:a})};try{i.onPassword(s,r.code)}catch(a){this.#r.reject(a)}}else this.#r.reject(new Wf(r.message,r.code));return this.#r.promise}),t.on("DataLoaded",r=>{i.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),t.on("StartRenderPage",r=>{this.destroyed||this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),t.on("commonobj",([r,s,a])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in a){const p=a.error;ee(`Error during font loading: ${p}`),this.commonObjs.resolve(r,p);break}const h=c&&globalThis.FontInspector?.enabled?(p,f)=>globalThis.FontInspector.fontAdded(p,f):null,d=new CN(a,{disableFontFace:o,inspectFont:h});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(r,d)});break;case"CopyLocalImage":const{imageRef:u}=a;lt(u,"The imageRef must be defined.");for(const p of this.#t.values())for(const[,f]of p.objs)if(f?.ref===u)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([r,s,a,o])=>{if(this.destroyed)return;const l=this.#t.get(s);if(!l.objs.has(r)){if(0===l._intentStates.size)return void o?.bitmap?.close();switch(a){case"Image":l.objs.resolve(r,o),o?.dataLen>1e7&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",r=>{this.destroyed||i.onProgress?.({loaded:r.loaded,total:r.total})}),t.on("FetchBuiltInCMap",function(){var r=S(function*(s){if(e.destroyed)throw new Error("Worker was destroyed.");if(!e.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return e.cMapReaderFactory.fetch(s)});return function(s){return r.apply(this,arguments)}}()),t.on("FetchStandardFontData",function(){var r=S(function*(s){if(e.destroyed)throw new Error("Worker was destroyed.");if(!e.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return e.standardFontDataFactory.fetch(s)});return function(s){return r.apply(this,arguments)}}())}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ee("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#n.get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,e);const a=new _V(t,s,this,this._params.pdfBug);return this.#t.set(t,a),a});return this.#n.set(t,r),r}getPageIndex(e){return tb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new GN(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new $N(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){var t=this;return S(function*(){if(!t.destroyed){yield t.messageHandler.sendWithPromise("Cleanup",null);for(const i of t.#t.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);t.commonObjs.clear(),e||t.fontLoader.clear(),t.#e.clear(),t.filterFactory.destroy(!0),zt.cleanup()}})()}cachedPageNumber(e){return tb(e)?this.#i.get(0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`)??null:null}}const Jh=Symbol("INITIAL_DATA");class ib{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Jh}}get(e,t=null){if(t){const r=this.#t(e);return r.promise.then(()=>t(r.data)),null}const i=this.#e[e];if(!i||i.data===Jh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#e[e];return!!t&&t.data!==Jh}resolve(e,t=null){const i=this.#t(e);i.data=t,i.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Jh&&(yield[e,t])}}}class SV{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class ra{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:u=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===h&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new SV(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(ra.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ra.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:a}=this.params;this.gfx=new na(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),ra.#t.delete(this._canvas),this.callback(e||new Qf(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return S(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),ra.#t.delete(e._canvas),e.callback())))})()}}const DV="4.8.69",IV="3634dab10";function rb(n){return Math.floor(255*Math.max(0,Math.min(1,n))).toString(16).padStart(2,"0")}function nl(n){return Math.max(0,Math.min(255,255*n))}class sb{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=nl(e),e,e]}static G_HTML([e]){const t=rb(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(nl)}static RGB_HTML(e){return`#${e.map(rb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[nl(1-Math.min(1,e+r)),nl(1-Math.min(1,i+r)),nl(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,s=1-t,a=1-i;return["CMYK",r,s,a,Math.min(r,s,a)]}}class TV{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Te("Abstract method `_createSVG` called.")}}class k2 extends TV{_createSVG(e){return document.createElementNS(Oi,e)}}class ab{static setupStorage(e,t,i,r,s){const a=r.getValue(t,{value:null});switch(i.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===s)break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",o=>{r.setValue(t,{value:o.target.getAttribute(o.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===s)break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})})}break;case"select":if(null!==a.value){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options;r.setValue(t,{value:-1===l.selectedIndex?"":l[l.selectedIndex].value})})}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${r}`);for(const[l,c]of Object.entries(a))if(null!=c)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,c)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const o="richText"!==s,l=e.div;if(l.append(a),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(0===r.children.length){if(r.value){const d=document.createTextNode(r.value);a.append(d),o&&tl.shouldBuildText(r.name)&&c.push(d)}return{textDivs:c}}const h=[[r,-1,a]];for(;h.length>0;){const[d,u,p]=h.at(-1);if(u+1===d.children.length){h.pop();continue}const f=d.children[++h.at(-1)[1]];if(null===f)continue;const{name:g}=f;if("#text"===g){const y=document.createTextNode(f.value);c.push(y),p.append(y);continue}const m=f?.attributes?.xmlns?document.createElementNS(f.attributes.xmlns,g):document.createElement(g);if(p.append(m),f.attributes&&this.setAttributes({html:m,element:f,storage:t,intent:s,linkService:i}),f.children?.length>0)h.push([f,-1,m]);else if(f.value){const y=document.createTextNode(f.value);o&&tl.shouldBuildText(g)&&c.push(y),m.append(y)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const il=1e3,Vr=new WeakSet;function Ni(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class RV{static create(e){switch(e.data.annotationType){case 2:return new ob(e);case 1:return new LV(e);case 20:switch(e.data.fieldType){case"Tx":return new OV(e);case"Btn":return e.data.radioButton?new lb(e):e.data.checkBox?new NV(e):new VV(e);case"Ch":return new jV(e);case"Sig":return new FV(e)}return new jr(e);case 16:return new v2(e);case 3:return new cb(e);case 4:return new zV(e);case 5:return new BV(e);case 6:return new qV(e);case 8:return new hb(e);case 14:return new $V(e);case 15:return new M2(e);case 7:return new UV(e);case 9:return new db(e);case 10:return new WV(e);case 11:return new GV(e);case 12:return new ZV(e);case 13:return new ub(e);case 17:return new XV(e);default:return new Xe(e)}}}class Xe{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e?.str||t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Xe._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...e);const{width:c,height:h}=Ni(e);t.left=100*(e[0]-o)/s+"%",t.top=100*(a-e[3]+l)/a+"%",0===r?(t.width=100*c/s+"%",t.height=100*h/a+"%"):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof jr||(s.tabIndex=il);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof v2){const{rotation:g}=t;return!t.hasOwnCanvas&&0!==g&&this.setRotation(g,s),s}const{width:o,height:l}=Ni(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,m=t.borderStyle.verticalCornerRadius;switch(g>0||m>0?a.borderRadius=`calc(${g}px * var(--scale-factor)) / calc(${m}px * var(--scale-factor))`:this instanceof lb&&(a.borderRadius=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`),t.borderStyle.style){case 1:a.borderStyle="solid";break;case 2:a.borderStyle="dashed";break;case 3:ee("Unimplemented border style: beveled");break;case 4:ee("Unimplemented border style: inset");break;case 5:a.borderBottomStyle="solid"}const y=t.borderColor||null;y?(this.#t=!0,a.borderColor=F.makeHexColor(0|y[0],0|y[1],0|y[2])):a.borderWidth=0}const c=F.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:u,pageY:p}=r.rawDims;a.left=100*(c[0]-u)/h+"%",a.top=100*(c[1]-p)/d+"%";const{rotation:f}=t;return t.hasOwnCanvas||0===f?(a.width=100*o/h+"%",a.height=100*l/d+"%"):this.setRotation(f,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:a}=Ni(this.data.rect);let o,l;e%180==0?(o=100*s/i,l=100*a/r):(o=100*a/i,l=100*s/r),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const s=r.detail[t],a=s[0],o=s.slice(1);r.target.style[i]=sb[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:sb[`${a}_rgb`](o)})};return oe(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2==1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:1===i||2===i})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail))(e[r]||i[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,s]of Object.entries(t)){const a=i[r];a&&(a({detail:{[r]:s},target:e}),delete t[r])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,s]=this.data.rect.map(g=>Math.fround(g));if(8===e.length){const[g,m,y,k]=e.subarray(2,6);if(r===g&&s===m&&t===y&&i===k)return}const{style:a}=this.container;let o;if(this.#t){const{borderColor:g,borderWidth:m}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${m}">`],this.container.classList.add("hasBorder")}const l=r-t,c=s-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=h.createElement("defs");d.append(u);const p=h.createElement("clipPath"),f=`clippath_${this.data.id}`;p.setAttribute("id",f),p.setAttribute("clipPathUnits","objectBoundingBox"),u.append(p);for(let g=2,m=e.length;g<m;g+=8){const y=e[g],k=e[g+1],v=e[g+2],M=e[g+3],w=h.createElement("rect"),x=(v-t)/l,A=(s-k)/c,E=(y-v)/l,b=(k-M)/c;w.setAttribute("x",x),w.setAttribute("y",A),w.setAttribute("width",E),w.setAttribute("height",b),p.append(w),o?.push(`<rect vector-effect="non-scaling-stroke" x="${x}" y="${A}" width="${E}" height="${b}"/>`)}this.#t&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${f})`}_createPopup(){const{data:e}=this,t=this.#n=new v2({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Te("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:o}of r){if(-1===s||a===t)continue;const l="string"==typeof o?o:null,c=document.querySelector(`[data-element-id="${a}"]`);!c||Vr.has(c)?i.push({id:a,exportValue:l,domElement:c}):ee(`_getElementsByName - element not allowed: ${a}`)}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==t&&Vr.has(r)&&i.push({id:a,exportValue:s,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class ob extends Xe{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(this.#t(i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#n(i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,i=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const s=i.get(r);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return ee('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(e.onclick=()=>!1));e.onclick=()=>{i?.();const{fields:r,refs:s,include:a}=t,o=[];if(0!==r.length||0!==s.length){const h=new Set(s);for(const d of r){const u=this._fieldObjects[d]||[];for(const{id:p}of u)h.add(p)}for(const d of Object.values(this._fieldObjects))for(const u of d)h.has(u.id)===a&&o.push(u)}else for(const h of Object.values(this._fieldObjects))o.push(...h);const l=this.annotationStorage,c=[];for(const h of o){const{id:d}=h;switch(c.push(d),h.type){case"text":case"combobox":case"listbox":l.setValue(d,{value:h.defaultValue||""});break;case"checkbox":case"radiobutton":l.setValue(d,{value:h.defaultValue===h.exportValues});break;default:continue}const u=document.querySelector(`[data-element-id="${d}"]`);u&&(Vr.has(u)?u.dispatchEvent(new Event("resetform")):ee(`_bindResetFormAction - element not allowed: ${d}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class LV extends Xe{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class jr extends Xe{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return jt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,s){i.includes("mouse")?e.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{if("blur"===i){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if("focus"===i){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}})})}_setEventListeners(e,t,i,r){for(const[s,a]of i)("Action"===a||this.data.actions?.[a])&&(("Focus"===a||"Blur"===a)&&(t||={focused:!1}),this._setEventListener(e,t,s,a,r),"Focus"!==a||this.data.actions?.Blur?"Blur"===a&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":F.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,s=e.style;let a;const l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-2),h=Math.round(c/(1.35*r))||1;a=Math.min(r,l(c/h/1.35))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-2);a=Math.min(r,l(c/1.35))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=F.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(s.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class OV extends jr{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,i,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),s.setValue(a.id,{[r]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let s=r.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let o=r.formattedValue||this.data.textContent?.join("\n")||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const l={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Vr.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=il,this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",h=>{e.setValue(t,{value:h.target.value}),this.setPropertyOnSiblings(i,"value",h.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",h=>{i.value=l.userValue=this.data.defaultFieldValue??"",l.formattedValue=null});let c=h=>{const{formattedValue:d}=l;null!=d&&(h.target.value=d),h.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",d=>{if(l.focused)return;const{target:u}=d;l.userValue&&(u.value=l.userValue),l.lastCommittedValue=u.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target),this._dispatchEventFromSandbox({value(p){l.userValue=p.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),p.target.value=l.userValue},formattedValue(p){const{formattedValue:f}=p.detail;l.formattedValue=f,null!=f&&p.target!==document.activeElement&&(p.target.value=f),e.setValue(t,{formattedValue:f})},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{const{charLimit:f}=p.detail,{target:g}=p;if(0===f)return void g.removeAttribute("maxLength");g.setAttribute("maxLength",f);let m=l.userValue;!m||m.length<=f||(m=m.slice(0,f),g.value=l.userValue=m,e.setValue(t,{value:m}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}},d)}),i.addEventListener("keydown",d=>{l.commitKey=1;let u=-1;if("Escape"===d.key?u=0:"Enter"!==d.key||this.data.multiLine?"Tab"===d.key&&(l.commitKey=3):u=2,-1===u)return;const{value:p}=d.target;l.lastCommittedValue!==p&&(l.lastCommittedValue=p,l.userValue=p,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,willCommit:!0,commitKey:u,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});const h=c;c=null,i.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:u}=d.target;l.userValue=u,l.lastCommittedValue!==u&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),h(d)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;const{data:u,target:p}=d,{value:f,selectionStart:g,selectionEnd:m}=p;let y=g,k=m;switch(d.inputType){case"deleteWordBackward":{const v=f.substring(0,g).match(/\w*[^\w]*$/);v&&(y-=v[0].length);break}case"deleteWordForward":{const v=f.substring(g).match(/^[^\w]*\w*/);v&&(k+=v[0].length);break}case"deleteContentBackward":g===m&&(y-=1);break;case"deleteContentForward":g===m&&(k+=1)}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,change:u||"",willCommit:!1,selStart:y,selEnd:k}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){const d=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class FV extends jr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class NV extends jr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Vr.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=il,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i)){const h=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}e.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{a.target.checked=(t.defaultFieldValue||"Off")===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({value(l){l.target.checked="Off"!==l.detail.value,e.setValue(i,{value:l.target.checked})}},a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class lb extends jr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof r&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Vr.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=il,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=null!=o&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{this._dispatchEventFromSandbox({value:c=>{const h=a===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const u=h&&d.id===i;d.domElement&&(d.domElement.checked=u),e.setValue(d.id,{value:u})}}},o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class VV extends ob{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class jV extends jr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Vr.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=il;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const u of r.options)u.selected=u.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let a=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),a=()=>{h.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=h=>{const d=h?"value":"textContent",{options:u,multiple:p}=r;return p?Array.prototype.filter.call(u,f=>f.selected).map(f=>f[d]):-1===u.selectedIndex?null:u[u.selectedIndex][d]};let l=o(!1);const c=h=>Array.prototype.map.call(h.target.options,u=>({displayValue:u.textContent,exportValue:u.value}));return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{this._dispatchEventFromSandbox({value(u){a?.();const p=u.detail.value,f=new Set(Array.isArray(p)?p:[p]);for(const g of r.options)g.selected=f.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(u){r.multiple=!0},remove(u){const p=r.options,f=u.detail.remove;p[f].selected=!1,r.remove(f),p.length>0&&-1===Array.prototype.findIndex.call(p,m=>m.selected)&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:c(u)}),l=o(!1)},clear(u){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(u){const{index:p,displayValue:f,exportValue:g}=u.detail.insert,m=r.children[p],y=document.createElement("option");y.textContent=f,y.value=g,m?m.before(y):r.append(y),e.setValue(t,{value:o(!0),items:c(u)}),l=o(!1)},items(u){const{items:p}=u.detail;for(;0!==r.length;)r.remove(0);for(const f of p){const{displayValue:g,exportValue:m}=f,y=document.createElement("option");y.textContent=g,y.value=m,r.append(y)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(u)}),l=o(!1)},indices(u){const p=new Set(u.detail.indices);for(const f of u.target.options)f.selected=p.has(f.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(u){u.target.disabled=!u.detail.editable}},h)}),r.addEventListener("input",h=>{const d=o(!0),u=o(!1);e.setValue(t,{value:d}),h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:u,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class v2 extends Xe{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:Xe._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new HV({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Yf}${i}`).join(",")),this.container}}class HV{#e=this.#I.bind(this);#t=this.#A.bind(this);#n=this.#S.bind(this);#i=this.#C.bind(this);#r=null;#s=null;#l=null;#c=null;#h=null;#o=null;#d=null;#a=!1;#u=null;#f=null;#p=null;#g=null;#m=null;#y=null;#k=!1;constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:h,open:d}){this.#s=e,this.#m=r,this.#l=a,this.#g=o,this.#o=l,this.#r=t,this.#p=c,this.#d=h,this.#h=i,this.#c=_w.toDateObject(s),this.trigger=i.flatMap(u=>u.getElementsToTriggerPopup());for(const u of this.trigger)u.addEventListener("click",this.#i),u.addEventListener("mouseenter",this.#n),u.addEventListener("mouseleave",this.#t),u.classList.add("popupTriggerArea");for(const u of i)u.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,d&&this.#C()}render(){if(this.#u)return;const e=this.#u=document.createElement("div");if(e.className="popup",this.#r){const s=e.style.outlineColor=F.makeHexColor(...this.#r);e.style.backgroundColor=CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?`color-mix(in srgb, ${s} 30%, white)`:F.makeHexColor(...this.#r.map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),({dir:i.dir,str:i.textContent}=this.#m),e.append(t),this.#c){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(s)}const r=this.#M;if(r)ab.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#l);e.append(s)}this.#s.append(e)}get#M(){const e=this.#g,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#x(){return this.#M?.attributes?.style?.fontSize||0}get#w(){return this.#M?.attributes?.style?.color||null}#b(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#w,fontSize:this.#x?`calc(${this.#x}px * var(--scale-factor))`:""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:r});return i}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s)i.append(document.createTextNode(r[s])),s<a-1&&i.append(document.createElement("br"));return i}#I(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#a)&&this.#C()}updateEdited({rect:e,popupContent:t}){this.#y||={contentsObj:this.#l,richText:this.#g},e&&(this.#f=null),t&&(this.#g=this.#b(t),this.#l=null),this.#u?.remove(),this.#u=null}resetEdited(){this.#y&&(({contentsObj:this.#l,richText:this.#g}=this.#y),this.#y=null,this.#u?.remove(),this.#u=null,this.#f=null)}#E(){if(null!==this.#f)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:s}}}=this.#o;let a=!!this.#d,o=a?this.#d:this.#p;for(const f of this.#h)if(!o||null!==F.intersect(f.data.rect,o)){o=f.data.rect,a=!0;break}const l=F.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]);this.#f=[100*(l[0]+(a?o[2]-o[0]+5:0)-r)/t,100*(l[1]-s)/i];const{style:p}=this.#s;p.left=`${this.#f[0]}%`,p.top=`${this.#f[1]}%`}#C(){this.#a=!this.#a,this.#a?(this.#S(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#e)):(this.#A(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#e))}#S(){this.#u||this.render(),this.isVisible?this.#a&&this.#s.classList.add("focused"):(this.#E(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#A(){this.#s.classList.remove("focused"),!this.#a&&this.isVisible&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#k=this.isVisible,this.#k&&(this.#s.hidden=!0)}maybeShow(){this.#k&&(this.#u||this.#S(),this.#k=!1,this.#s.hidden=!1)}get isVisible(){return!1===this.#s.hidden}}class cb extends Xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=J.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class zV extends Xe{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:i}=Ni(e.rect),r=this.svgFactory.create(t,i,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class BV extends Xe{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:i}=Ni(e.rect),r=this.svgFactory.create(t,i,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",t-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class qV extends Xe{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:i}=Ni(e.rect),r=this.svgFactory.create(t,i,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",i/2),a.setAttribute("rx",t/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class hb extends Xe{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:i,popupRef:r}}=this;if(!t)return this.container;const{width:s,height:a}=Ni(e),o=this.svgFactory.create(s,a,!0);let l=[];for(let h=0,d=t.length;h<d;h+=2)l.push(`${t[h]-e[0]},${e[3]-t[h+1]}`);l=l.join(" ");const c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class UV extends hb{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $V extends Xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class M2 extends Xe{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?J.HIGHLIGHT:J.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:i,popupRef:r}}=this,{width:s,height:a}=Ni(e),o=this.svgFactory.create(s,a,!0);for(const l of t){let c=[];for(let d=0,u=l.length;d<u;d+=2)c.push(`${l[d]-e[0]},${e[3]-l[d+1]}`);c=c.join(" ");const h=this.svgFactory.createElement(this.svgElementName);this.#e.push(h),h.setAttribute("points",c),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(o),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class db extends Xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=J.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class WV extends Xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class GV extends Xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ZV extends Xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ub extends Xe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=J.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class XV extends Xe{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||0===t.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:r}=jt.platform;return e.addEventListener("keydown",s=>{"Enter"===s.key&&(r?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class YV{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}){this.div=e,this.#e=t,this.#t=i,this.#i=o||null,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}#r(e,t){var i=this;return S(function*(){const r=e.firstChild||e,s=r.id=`${Yf}${t}`,a=yield i.#i?.getAriaAttributes(s);if(a)for(const[o,l]of a)r.setAttribute(o,l);i.div.append(e),i.#e?.moveElementInDOM(i.div,e,r,!1)})()}render(e){var t=this;return S(function*(){const{annotations:i}=e,r=t.div;Nr(r,t.viewport);const s=new Map,a={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new k2,annotationStorage:e.annotationStorage||new s2,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:t,elements:null};for(const o of i){if(o.noHTML)continue;const l=16===o.annotationType;if(l){const d=s.get(o.id);if(!d)continue;a.elements=d}else{const{width:d,height:u}=Ni(o.rect);if(d<=0||u<=0)continue}a.data=o;const c=RV.create(a);if(!c.isRenderable)continue;if(!l&&o.popupRef){const d=s.get(o.popupRef);d?d.push(c):s.set(o.popupRef,[c])}const h=c.render();o.hidden&&(h.style.visibility="hidden"),yield t.#r(h,o.id),c._isEditable&&(t.#n.set(c.data.id,c),t._annotationEditorUIManager?.renderAnnotationElement(c))}t.#s()})()}update({viewport:e}){const t=this.div;this.viewport=e,Nr(t,{rotation:e.rotation}),this.#s(),t.hidden=!1}#s(){if(!this.#t)return;const e=this.div;for(const[t,i]of this.#t){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const ed=/\r\n?|\n/g;class ct extends Z{#e;#t="";#n=`${this.id}-editor`;#i=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=ct.prototype,t=s=>s.isEmpty(),i=Ko.TRANSLATE_SMALL,r=Ko.TRANSLATE_BIG;return oe(this,"_keyboardManager",new Yo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=J.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||ct._defaultColor||Z._defaultLineColor,this.#r=e.fontSize||ct._defaultFontSize}static initialize(e,t){Z.initialize(e,t);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case G.FREETEXT_SIZE:ct._defaultFontSize=t;break;case G.FREETEXT_COLOR:ct._defaultColor=t}}updateParams(e,t){switch(e){case G.FREETEXT_SIZE:this.#s(t);break;case G.FREETEXT_COLOR:this.#l(t)}}static get defaultPropertiesToUpdate(){return[[G.FREETEXT_SIZE,ct._defaultFontSize],[G.FREETEXT_COLOR,ct._defaultColor||Z._defaultLineColor]]}get propertiesToUpdate(){return[[G.FREETEXT_SIZE,this.#r],[G.FREETEXT_COLOR,this.#e]]}#s(e){const t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#r)*this.parentScale),this.#r=r,this.#h()},i=this.#r;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=r=>{this.#e=this.editorDiv.style.color=r},i=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-ct._internalPadding*e,-(ct._internalPadding+this.#r)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(J.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(ct.#o(i)),t=i);return e.join("\n")}#h(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:s}=this,a=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",r.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",o)}this.rotation%180==this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const i=r=>{this.#t=r,r?(this.#d(),this._uiManager.rebuild(this),this.#h()):this.remove()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ct._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Zh(this,this.div,["dblclick","keydown"]),this.width){const[r,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[c,h]=this.pageDimensions,[d,u]=this.pageTranslation;let p,f;switch(this.rotation){case 0:p=e+(a[0]-d)/c,f=t+this.height-(a[1]-u)/h;break;case 90:p=e+(a[0]-d)/c,f=t-(a[1]-u)/h,[o,l]=[l,-o];break;case 180:p=e-this.width+(a[0]-d)/c,f=t-(a[1]-u)/h,[o,l]=[-o,-l];break;case 270:p=e+(a[0]-d-this.height*h)/c,f=t+(a[1]-u-this.width*c)/h,[o,l]=[-l,o]}this.setAt(p*r,f*s,o,l)}else this.setAt(e*r,t*s,this.width*r,this.height*s);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(ed,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:i}=t;if(1===i.length&&"text/plain"===i[0])return;e.preventDefault();const r=ct.#u(t.getData("text")||"").replaceAll(ed,"\n");if(!r)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!r.includes("\n"))return a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:o,startOffset:l}=a,c=[],h=[];if(o.nodeType===Node.TEXT_NODE){const p=o.parentElement;if(h.push(o.nodeValue.slice(l).replaceAll(ed,"")),p!==this.editorDiv){let f=c;for(const g of this.editorDiv.childNodes)g!==p?f.push(ct.#o(g)):f=h}c.push(o.nodeValue.slice(0,l).replaceAll(ed,""))}else if(o===this.editorDiv){let p=c,f=0;for(const g of this.editorDiv.childNodes)f++===l&&(p=h),p.push(ct.#o(g))}this.#t=`${c.join("\n")}${r}${h.join("\n")}`,this.#d();const d=new Range;let u=c.reduce((p,f)=>p+f.length,0);for(const{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){const f=p.nodeValue.length;if(u<=f){d.setStart(p,u),d.setEnd(p,u);break}u-=f}s.removeAllRanges(),s.addRange(d)}#d(){if(this.editorDiv.replaceChildren(),this.#t)for(const e of this.#t.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#a(){return this.#t.replaceAll("\xa0"," ")}static#u(e){return e.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,i){var r=()=>super.deserialize,s=this;return S(function*(){let a=null;if(e instanceof cb){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:h,rotation:d,id:u,popupRef:p},textContent:f,textPosition:g,parent:{page:{pageNumber:m}}}=e;if(!f||0===f.length)return null;a=e={annotationType:J.FREETEXT,color:Array.from(c),fontSize:l,value:f.join("\n"),position:g,pageIndex:m-1,rect:h.slice(0),rotation:d,id:u,deleted:!1,popupRef:p}}const o=yield r().call(s,e,t,i);return o.#r=e.fontSize,o.#e=F.makeHexColor(...e.color),o.#t=ct.#u(e.value),o.annotationElementId=e.id||null,o._initialData=a,o})()}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=ct._internalPadding*this.parentScale,i=this.getRect(t,t),r=Z._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:J.FREETEXT,color:r,fontSize:this.#r,value:this.#a(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){const{value:t,fontSize:i,color:r,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((a,o)=>a!==r[o])||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:i}=t;i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#e,t.replaceChildren();for(const s of this.#t.split("\n")){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),t.append(a)}const r=ct._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class pb{toSVGPath(){Te("Abstract method `toSVGPath` must be implemented.")}get box(){Te("Abstract getter `box` must be implemented.")}serialize(e,t){Te("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Te("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Te("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class Hr{#e;#t=[];#n;#i;#r=[];#s=new Float64Array(18);#l;#c;#h;#o;#d;#a;#u=[];static#f=8;static#p=2;static#g=Hr.#f+Hr.#p;constructor({x:e,y:t},i,r,s,a,o=0){this.#e=i,this.#a=s*r,this.#i=a,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=o,this.#o=Hr.#f*r,this.#h=Hr.#g*r,this.#d=r,this.#u.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#m(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[i,r,s,a]=this.#e;return[(this.#l+(e[0]-t[0])/2-i)/s,(this.#c+(e[1]-t[1])/2-r)/a,(this.#l+(t[0]-e[0])/2-i)/s,(this.#c+(t[1]-e[1])/2-r)/a]}add({x:e,y:t}){this.#l=e,this.#c=t;const[i,r,s,a]=this.#e;let[o,l,c,h]=this.#s.subarray(8,12);const d=e-c,u=t-h,p=Math.hypot(d,u);if(p<this.#h)return!1;const f=p-this.#o,g=f/p,m=g*d,y=g*u;let k=o,v=l;o=c,l=h,c+=m,h+=y,this.#u?.push(e,t);const x=-y/f*this.#a,A=m/f*this.#a;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([c+x,h+A],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([c-x,h-A],16),isNaN(this.#s[6])?(0===this.#r.length&&(this.#s.set([o+x,l+A],2),this.#r.push(NaN,NaN,NaN,NaN,(o+x-i)/s,(l+A-r)/a),this.#s.set([o-x,l-A],14),this.#t.push(NaN,NaN,NaN,NaN,(o-x-i)/s,(l-A-r)/a)),this.#s.set([k,v,o,l,c,h],6),!this.isEmpty()):(this.#s.set([k,v,o,l,c,h],6),Math.abs(Math.atan2(v-l,k-o)-Math.atan2(y,m))<Math.PI/2?([o,l,c,h]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((o+c)/2-i)/s,((l+h)/2-r)/a),[o,l,k,v]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((k+o)/2-i)/s,((v+l)/2-r)/a),!0):([k,v,o,l,c,h]=this.#s.subarray(0,6),this.#r.push(((k+5*o)/6-i)/s,((v+5*l)/6-r)/a,((5*o+c)/6-i)/s,((5*l+h)/6-r)/a,((o+c)/2-i)/s,((l+h)/2-r)/a),[c,h,o,l,k,v]=this.#s.subarray(12,18),this.#t.push(((k+5*o)/6-i)/s,((v+5*l)/6-r)/a,((5*o+c)/6-i)/s,((5*l+h)/6-r)/a,((o+c)/2-i)/s,((l+h)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#M(i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#k(i),i.join(" ")}#y(){const[e,t,i,r]=this.#e,[s,a,o,l]=this.#m();return`M${(this.#s[2]-e)/i} ${(this.#s[3]-t)/r} L${(this.#s[4]-e)/i} ${(this.#s[5]-t)/r} L${s} ${a} L${o} ${l} L${(this.#s[16]-e)/i} ${(this.#s[17]-t)/r} L${(this.#s[14]-e)/i} ${(this.#s[15]-t)/r} Z`}#k(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#M(e){const[t,i,r,s]=this.#e,a=this.#s.subarray(4,6),o=this.#s.subarray(16,18),[l,c,h,d]=this.#m();e.push(`L${(a[0]-t)/r} ${(a[1]-i)/s} L${l} ${c} L${h} ${d} L${(o[0]-t)/r} ${(o[1]-i)/s}`)}newFreeDrawOutline(e,t,i,r,s,a){return new fb(e,t,i,r,s,a)}getOutlines(){const e=this.#r,t=this.#t,i=this.#s,[r,s,a,o]=this.#e,l=new Float64Array((this.#u?.length??0)+2);for(let d=0,u=l.length-2;d<u;d+=2)l[d]=(this.#u[d]-r)/a,l[d+1]=(this.#u[d+1]-s)/o;if(l[l.length-2]=(this.#l-r)/a,l[l.length-1]=(this.#c-s)/o,isNaN(i[6])&&!this.isEmpty())return this.#x(l);const c=new Float64Array(this.#r.length+24+this.#t.length);let h=e.length;for(let d=0;d<h;d+=2)isNaN(e[d])?c[d]=c[d+1]=NaN:(c[d]=e[d],c[d+1]=e[d+1]);h=this.#b(c,h);for(let d=t.length-6;d>=6;d-=6)for(let u=0;u<6;u+=2)isNaN(t[d+u])?(c[h]=c[h+1]=NaN,h+=2):(c[h]=t[d+u],c[h+1]=t[d+u+1],h+=2);return this.#w(c,h),this.newFreeDrawOutline(c,l,this.#e,this.#d,this.#n,this.#i)}#x(e){const t=this.#s,[i,r,s,a]=this.#e,[o,l,c,h]=this.#m(),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-i)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-i)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,(t[16]-i)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-i)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(d,e,this.#e,this.#d,this.#n,this.#i)}#w(e,t){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+6}#b(e,t){const i=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[s,a,o,l]=this.#e,[c,h,d,u]=this.#m();return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l],t),t+24}}class fb extends pb{#e;#t=null;#n;#i;#r;#s;#l;constructor(e,t,i,r,s,a){super(),this.#l=e,this.#r=t,this.#e=i,this.#s=r,this.#n=s,this.#i=a,this.#o(a);const{x:o,y:l,width:c,height:h}=this.#t;for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-o)/c,e[d+1]=(e[d+1]-l)/h;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-o)/c,t[d+1]=(t[d+1]-l)/h}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,i=this.#l.length;t<i;t+=6)isNaN(this.#l[t])?e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`):e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`);return e.push("Z"),e.join(" ")}serialize([e,t,i,r],s){const a=i-e,o=r-t;let l,c;switch(s){case 0:l=this.#c(this.#l,e,r,a,-o),c=this.#c(this.#r,e,r,a,-o);break;case 90:l=this.#h(this.#l,e,t,a,o),c=this.#h(this.#r,e,t,a,o);break;case 180:l=this.#c(this.#l,i,t,-a,o),c=this.#c(this.#r,i,t,-a,o);break;case 270:l=this.#h(this.#l,i,r,-a,-o),c=this.#h(this.#r,i,r,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}#c(e,t,i,r,s){const a=new Float64Array(e.length);for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*r,a[o+1]=i+e[o+1]*s;return a}#h(e,t,i,r,s){const a=new Float64Array(e.length);for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*r,a[o+1]=i+e[o]*s;return a}#o(e){const t=this.#l;let i=t[4],r=t[5],s=i,a=r,o=i,l=r,c=i,h=r;const d=e?Math.max:Math.min;for(let m=6,y=t.length;m<y;m+=6){if(isNaN(t[m]))s=Math.min(s,t[m+4]),a=Math.min(a,t[m+5]),o=Math.max(o,t[m+4]),l=Math.max(l,t[m+5]),h<t[m+5]?(c=t[m+4],h=t[m+5]):h===t[m+5]&&(c=d(c,t[m+4]));else{const k=F.bezierBoundingBox(i,r,...t.slice(m,m+6));s=Math.min(s,k[0]),a=Math.min(a,k[1]),o=Math.max(o,k[2]),l=Math.max(l,k[3]),h<k[3]?(c=k[2],h=k[3]):h===k[3]&&(c=d(c,k[2]))}i=t[m+4],r=t[m+5]}const u=s-this.#n,p=a-this.#n,f=o-s+2*this.#n,g=l-a+2*this.#n;this.#t={x:u,y:p,width:f,height:g,lastPoint:[c,h]}}get box(){return this.#t}newOutliner(e,t,i,r,s,a=0){return new Hr(e,t,i,r,s,a)}getNewOutline(e,t){const{x:i,y:r,width:s,height:a}=this.#t,[o,l,c,h]=this.#e,d=s*c,u=a*h,p=i*c+o,f=r*h+l,g=this.newOutliner({x:this.#r[0]*d+p,y:this.#r[1]*u+f},this.#e,this.#s,e,this.#i,t??this.#n);for(let m=2;m<this.#r.length;m+=2)g.add({x:this.#r[m]*d+p,y:this.#r[m+1]*u+f});return g.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class gb{#e;#t=[];#n=[];constructor(e,t=0,i=0,r=!0){let s=1/0,a=-1/0,o=1/0,l=-1/0;const h=10**-4;for(const{x:y,y:k,width:v,height:M}of e){const w=Math.floor((y-t)/h)*h,x=Math.ceil((y+v+t)/h)*h,A=Math.floor((k-t)/h)*h,E=Math.ceil((k+M+t)/h)*h;this.#t.push([w,A,E,!0],[x,A,E,!1]),s=Math.min(s,w),a=Math.max(a,x),o=Math.min(o,A),l=Math.max(l,E)}const d=a-s+2*i,u=l-o+2*i,p=s-i,f=o-i,g=this.#t.at(r?-1:-2),m=[g[0],g[2]];for(const y of this.#t){const[k,v,M]=y;y[0]=(k-p)/d,y[1]=(v-f)/u,y[2]=(M-f)/u}this.#e={x:p,y:f,width:d,height:u,lastPoint:m}}getOutlines(){this.#t.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#s(t)):(this.#l(t),e.push(...this.#c(t)));return this.#i(e)}#i(e){const t=[],i=new Set;for(const a of e){const[o,l,c]=a;t.push([o,l,a],[o,c,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],c=t[a+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const r=[];let s;for(;i.size>0;){const a=i.values().next().value;let[o,l,c,h,d]=a;i.delete(a);let u=o,p=l;for(s=[o,c],r.push(s);;){let f;if(i.has(h))f=h;else{if(!i.has(d))break;f=d}i.delete(f),[o,l,c,h,d]=f,u!==o&&(s.push(u,p,o,p===l?l:c),u=o),p=p===l?c:l}s.push(u,p)}return new KV(r,this.#e)}#r(e){const t=this.#n;let i=0,r=t.length-1;for(;i<=r;){const s=i+r>>1,a=t[s][0];if(a===e)return s;a<e?i=s+1:r=s-1}return r+1}#s([,e,t]){const i=this.#r(e);this.#n.splice(i,0,[e,t])}#l([,e,t]){const i=this.#r(e);for(let r=i;r<this.#n.length;r++){const[s,a]=this.#n[r];if(s!==e)break;if(s===e&&a===t)return void this.#n.splice(r,1)}for(let r=i-1;r>=0;r--){const[s,a]=this.#n[r];if(s!==e)break;if(s===e&&a===t)return void this.#n.splice(r,1)}}#c(e){const[t,i,r]=e,s=[[t,i,r]],a=this.#r(r);for(let o=0;o<a;o++){const[l,c]=this.#n[o];for(let h=0,d=s.length;h<d;h++){const[,u,p]=s[h];if(!(c<=u||p<=l)){if(u>=l){if(p>c)s[h][1]=c;else{if(1===d)return[];s.splice(h,1),h--,d--}continue}s[h][2]=l,p>c&&s.push([t,c,p])}}}return s}}class KV extends pb{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[i,r]=t;e.push(`M${i} ${r}`);for(let s=2;s<t.length;s+=2){const a=t[s],o=t[s+1];a===i?(e.push(`V${o}`),r=o):o===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,t,i,r],s){const a=[],o=i-e,l=r-t;for(const c of this.#t){const h=new Array(c.length);for(let d=0;d<c.length;d+=2)h[d]=e+c[d]*o,h[d+1]=r-c[d+1]*l;a.push(h)}return a}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class w2 extends Hr{newFreeDrawOutline(e,t,i,r,s,a){return new QV(e,t,i,r,s,a)}get classNamesForDrawing(){return["highlight","free"]}}class QV extends fb{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,r,s,a=0){return new w2(e,t,i,r,s,a)}}class Tn{#e=null;#t=null;#n;#i=null;#r=!1;#s=!1;#l=null;#c;#h=null;#o=null;#d;static#a=null;static get _keyboardManager(){return oe(this,"_keyboardManager",new Yo([[["Escape","mac+Escape"],Tn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Tn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Tn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Tn.prototype._moveToPrevious],[["Home","mac+Home"],Tn.prototype._moveToBeginning],[["End","mac+End"],Tn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#d=G.HIGHLIGHT_COLOR,this.#l=e):(this.#s=!0,this.#d=G.HIGHLIGHT_DEFAULT_COLOR),this.#o=e?._uiManager||t,this.#c=this.#o._eventBus,this.#n=e?.color||this.#o?.highlightColors.values().next().value||"#FFFF98",Tn.#a||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#o._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const i=this.#t=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#n,e.append(i),e}renderMainDropdown(){const e=this.#i=this.#u();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#u(){const e=document.createElement("div"),t=this.#o._signal;e.addEventListener("contextmenu",Dn,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of this.#o.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",Tn.#a[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.setAttribute("aria-selected",r===this.#n),s.addEventListener("click",this.#f.bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e)return void this.#g(e);const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){this.#y?e.target!==this.#e?e.target.nextSibling?.focus():this.#i.firstChild?.focus():this.#g(e)}_moveToPrevious(e){e.target!==this.#i?.firstChild&&e.target!==this.#e?(this.#y||this.#g(e),e.target.previousSibling?.focus()):this.#y&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){this.#y?this.#i.firstChild?.focus():this.#g(e)}_moveToEnd(e){this.#y?this.#i.lastChild?.focus():this.#g(e)}#p(e){Tn._keyboardManager.exec(this,e)}#g(e){if(this.#y)return void this.hideDropdown();if(this.#r=0===e.detail,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#o.combinedSignal(this.#h)})),this.#i)return void this.#i.classList.remove("hidden");const t=this.#i=this.#u();this.#e.append(t)}#m(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#h?.abort(),this.#h=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y)return void this.#l?.unselect();this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const t=this.#o.highlightColors.values();for(const i of this.#i.children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class Ye extends Z{#e=null;#t=0;#n;#i=null;#r=null;#s=null;#l=null;#c=0;#h=null;#o=null;#d=null;#a=!1;#u=null;#f;#p=null;#g="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=J.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Ye.prototype;return oe(this,"_keyboardManager",new Yo([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Ye._defaultColor,this.#m=e.thickness||Ye._defaultThickness,this.#f=e.opacity||Ye._defaultOpacity,this.#n=e.boxes||null,this.#y=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#a=!0,this.#M(e),this.#E()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#k(),this.#E(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#a?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#k(){const e=new gb(this.#n,.001);this.#o=e.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#o.box);const t=new gb(this.#n,.0025,.001,"ltr"===this._uiManager.direction);this.#s=t.getOutlines();const{lastPoint:i}=this.#s.box;this.#u=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#M({highlightOutlines:e,highlightId:t,clipPathId:i}){if(this.#o=e,this.#s=e.getNewOutline(this.#m/2+1.5,.0025),t>=0)this.#d=t,this.#i=i,this.parent.drawLayer.finalizeLine(t,e),this.#p=this.parent.drawLayer.drawOutline(this.#s);else if(this.parent){const h=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,Ye.#C(this.#o.box,(h-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#p,this.#s),this.parent.drawLayer.updateBox(this.#p,Ye.#C(this.#s.box,h))}const{x:s,y:a,width:o,height:l}=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=o,this.height=l;break;case 90:{const[h,d]=this.parentDimensions;this.x=a,this.y=1-s,this.width=o*d/h,this.height=l*h/d;break}case 180:this.x=1-s,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[h,d]=this.parentDimensions;this.x=1-a,this.y=s,this.width=o*d/h,this.height=l*h/d;break}}const{lastPoint:c}=this.#s.box;this.#u=[(c[0]-s)/o,(c[1]-a)/l]}static initialize(e,t){Z.initialize(e,t),Ye._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case G.HIGHLIGHT_DEFAULT_COLOR:Ye._defaultColor=t;break;case G.HIGHLIGHT_THICKNESS:Ye._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return this.#u}updateParams(e,t){switch(e){case G.HIGHLIGHT_COLOR:this.#x(t);break;case G.HIGHLIGHT_THICKNESS:this.#w(t)}}static get defaultPropertiesToUpdate(){return[[G.HIGHLIGHT_DEFAULT_COLOR,Ye._defaultColor],[G.HIGHLIGHT_THICKNESS,Ye._defaultThickness]]}get propertiesToUpdate(){return[[G.HIGHLIGHT_COLOR,this.color||Ye._defaultColor],[G.HIGHLIGHT_THICKNESS,this.#m||Ye._defaultThickness],[G.HIGHLIGHT_FREE,this.#a]]}#x(e){const t=(s,a)=>{this.color=s,this.parent?.drawLayer.changeColor(this.#d,s),this.#r?.updateColor(s),this.#f=a,this.parent?.drawLayer.changeOpacity(this.#d,a)},i=this.color,r=this.#f;this.addCommands({cmd:t.bind(this,e,Ye._defaultOpacity),undo:t.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#w(e){const t=this.#m,i=r=>{this.#m=r,this.#b(r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){var e=()=>super.addEditToolbar,t=this;return S(function*(){const i=yield e().call(t);return i?(t._uiManager.highlightColors&&(t.#r=new Tn({editor:t}),i.addColorPicker(t.#r)),i):null})()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#T())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#T())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#I(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#I():e&&(this.#E(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#b(e){if(!this.#a)return;this.#M({highlightOutlines:this.#o.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}#I(){null===this.#d||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#E(e=this.parent){null===this.#d&&(({id:this.#d,clipPathId:this.#i}=e.drawLayer.draw(this.#o,this.color,this.#f)),this.#p=e.drawLayer.drawOutline(this.#s),this.#h&&(this.#h.style.clipPath=this.#i))}static#C({x:e,y:t,width:i,height:r},s){switch(s){case 90:return{x:1-t-r,y:e,width:r,height:i};case 180:return{x:1-e-i,y:1-t-r,width:i,height:r};case 270:return{x:t,y:1-e-i,width:r,height:i}}return{x:e,y:t,width:i,height:r}}rotate(e){const{drawLayer:t}=this.parent;let i;i=this.#a?Ye.#C(this.#o.box,e=(e-this.rotation+360)%360):Ye.#C(this,e),t.rotate(this.#d,e),t.rotate(this.#p,e),t.updateBox(this.#d,i),t.updateBox(this.#p,Ye.#C(this.#s.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#a?e.classList.add("free"):this.div.addEventListener("keydown",this.#S.bind(this),{signal:this._uiManager._signal});const t=this.#h=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Zh(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#p,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#p,"hovered")}#S(e){Ye._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#A(!0);break;case 1:case 3:this.#A(!1)}}#A(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#p&&(this.parent?.drawLayer.removeClass(this.#p,"hovered"),this.parent?.drawLayer.addClass(this.#p,"selected"))}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.removeClass(this.#p,"selected"),this.#a||this.#A(!1))}get _mustFixPosition(){return!this.#a}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#p,e))}#T(){return this.#a?this.rotation:0}#R(){if(this.#a)return null;const[e,t]=this.pageDimensions,[i,r]=this.pageTranslation,s=this.#n,a=new Float32Array(8*s.length);let o=0;for(const{x:l,y:c,width:h,height:d}of s){const u=l*e+i,p=(1-c-d)*t+r;a[o]=a[o+4]=u,a[o+1]=a[o+3]=p,a[o+2]=a[o+6]=u+h*e,a[o+5]=a[o+7]=p+d*t,o+=8}return a}#_(e){return this.#o.serialize(e,this.#T())}static startHighlighting(e,t,{target:i,x:r,y:s}){const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),h=new AbortController,d=e.combinedSignal(h),p=f=>{h.abort(),this.#D(e,f)};window.addEventListener("blur",p,{signal:d}),window.addEventListener("pointerup",p,{signal:d}),window.addEventListener("pointerdown",f=>{f.preventDefault(),f.stopPropagation()},{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Dn,{signal:d}),i.addEventListener("pointermove",this.#v.bind(this,e),{signal:d}),this._freeHighlight=new w2({x:r,y:s},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#v(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#D(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,i){var r=()=>super.deserialize,s=this;return S(function*(){let a=null;if(e instanceof db){const{data:{quadPoints:m,rect:y,rotation:k,id:v,color:M,opacity:w,popupRef:x},parent:{page:{pageNumber:A}}}=e;a=e={annotationType:J.HIGHLIGHT,color:Array.from(M),opacity:w,quadPoints:m,boxes:null,pageIndex:A-1,rect:y.slice(0),rotation:k,id:v,deleted:!1,popupRef:x}}else if(e instanceof M2){const{data:{inkLists:m,rect:y,rotation:k,id:v,color:M,borderStyle:{rawWidth:w},popupRef:x},parent:{page:{pageNumber:A}}}=e;a=e={annotationType:J.HIGHLIGHT,color:Array.from(M),thickness:w,inkLists:m,boxes:null,pageIndex:A-1,rect:y.slice(0),rotation:k,id:v,deleted:!1,popupRef:x}}const{color:o,quadPoints:l,inkLists:c,opacity:h}=e,d=yield r().call(s,e,t,i);d.color=F.makeHexColor(...o),d.#f=h||1,c&&(d.#m=e.thickness),d.annotationElementId=e.id||null,d._initialData=a;const[u,p]=d.pageDimensions,[f,g]=d.pageTranslation;if(l){const m=d.#n=[];for(let y=0;y<l.length;y+=8)m.push({x:(l[y]-f)/u,y:1-(l[y+1]-g)/p,width:(l[y+2]-l[y])/u,height:(l[y+1]-l[y+5])/p});d.#k(),d.#E(),d.rotate(d.rotation)}else if(c){d.#a=!0;const m=c[0],y={x:m[0]-f,y:p-(m[1]-g)},k=new w2(y,[0,0,u,p],1,d.#m/2,!0,.001);for(let w=0,x=m.length;w<x;w+=2)y.x=m[w]-f,y.y=p-(m[w+1]-g),k.add(y);const{id:v,clipPathId:M}=t.drawLayer.draw(k,d.color,d._defaultOpacity,!0);d.#M({highlightOutlines:k.getOutlines(),highlightId:v,clipPathId:M}),d.#E()}return d})()}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),i=Z._colorManager.convert(this.color),r={annotationType:J.HIGHLIGHT,color:i,opacity:this.#f,thickness:this.#m,quadPoints:this.#R(),outlines:this.#_(t),pageIndex:this.pageIndex,rect:t,rotation:this.#T(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#P(r)?null:(r.id=this.annotationElementId,r)}#P(e){const{color:t}=this._initialData;return e.color.some((i,r)=>i!==t[r])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class kt extends Z{#e=0;#t=0;#n=null;#i=new Path2D;#r=!1;#s=null;#l=!1;#c=!1;#h=null;#o=null;#d=0;#a=0;#u=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=J.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){Z.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case G.INK_THICKNESS:kt._defaultThickness=t;break;case G.INK_COLOR:kt._defaultColor=t;break;case G.INK_OPACITY:kt._defaultOpacity=t/100}}updateParams(e,t){switch(e){case G.INK_THICKNESS:this.#f(t);break;case G.INK_COLOR:this.#p(t);break;case G.INK_OPACITY:this.#g(t)}}static get defaultPropertiesToUpdate(){return[[G.INK_THICKNESS,kt._defaultThickness],[G.INK_COLOR,kt._defaultColor||Z._defaultLineColor],[G.INK_OPACITY,Math.round(100*kt._defaultOpacity)]]}get propertiesToUpdate(){return[[G.INK_THICKNESS,this.thickness||kt._defaultThickness],[G.INK_COLOR,this.color||kt._defaultColor||Z._defaultLineColor],[G.INK_OPACITY,Math.round(100*(this.opacity??kt._defaultOpacity))]]}#f(e){const t=r=>{this.thickness=r,this.#L()},i=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#p(e){const t=r=>{this.color=r,this.#C()},i=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(e){const t=r=>{this.opacity=r,this.#C()},i=this.opacity;this.addCommands({cmd:t.bind(this,e/=100),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:G.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#R(),this.#_()),this.isAttachedToDOM||(this.parent.add(this),this.#v()),this.#L()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#h?.disconnect(),this.#h=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions;this.setDimensions(this.width*e,this.height*t)}enableEditMode(){this.#r||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.#S())}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#A())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#m(){const{parentRotation:e,parentDimensions:[t,i]}=this;switch(e){case 90:return[0,i,i,t];case 180:return[t,i,t,i];case 270:return[t,0,i,t];default:return[0,0,t,i]}}#y(){const{ctx:e,color:t,opacity:i,thickness:r,parentScale:s,scaleFactor:a}=this;e.lineWidth=r*s/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${function vN(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}(i)}`}#k(e,t){this.canvas.addEventListener("contextmenu",Dn,{signal:this._uiManager._signal}),this.#A(),this.#s=new AbortController;const i=this._uiManager.combinedSignal(this.#s);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,this.#c||(this.#c=!0,this.#v(),this.thickness||=kt._defaultThickness,this.color||=kt._defaultColor||Z._defaultLineColor,this.opacity??=kt._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#y(),this.#u=()=>{this.#b(),this.#u&&window.requestAnimationFrame(this.#u)},window.requestAnimationFrame(this.#u)}#M(e,t){const[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&t===r)return;const s=this.currentPath;let a=this.#i;if(s.push([e,t]),this.#l=!0,s.length<=2)return a.moveTo(...s[0]),void a.lineTo(e,t);3===s.length&&(this.#i=a=new Path2D,a.moveTo(...s[0])),this.#I(a,...s.at(-3),...s.at(-2),e,t)}#x(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);this.#i.lineTo(...e)}#w(e,t){let i;if(this.#u=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#M(e,t),this.#x(),1!==this.currentPath.length)i=this.#E();else{const l=[e,t];i=[[l,l.slice(),l.slice(),l]]}const r=this.#i,s=this.currentPath;this.currentPath=[],this.#i=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(s),this.paths.push(i),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#R(),this.#_()),this.#L())},mustExec:!0})}#b(){if(!this.#l)return;this.#l=!1;Math.ceil(this.thickness*this.parentScale);const t=this.currentPath.slice(-3),i=t.map(h=>h[0]),r=t.map(h=>h[1]),{ctx:c}=(Math.min(...i),Math.max(...i),Math.min(...r),Math.max(...r),this);c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const h of this.bezierPath2D)c.stroke(h);c.stroke(this.#i),c.restore()}#I(e,t,i,r,s,a,o){const l=(t+r)/2,c=(i+s)/2,h=(r+a)/2,d=(s+o)/2;e.bezierCurveTo(l+2*(r-l)/3,c+2*(s-c)/3,h+2*(r-h)/3,d+2*(s-d)/3,h,d)}#E(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let i,[r,s]=e[0];for(i=1;i<e.length-2;i++){const[u,p]=e[i],[f,g]=e[i+1],m=(u+f)/2,y=(p+g)/2;t.push([[r,s],[r+2*(u-r)/3,s+2*(p-s)/3],[m+2*(u-m)/3,y+2*(p-y)/3],[m,y]]),[r,s]=[m,y]}const[a,o]=e[i],[l,c]=e[i+1];return t.push([[r,s],[r+2*(a-r)/3,s+2*(o-s)/3],[l+2*(a-l)/3,c+2*(o-c)/3],[l,c]]),t}#C(){if(this.isEmpty())return void this.#P();this.#y();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#P();for(const i of this.bezierPath2D)t.stroke(i)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#L(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#S(){if(this.#o)return;this.#o=new AbortController;const e=this._uiManager.combinedSignal(this.#o);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#A(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){0!==e.button||!this.isInEditMode()||this.#r||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#k(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#M(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#T(e)}canvasPointerleave(e){this.#T(e)}#T(e){this.#s?.abort(),this.#s=null,this.#S(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",Dn)},10),this.#w(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#R(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#_(){this.#h=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#h.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#h?.disconnect(),this.#h=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#r}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,r,s,a]=this.#m();if(this.setAt(i,r,0,0),this.setDims(s,a),this.#R(),this.width){const[o,l]=this.parentDimensions;this.setAspectRatio(this.width*o,this.height*l),this.setAt(e*o,t*l,this.width*o,this.height*l),this.#c=!0,this.#v(),this.setDims(this.width*o,this.height*l),this.#C(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#_(),this.div}#v(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#P()}setDimensions(e,t){const i=Math.round(e),r=Math.round(t);if(this.#d===i&&this.#a===r)return;this.#d=i,this.#a=r,this.canvas.style.visibility="hidden";const[s,a]=this.parentDimensions;this.width=e/s,this.height=t/a,this.fixAndSetPosition(),this.#r&&this.#D(e,t),this.#v(),this.#C(),this.canvas.style.visibility="visible",this.fixDims()}#D(e,t){const i=this.#j(),r=(e-i)/this.#t,s=(t-i)/this.#e;this.scaleFactor=Math.min(r,s)}#P(){const e=this.#j()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#N(e){const t=new Path2D;for(let i=0,r=e.length;i<r;i++){const[s,a,o,l]=e[i];0===i&&t.moveTo(...s),t.bezierCurveTo(a[0],a[1],o[0],o[1],l[0],l[1])}return t}static#z(e,t,i){const[r,s,a,o]=t;switch(i){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]+=r,e[l+1]=o-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){const h=e[l];e[l]=e[l+1]+r,e[l+1]=h+s}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=a-e[l],e[l+1]+=s;break;case 270:for(let l=0,c=e.length;l<c;l+=2){const h=e[l];e[l]=a-e[l+1],e[l+1]=o-h}break;default:throw new Error("Invalid rotation")}return e}static#H(e,t,i){const[r,s,a,o]=t;switch(i){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]-=r,e[l+1]=o-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){const h=e[l];e[l]=e[l+1]-s,e[l+1]=h-r}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=a-e[l],e[l+1]-=s;break;case 270:for(let l=0,c=e.length;l<c;l+=2){const h=e[l];e[l]=o-e[l+1],e[l+1]=a-h}break;default:throw new Error("Invalid rotation")}return e}#F(e,t,i,r){const s=[],a=this.thickness/2,o=e*t+a,l=e*i+a;for(const c of this.paths){const h=[],d=[];for(let u=0,p=c.length;u<p;u++){const[f,g,m,y]=c[u];if(f[0]===y[0]&&f[1]===y[1]&&1===p){const C=e*f[0]+o,P=e*f[1]+l;h.push(C,P),d.push(C,P);break}const k=e*f[0]+o,v=e*f[1]+l,M=e*g[0]+o,w=e*g[1]+l,x=e*m[0]+o,A=e*m[1]+l,E=e*y[0]+o,b=e*y[1]+l;0===u&&(h.push(k,v),d.push(k,v)),h.push(M,w,x,A,E,b),d.push(M,w),u===p-1&&d.push(E,b)}s.push({bezier:kt.#z(h,r,this.rotation),points:kt.#z(d,r,this.rotation)})}return s}#V(){let e=1/0,t=-1/0,i=1/0,r=-1/0;for(const s of this.paths)for(const[a,o,l,c]of s){const h=F.bezierBoundingBox(...a,...o,...l,...c);e=Math.min(e,h[0]),i=Math.min(i,h[1]),t=Math.max(t,h[2]),r=Math.max(r,h[3])}return[e,i,t,r]}#j(){return this.#r?Math.ceil(this.thickness*this.parentScale):0}#L(e=!1){if(this.isEmpty())return;if(!this.#r)return void this.#C();const t=this.#V(),i=this.#j();this.#t=Math.max(Z.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(Z.MIN_SIZE,t[3]-t[1]);const r=Math.ceil(i+this.#t*this.scaleFactor),s=Math.ceil(i+this.#e*this.scaleFactor),[a,o]=this.parentDimensions;this.width=r/a,this.height=s/o,this.setAspectRatio(r,s);const l=this.translationX,c=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#v(),this.#C(),this.#d=r,this.#a=s,this.setDims(r,s);const h=e?i/this.scaleFactor/2:0;this.translate(l-this.translationX-h,c-this.translationY-h)}static deserialize(e,t,i){var r=()=>super.deserialize,s=this;return S(function*(){if(e instanceof M2)return null;const a=yield r().call(s,e,t,i);a.thickness=e.thickness,a.color=F.makeHexColor(...e.color),a.opacity=e.opacity;const[o,l]=a.pageDimensions,c=a.width*o,h=a.height*l,d=a.parentScale,u=e.thickness/2;a.#r=!0,a.#d=Math.round(c),a.#a=Math.round(h);const{paths:p,rect:f,rotation:g}=e;for(let{bezier:y}of p){y=kt.#H(y,f,g);const k=[];a.paths.push(k);let v=d*(y[0]-u),M=d*(y[1]-u);for(let x=2,A=y.length;x<A;x+=6){const se=d*(y[x+4]-u),re=d*(y[x+5]-u);k.push([[v,M],[d*(y[x]-u),d*(y[x+1]-u)],[d*(y[x+2]-u),d*(y[x+3]-u)],[se,re]]),v=se,M=re}const w=s.#N(k);a.bezierPath2D.push(w)}const m=a.#V();return a.#t=Math.max(Z.MIN_SIZE,m[2]-m[0]),a.#e=Math.max(Z.MIN_SIZE,m[3]-m[1]),a.#D(c,h),a})()}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=Z._colorManager.convert(this.ctx.strokeStyle);return{annotationType:J.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#F(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class b2 extends Z{#e=null;#t=null;#n=null;#i=null;#r=null;#s="";#l=null;#c=null;#h=null;#o=!1;#d=!1;static _type="stamp";static _editorType=J.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#r=e.bitmapFile}static initialize(e,t){Z.initialize(e,t)}static get supportedTypes(){return oe(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return oe(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(J.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#a(e,t=!1){e?(this.#e=e.bitmap,t||(this.#t=e.id,this.#o=e.isSvg),e.file&&(this.#s=e.file.name),this.#p()):this.remove()}#u(){if(this.#n=null,this._uiManager.enableWaiting(!1),this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e)return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(e=null,t=!0){var i=this;return S(function*(){if(i.hasAltTextData())return null;const{mlManager:r}=i._uiManager;if(!r)throw new Error("No ML.");if(!(yield r.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=e||i.copyCanvas(null,null,!0).imageData,l=yield r.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return yield i.setGuessedAltText(c),t&&!i.hasAltTextData()&&(i.altTextData={alt:c,decorative:!1}),c})()}#f(){var e=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#a(r,!0)).finally(()=>this.#u());if(this.#i){const r=this.#i;return this.#i=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromUrl(r).then(s=>this.#a(s)).finally(()=>this.#u()))}if(this.#r){const r=this.#r;return this.#r=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromFile(r).then(s=>this.#a(s)).finally(()=>this.#u()))}const t=document.createElement("input");t.type="file",t.accept=b2.supportedTypesStr;const i=this._uiManager._signal;this.#n=new Promise(r=>{t.addEventListener("change",S(function*(){if(t.files&&0!==t.files.length){e._uiManager.enableWaiting(!0);const s=yield e._uiManager.imageManager.getFromFile(t.files[0]);e._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:e._uiManager.useNewAltTextFlow}}),e.#a(s)}else e.remove();r()}),{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>this.#u()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&null===this.#l&&this.#f(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#f()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#r||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#p():this.#f(),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,t*r,this.width*i,this.height*r)}return this.div}#p(){const{div:e}=this;let{width:t,height:i}=this.#e;const[r,s]=this.pageDimensions,a=.75;if(this.width)t=this.width*r,i=this.height*s;else if(t>a*r||i>a*s){const h=Math.min(a*r/t,a*s/i);t*=h,i*=h}const[o,l]=this.parentDimensions;this.setDims(t*o/r,i*l/s),this._uiManager.enableWaiting(!1);const c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#y(t,i),this.#M(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&c.setAttribute("aria-label",this.#s)}copyCanvas(e,t,i=!1){e||(e=224);const{width:r,height:s}=this.#e,a=new t2;let o=this.#e,l=r,c=s,h=null;if(t){if(r>t||s>t){const x=Math.min(t/r,t/s);l=Math.floor(r*x),c=Math.floor(s*x)}h=document.createElement("canvas");const u=h.width=Math.ceil(l*a.sx),p=h.height=Math.ceil(c*a.sy);this.#o||(o=this.#m(u,p));const f=h.getContext("2d");f.filter=this._uiManager.hcmFilter;let g="white",m="#cfcfd8";"none"!==this._uiManager.hcmFilter?m="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",m="#42414d");const y=15,k=y*a.sx,v=y*a.sy,M=new OffscreenCanvas(2*k,2*v),w=M.getContext("2d");w.fillStyle=g,w.fillRect(0,0,2*k,2*v),w.fillStyle=m,w.fillRect(0,0,k,v),w.fillRect(k,v,k,v),f.fillStyle=f.createPattern(M,"repeat"),f.fillRect(0,0,u,p),f.drawImage(o,0,0,o.width,o.height,0,0,u,p)}let d=null;if(i){let u,p;if(a.symmetric&&o.width<e&&o.height<e)u=o.width,p=o.height;else if(o=this.#e,r>e||s>e){const m=Math.min(e/r,e/s);u=Math.floor(r*m),p=Math.floor(s*m),this.#o||(o=this.#m(u,p))}const g=new OffscreenCanvas(u,p).getContext("2d",{willReadFrequently:!0});g.drawImage(o,0,0,o.width,o.height,0,0,u,p),d={width:u,height:p,data:g.getImageData(0,0,u,p).data}}return{canvas:h,width:l,height:c,imageData:d}}#g(e,t){const[i,r]=this.parentDimensions;this.width=e/i,this.height=t/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#h&&clearTimeout(this.#h),this.#h=setTimeout(()=>{this.#h=null,this.#y(e,t)},200)}#m(e,t){const{width:i,height:r}=this.#e;let s=i,a=r,o=this.#e;for(;s>2*e||a>2*t;){const l=s,c=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(s,a);h.getContext("2d").drawImage(o,0,0,l,c,0,0,s,a),o=h.transferToImageBitmap()}return o}#y(e,t){const i=new t2,r=Math.ceil(e*i.sx),s=Math.ceil(t*i.sy),a=this.#l;if(!a||a.width===r&&a.height===s)return;a.width=r,a.height=s;const o=this.#o?this.#e:this.#m(r,s),l=a.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(o,0,0,o.width,o.height,0,0,r,s)}getImageForAltText(){return this.#l}#k(e){if(e){if(this.#o){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const t=document.createElement("canvas");return({width:t.width,height:t.height}=this.#e),t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#o){const[t,i]=this.pageDimensions,r=Math.round(this.width*t*ta.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*ta.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,s);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,s),a.transferToImageBitmap()}return structuredClone(this.#e)}#M(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static deserialize(e,t,i){var r=()=>super.deserialize,s=this;return S(function*(){let a=null;if(e instanceof ub){const{data:{rect:m,rotation:y,id:k,structParent:v,popupRef:M},container:w,parent:{page:{pageNumber:x}}}=e,A=w.querySelector("canvas"),E=i.imageManager.getFromCanvas(w.id,A);A.remove();const b=(yield t._structTree.getAriaAttributes(`${Yf}${k}`))?.get("aria-label")||"";a=e={annotationType:J.STAMP,bitmapId:E.id,bitmap:E.bitmap,pageIndex:x-1,rect:m.slice(0),rotation:y,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:b},isSvg:!1,structParent:v,popupRef:M}}const o=yield r().call(s,e,t,i),{rect:l,bitmap:c,bitmapUrl:h,bitmapId:d,isSvg:u,accessibilityData:p}=e;d&&i.imageManager.isValidId(d)?(o.#t=d,c&&(o.#e=c)):o.#i=h,o.#o=u;const[f,g]=o.pageDimensions;return o.width=(l[2]-l[0])/f,o.height=(l[3]-l[1])/g,o.annotationElementId=e.id||null,p&&(o.altTextData=p),o._initialData=a,o.#d=!!a,o})()}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:J.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=this.#k(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const o=this.#x(i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,null===t)return i;t.stamps||=new Map;const a=this.#o?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(t.stamps.has(this.#t)){if(this.#o){const o=t.stamps.get(this.#t);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#k(!1))}}else t.stamps.set(this.#t,{area:a,serialized:i}),i.bitmap=this.#k(!1);return i}#x(e){const{rect:t,pageIndex:i,accessibilityData:{altText:r}}=this._initialData,s=e.rect.every((l,c)=>Math.abs(l-t[c])<1),a=e.pageIndex===i,o=(e.accessibilityData?.alt||"")===r;return{isSame:s&&a&&o,isSameAltText:o}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}let JV=(()=>{class n{#e;#t=!1;#n=null;#i=null;#r=null;#s=new Map;#l=!1;#c=!1;#h=!1;#o=null;#d=null;#a;static _initialized=!1;static#u=new Map([ct,kt,b2,Ye].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:r,structTreeLayer:s,accessibilityManager:a,annotationLayer:o,drawLayer:l,textLayer:c,viewport:h,l10n:d}){const u=[...n.#u.values()];if(!n._initialized){n._initialized=!0;for(const p of u)p.initialize(d,t)}t.registerEditorTypes(u),this.#a=t,this.pageIndex=i,this.div=r,this.#e=a,this.#n=o,this.viewport=h,this.#o=c,this.drawLayer=l,this._structTree=s,this.#a.addLayer(this)}get isEmpty(){return 0===this.#s.size}get isInvisible(){return this.isEmpty&&this.#a.getMode()===J.NONE}updateToolbar(t){this.#a.updateToolbar(t)}updateMode(t=this.#a.getMode()){switch(this.#y(),t){case J.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case J.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case J.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const r of n.#u.values())i.toggle(`${r._type}Editing`,t===r._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#o?.div}addInkEditorIfNeeded(t){if(this.#a.getMode()===J.INK){if(!t)for(const r of this.#s.values())if(r.isEmpty())return void r.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){this.#a.setEditingState(t)}addCommands(t){this.#a.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}enable(){var t=this;return S(function*(){t.div.tabIndex=0,t.togglePointerEvents(!0);const i=new Set;for(const s of t.#s.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(t.#a.removeChangedExistingAnnotation(s),i.add(s.annotationElementId));if(!t.#n)return;const r=t.#n.getEditableAnnotations();for(const s of r){if(s.hide(),t.#a.isDeletedAnnotationElement(s.data.id)||i.has(s.data.id))continue;const a=yield t.deserialize(s);a&&(t.addOrRebuild(a),a.enableEditing())}})()}disable(){this.#h=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,i=new Map;for(const s of this.#s.values())if(s.disableEditing(),s.annotationElementId){if(null!==s.serialize()){t.set(s.annotationElementId,s);continue}i.set(s.annotationElementId,s),this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(this.#a.isDeletedAnnotationElement(o))continue;let l=i.get(o);l?(l.resetAnnotationElement(a),l.show(!1),a.show()):(l=t.get(o),l&&(this.#a.addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show())}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of n.#u.values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#h=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#a.getActive()!==t&&this.#a.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#o?.div&&!this.#d){this.#d=new AbortController;const t=this.#a.combinedSignal(this.#d);this.#o.div.addEventListener("pointerdown",this.#f.bind(this),{signal:t}),this.#o.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#o?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#o.div.classList.remove("highlighting"))}#f(t){this.#a.unselectAll();const{target:i}=t;if(i===this.#o.div||("img"===i.getAttribute("role")||i.classList.contains("endOfContent"))&&this.#o.div.contains(i)){const{isMac:r}=jt.platform;if(0!==t.button||t.ctrlKey&&r)return;this.#a.showAllEditors("highlight",!0,!0),this.#o.div.classList.add("free"),this.toggleDrawing(),Ye.startHighlighting(this,"ltr"===this.#a.direction,{target:this.#o.div,x:t.x,y:t.y}),this.#o.div.addEventListener("pointerup",()=>{this.#o.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#a._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#a.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:i}=t;i&&this.#a.isDeletedAnnotationElement(i)&&this.#a.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#h&&t.annotationElementId&&this.#a.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#a.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#a.addDeletedAnnotationElement(t.annotationElementId),Z.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#a.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#a.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#a._signal}),i.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#a.getId()}get#p(){return n.#u.get(this.#a.getMode())}combinedSignal(t){return this.#a.combinedSignal(t)}#g(t){const i=this.#p;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#p?.canCreateNewEmptyEditor()}pasteEditor(t,i){this.#a.updateToolbar(t),this.#a.updateMode(t);const{offsetX:r,offsetY:s}=this.#m(),a=this.getNextId(),o=this.#g({parent:this,id:a,x:r,y:s,uiManager:this.#a,isCentered:!0,...i});o&&this.add(o)}deserialize(t){var i=this;return S(function*(){return(yield n.#u.get(t.annotationType??t.annotationEditorType)?.deserialize(t,i,i.#a))||null})()}createAndAddNewEditor(t,i,r={}){const s=this.getNextId(),a=this.#g({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#a,isCentered:i,...r});return a&&this.add(a),a}#m(){const{x:t,y:i,width:r,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,t),o=Math.max(0,i),h=(a+Math.min(window.innerWidth,t+r))/2-t,d=(o+Math.min(window.innerHeight,i+s))/2-i,[u,p]=this.viewport.rotation%180==0?[h,d]:[d,h];return{offsetX:u,offsetY:p}}addNewEditor(){this.createAndAddNewEditor(this.#m(),!0)}setSelected(t){this.#a.setSelected(t)}toggleSelected(t){this.#a.toggleSelected(t)}unselect(t){this.#a.unselect(t)}pointerup(t){const{isMac:i}=jt.platform;if(!(0!==t.button||t.ctrlKey&&i)&&t.target===this.div&&this.#l){if(this.#l=!1,!this.#t)return void(this.#t=!0);if(this.#a.getMode()===J.STAMP)return void this.#a.unselectAll();this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#a.getMode()===J.HIGHLIGHT&&this.enableTextSelection(),this.#l)return void(this.#l=!1);const{isMac:i}=jt.platform;if(0!==t.button||t.ctrlKey&&i||t.target!==this.div)return;this.#l=!0;const r=this.#a.getActive();this.#t=!r||r.isEmpty()}findNewParent(t,i,r){const s=this.#a.findParent(i,r);return null!==s&&s!==this&&(s.changeParent(t),!0)}destroy(){this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#a.removeLayer(this)}#y(){this.#c=!0;for(const t of this.#s.values())t.isEmpty()&&t.remove();this.#c=!1}render({viewport:t}){this.viewport=t,Nr(this.div,t);for(const i of this.#a.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#a.commitOrRemove(),this.#y();const i=this.viewport.rotation,r=t.rotation;if(this.viewport=t,Nr(this.div,{rotation:r}),i!==r)for(const s of this.#s.values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#a.viewParameters.realScale}}return n})();class St{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(this.#e){if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}else this.#e=e}static get _svgFactory(){return oe(this,"_svgFactory",new k2)}static#r(e,{x:t=0,y:i=0,width:r=1,height:s=1}={}){const{style:a}=e;a.top=100*i+"%",a.left=100*t+"%",a.width=100*r+"%",a.height=100*s+"%"}#s(e){const t=St._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),St.#r(t,e),t}#l(e,t){const i=St._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=St._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r}draw(e,t,i,r=!1){const s=this.#t++,a=this.#s(e.box);a.classList.add(...e.classNamesForDrawing);const o=St._svgFactory.createElement("defs");a.append(o);const l=St._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),r&&this.#i.set(s,l);const h=this.#l(o,c),d=St._svgFactory.createElement("use");return a.append(d),a.setAttribute("fill",t),a.setAttribute("fill-opacity",i),d.setAttribute("href",`#${c}`),this.#n.set(s,a),{id:s,clipPathId:`url(#${h})`}}drawOutline(e){const t=this.#t++,i=this.#s(e.box);i.classList.add(...e.classNamesForOutlining);const r=St._svgFactory.createElement("defs");i.append(r);const s=St._svgFactory.createElement("path");r.append(s);const a=`path_p${this.pageIndex}_${t}`;let o;if(s.setAttribute("id",a),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke"),e.mustRemoveSelfIntersections){const h=St._svgFactory.createElement("mask");r.append(h),o=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",o),h.setAttribute("maskUnits","objectBoundingBox");const d=St._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const u=St._svgFactory.createElement("use");h.append(u),u.setAttribute("href",`#${a}`),u.setAttribute("stroke","none"),u.setAttribute("fill","black"),u.setAttribute("fill-rule","nonzero"),u.classList.add("mask")}const l=St._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.#n.set(t,i),t}finalizeLine(e,t){const i=this.#i.get(e);this.#i.delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#i.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){St.#r(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#i.delete(e),null!==this.#e&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}}var ej=Y.AbortException,tj=Y.AnnotationEditorLayer,nj=Y.AnnotationEditorParamsType,yb=Y.AnnotationEditorType,ij=Y.AnnotationEditorUIManager,rj=Y.AnnotationLayer,sj=Y.AnnotationMode,aj=Y.ColorPicker,oj=Y.DOMSVGFactory,lj=Y.DrawLayer,cj=Y.FeatureTest,mb=Y.GlobalWorkerOptions,hj=Y.ImageKind,dj=Y.InvalidPDFException,uj=Y.MissingPDFException,pj=Y.OPS,fj=Y.OutputScale,gj=Y.PDFDataRangeTransport,yj=Y.PDFDateString,mj=Y.PDFWorker,kj=Y.PasswordResponses,vj=Y.PermissionFlag,Mj=Y.PixelsPerInch,wj=Y.RenderingCancelledException,bj=Y.TextLayer,xj=Y.UnexpectedResponseException,Cj=Y.Util,kb=Y.VerbosityLevel,_j=Y.XfaLayer,Aj=Y.build,Ej=Y.createValidAbsoluteUrl,Sj=Y.fetchData,vb=Y.getDocument,Dj=Y.getFilenameFromUrl,Ij=Y.getPdfFilenameFromUrl,Tj=Y.getXfaPageViewport,Pj=Y.isDataScheme,Rj=Y.isPdfFile,Lj=Y.noContextMenu,Oj=Y.normalizeUnicode,Fj=Y.setLayerDimensions,Nj=Y.shadow,td=Y.version;function Mb(n,e){this.v=n,this.k=e}function wb(n){return new Mb(n,0)}function rl(n){var e,t;function i(s,a){try{var o=n[s](a),l=o.value,c=l instanceof Mb;Promise.resolve(c?l.v:l).then(function(h){if(c){var d="return"===s?"return":"next";if(!l.k||h.done)return i(d,h);h=n[d](h).value}r(o.done?"return":"normal",h)},function(h){i("throw",h)})}catch(h){r("throw",h)}}function r(s,a){switch(s){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(s,a){return new Promise(function(o,l){var c={key:s,arg:a,resolve:o,reject:l,next:null};t?t=t.next=c:(e=t=c,i(s,a))})},"function"!=typeof n.return&&(this.return=void 0)}function bb(n){return function(){return new rl(n.apply(this,arguments))}}function nd(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(nd=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new nd(n)}rl.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},rl.prototype.next=function(n){return this._invoke("next",n)},rl.prototype.throw=function(n){return this._invoke("throw",n)},rl.prototype.return=function(n){return this._invoke("return",n)};var sl={d:(n,e)=>{for(var t in e)sl.o(e,t)&&!sl.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},Ve=globalThis.pdfjsViewer={};sl.d(Ve,{AnnotationLayerBuilder:()=>Hb,DownloadManager:()=>LH,EventBus:()=>T2,FindState:()=>dr,GenericL10n:()=>zi,LinkTarget:()=>zr,PDFFindController:()=>MH,PDFHistory:()=>Sz,PDFLinkService:()=>od,PDFPageView:()=>dx,PDFScriptingManager:()=>zz,PDFSinglePageViewer:()=>$z,PDFViewer:()=>fx,ProgressBar:()=>Kj,RenderingStates:()=>Be,ScrollMode:()=>he,SimpleLinkService:()=>E2,SpreadMode:()=>Dt,StructTreeLayerBuilder:()=>cx,TextLayerBuilder:()=>la,XfaLayerBuilder:()=>hx,parseQueryString:()=>id});const Be={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},he={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},Dt={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function Eb(n,e,t=!1){let i=n.offsetParent;if(!i)return void console.error("offsetParent is not set -- cannot scroll");let r=n.offsetTop+n.clientTop,s=n.offsetLeft+n.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||t&&(i.classList.contains("markedContent")||"hidden"===getComputedStyle(i).overflow);)if(r+=i.offsetTop,s+=i.offsetLeft,i=i.offsetParent,!i)return;e&&(void 0!==e.top&&(r+=e.top),void 0!==e.left&&(s+=e.left,i.scrollLeft=s)),i.scrollTop=r}function id(n){const e=new Map;for(const[t,i]of new URLSearchParams(n))e.set(t.toLowerCase(),i);return e}const Sb=/[\x00-\x1F]/g;function al(n,e=!1){return Sb.test(n)?e?n.replaceAll(Sb,t=>"\0"===t?"":" "):n.replaceAll("\0",""):n}function ol(n,e,t=0){let i=t,r=n.length-1;if(r<0||!e(n[r]))return n.length;if(e(n[i]))return i;for(;i<r;){const s=i+r>>1;e(n[s])?r=s:i=s+1}return i}function Db(n){if(Math.floor(n)===n)return[n,1];const e=1/n;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const i=n>1?e:n;let l,r=0,s=1,a=1,o=1;for(;;){const c=r+a,h=s+o;if(h>8)break;i<=c/h?(a=c,o=h):(r=c,s=h)}return l=i-r/s<a/o-i?i===n?[r,s]:[s,r]:i===n?[a,o]:[o,a],l}function rd(n,e){return n-n%e}function Ib(n){return Number.isInteger(n)&&n%90==0}function Tb(n){return n.width<=n.height}new Promise(function(n){window.requestAnimationFrame(n)});const Xj=document.documentElement.style;class Kj{#e=null;#t=null;#n=0;#i=null;#r=!0;constructor(e){this.#e=e.classList,this.#i=e.style}get percent(){return this.#n}set percent(e){this.#n=function Yj(n,e,t){return Math.min(Math.max(n,e),t)}(e,0,100),isNaN(e)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`))}setWidth(e){if(!e)return;const i=e.parentNode.offsetWidth-e.offsetWidth;i>0&&this.#i.setProperty("--progressBar-end-offset",`${i}px`)}setDisableAutoFetch(e=5e3){100===this.#n||isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#r&&(this.#r=!1,this.#e.add("hidden"))}show(){this.#r||(this.#r=!0,this.#e.remove("hidden"))}}const sd=function(){const n=document.createElement("div");return n.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)","calc(1320px)"===n.style.width?Math.fround:e=>e}();function ad(n){return function Jj(n){return n<11904}(n)?function eH(n){return 0==(65408&n)}(n)?function iH(n){return 32===n||9===n||13===n||10===n}(n)?0:function tH(n){return n>=97&&n<=122||n>=65&&n<=90}(n)||function nH(n){return n>=48&&n<=57}(n)||95===n?1:2:function lH(n){return 3584==(65408&n)}(n)?7:160===n?0:1:function rH(n){return n>=13312&&n<=40959||n>=63744&&n<=64255}(n)?3:function sH(n){return n>=12448&&n<=12543}(n)?4:function aH(n){return n>=12352&&n<=12447}(n)?5:function oH(n){return n>=65376&&n<=65439}(n)?6:1}let Pb;const dr={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},Rb={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},Lb=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let Ob;const pH=/\p{M}+/gu,fH=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,gH=/([^\p{M}])\p{M}*$/u,yH=/^\p{M}*([^\p{M}])/u,mH=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,Fb=new Map,Nb=new Map;let C2=null,_2=null;function A2(n){const e=[];let t,i;for(;null!==(t=mH.exec(n));){let{index:p}=t;for(const f of t[0]){let g=Fb.get(f);g||(g=f.normalize("NFD").length,Fb.set(f,g)),e.push([g,p++])}}if(0===e.length&&C2)i=C2;else if(e.length>0&&_2)i=_2;else{const k=`([${Object.keys(Rb).join("")}])|([${function cH(){return Pb||="\xa0\xa8\xaa\xaf\xb2-\xb5\xb8-\xba\xbc-\xbe\u0132-\u0133\u013f-\u0140\u0149\u017f\u01c4-\u01cc\u01f1-\u01f3\u02b0-\u02b8\u02d8-\u02dd\u02e0-\u02e4\u0374\u037a\u037e\u0384-\u0385\u0387\u03d0-\u03d6\u03f0-\u03f2\u03f4-\u03f5\u03f9\u0587\u0675-\u0678\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e33\u0eb3\u0edc-\u0edd\u0f0c\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u10fc\u1d2c-\u1d2e\u1d30-\u1d3a\u1d3c-\u1d4d\u1d4f-\u1d6a\u1d78\u1d9b-\u1dbf\u1e9a-\u1e9b\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbd-\u1fc1\u1fc9\u1fcb\u1fcd-\u1fcf\u1fd3\u1fdb\u1fdd-\u1fdf\u1fe3\u1feb\u1fed-\u1fef\u1ff9\u1ffb\u1ffd-\u1ffe\u2000-\u200a\u2011\u2017\u2024-\u2026\u202f\u2033-\u2034\u2036-\u2037\u203c\u203e\u2047-\u2049\u2057\u205f\u2070-\u2071\u2074-\u208e\u2090-\u209c\u20a8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211d\u2120-\u2122\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213b-\u2140\u2145-\u2149\u2150-\u217f\u2189\u222c-\u222d\u222f-\u2230\u2329-\u232a\u2460-\u24ea\u2a0c\u2a74-\u2a76\u2adc\u2c7c-\u2c7d\u2d6f\u2e9f\u2ef3\u2f00-\u2fd5\u3000\u3036\u3038-\u303a\u309b-\u309c\u309f\u30ff\u3131-\u318e\u3192-\u319f\u3200-\u321e\u3220-\u3247\u3250-\u327e\u3280-\u33ff\ua69c-\ua69d\ua770\ua7f2-\ua7f4\ua7f8-\ua7f9\uab5c-\uab5f\uab69\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfc\ufe10-\ufe19\ufe30-\ufe44\ufe47-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff01-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\uffe0-\uffe6",Pb}()}])|((?:\u3099|\u309a)\\n)|(\\p{M}+(?:-\\n)?)|(\\p{Ll}-\\n\\p{Lu})|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30ff])\\n)|(\\n)`;i=0===e.length?C2=new RegExp(k+"|(\\u0000)","gum"):_2=new RegExp(k+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const r=[];for(;null!==(t=pH.exec(n));)r.push([t[0].length,t.index]);let s=n.normalize("NFD");const a=[[0,0]];let o=0,l=0,c=0,h=0,d=0,u=!1;return s=s.replace(i,(p,f,g,m,y,k,v,M,w,x,A)=>{if(A-=h,f){const E=Rb[f],b=E.length;for(let C=1;C<b;C++)a.push([A-c+C,c-C]);return c-=b-1,E}if(g){let E=Nb.get(g);E||(E=g.normalize("NFKC"),Nb.set(g,E));const b=E.length;for(let C=1;C<b;C++)a.push([A-c+C,c-C]);return c-=b-1,E}if(m)return u=!0,A+d===r[o]?.[1]?++o:(a.push([A-1-c+1,c-1]),c-=1,h+=1),a.push([A-c+1,c]),h+=1,d+=1,m.charAt(0);if(y){const E=y.endsWith("\n"),b=E?y.length-2:y.length;u=!0;let C=b;A+d===r[o]?.[1]&&(C-=r[o][0],++o);for(let P=1;P<=C;P++)a.push([A-1-c+P,c-P]);return c-=C,h+=C,E?(a.push([(A+=b-1)-c+1,1+c]),c+=1,h+=1,d+=1,y.slice(0,b)):y}if(k)return a.push([A-c+3,1+c]),c+=1,h+=1,d+=1,k.replace("\n","");if(v)return a.push([A-c+(v.length-2),1+c]),c+=1,h+=1,d+=1,v.slice(0,-2);if(M)return a.push([A-c+(M.length-1),c]),h+=1,d+=1,M.slice(0,-1);if(w)return a.push([A-c+1,c-1]),c-=1,h+=1,d+=1," ";if(A+d===e[l]?.[1]){const E=e[l][0]-1;++l;for(let b=1;b<=E;b++)a.push([A-(c-b),c-b]);c-=E,h+=E}return x}),a.push([s.length,c]),[s,a,u]}class MH{#e=null;#t=!0;#n=0;constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:i=!0}){this._linkService=e,this._eventBus=t,this.#t=i,this.onIsPageVisible=null,this.#r(),t._on("find",this.#i.bind(this)),t._on("findbarclose",this.#k.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#r(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#i(e){if(!e)return;const t=this._pdfDocument,{type:i}=e;(null===this.#e||this.#l(e))&&(this._dirtyMatch=!0),this.#e=e,"highlightallchange"!==i&&this.#w(dr.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this.#d();const r=!this._highlightMatches,s=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?this.#f():"again"===i?(this.#f(),r&&this.#e.highlightAll&&this.#u()):"highlightallchange"===i?(s?this.#f():this._highlightMatches=!0,this.#u()):this.#f():this._findTimeout=setTimeout(()=>{this.#f(),this._findTimeout=null},250)})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:i=-1,matchIndex:r=-1}){this._scrollMatches&&e&&-1!==r&&r===this._selected.matchIdx&&-1!==i&&i===this._selected.pageIdx&&(this._scrollMatches=!1,Eb(e,{top:-50,left:t+-400},!0))}#r(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#s(){const{query:e}=this.#e;return"string"==typeof e?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=A2(e)),this._normalizedQuery):(e||[]).filter(t=>!!t).map(t=>A2(t)[0])}#l(e){const t=e.query,i=this.#e.query,r=typeof t;if(r!==typeof i)return!0;if("string"===r){if(t!==i)return!0}else if(JSON.stringify(t)!==JSON.stringify(i))return!0;switch(e.type){case"again":const a=this._selected.pageIdx+1,o=this._linkService;return a>=1&&a<=o.pagesCount&&a!==o.page&&!(this.onIsPageVisible?.(a)??1);case"highlightallchange":return!1}return!0}#c(e,t,i){let r=e.slice(0,t).match(gH);if(r){const s=e.charCodeAt(t),a=r[1].charCodeAt(0);if(ad(s)===ad(a))return!1}if(r=e.slice(t+i).match(yH),r){const s=e.charCodeAt(t+i-1),a=r[1].charCodeAt(0);if(ad(s)===ad(a))return!1}return!0}#h(e,t){const{matchDiacritics:i}=this.#e;let r=!1;return(e=e.replaceAll(fH,(a,o,l,c,h,d)=>o?`[ ]*\\${o}[ ]*`:l?`[ ]*${l}[ ]*`:c?"[ ]+":i?h||d:h?Lb.has(h.charCodeAt(0))?h:"":t?(r=!0,`${d}\\p{M}*`):d)).endsWith("[ ]*")&&(e=e.slice(0,e.length-4)),i&&t&&(Ob||=String.fromCharCode(...Lb),r=!0,e=`${e}(?=[${Ob}]|[^\\p{M}]|$)`),[r,e]}#o(e){const t=this.#s;if(0===t.length)return;const r=this.match(t,this._pageContents[e],e),s=this._pageMatches[e]=[],a=this._pageMatchesLength[e]=[],o=this._pageDiffs[e];r?.forEach(({index:c,length:h})=>{const[d,u]=function vH(n,e,t){if(!n)return[e,t];const i=e,r=e+t-1;let s=ol(n,h=>h[0]>=i);n[s][0]>i&&--s;let a=ol(n,h=>h[0]>=r,s);n[a][0]>r&&--a;const o=i+n[s][1];return[o,r+n[a][1]+1-o]}(o,c,h);u&&(s.push(d),a.push(u))}),this.#e.highlightAll&&this.#a(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#g());const l=s.length;this._matchesCountTotal+=l,this.#t?l>0&&this.#x():++this.#n===this._linkService.pagesCount&&this.#x()}match(e,t,i){const r=this._hasDiacritics[i];let s=!1;if("string"==typeof e?[s,e]=this.#h(e,r):e=e.sort().reverse().map(d=>{const[u,p]=this.#h(d,r);return s||=u,`(${p})`}).join("|"),!e)return;const{caseSensitive:a,entireWord:o}=this.#e;e=new RegExp(e,`g${s?"u":""}${a?"":"i"}`);const c=[];let h;for(;null!==(h=e.exec(t));)o&&!this.#c(t,h.index,h[0].length)||c.push({index:h.index,length:h[0].length});return c}#d(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();const t={disableNormalization:!0};for(let i=0,r=this._linkService.pagesCount;i<r;i++){const{promise:s,resolve:a}=Promise.withResolvers();this._extractTextPromises[i]=s,e=e.then(()=>this._pdfDocument.getPage(i+1).then(o=>o.getTextContent(t)).then(o=>{const l=[];for(const c of o.items)l.push(c.str),c.hasEOL&&l.push("\n");[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=A2(l.join("")),a()},o=>{console.error(`Unable to get text content for page ${i+1}`,o),this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,a()}))}}#a(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#u(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#f(){const e=this.#e.findPrevious,t=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#u();for(let a=0;a<i;a++)this._pendingFindMatches.has(a)||(this._pendingFindMatches.add(a),this._extractTextPromises[a].then(()=>{this._pendingFindMatches.delete(a),this.#o(a)}))}if(0===this.#s.length)return void this.#w(dr.FOUND);if(this._resumePageIdx)return;const s=this._offset;if(this._pagesToSearch=i,null!==s.matchIdx){if(!e&&s.matchIdx+1<this._pageMatches[s.pageIdx].length||e&&s.matchIdx>0)return s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,void this.#y(!0);this.#m(e)}this.#g()}#p(e){const t=this._offset,i=e.length,r=this.#e.findPrevious;return i?(t.matchIdx=r?i-1:0,this.#y(!0),!0):(this.#m(r),!!(t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0))&&(this.#y(!1),!0))}#g(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let e=null;do{const t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this.#p(e))}#m(e){const t=this._offset,i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=i||t.pageIdx<0)&&(t.pageIdx=e?i-1:0,t.wrapped=!0)}#y(e=!1){let t=dr.NOT_FOUND;const i=this._offset.wrapped;if(this._offset.wrapped=!1,e){const r=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=i?dr.WRAPPED:dr.FOUND,-1!==r&&r!==this._selected.pageIdx&&this.#a(r)}this.#w(t,this.#e.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#a(this._selected.pageIdx))}#k(e){const t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#w(dr.FOUND),this._highlightMatches=!1,this.#u())})}#M(){const{pageIdx:e,matchIdx:t}=this._selected;let i=0,r=this._matchesCountTotal;if(-1!==t){for(let s=0;s<e;s++)i+=this._pageMatches[s]?.length||0;i+=t+1}return(i<1||i>r)&&(i=r=0),{current:i,total:r}}#x(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#M()})}#w(e,t=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||e===dr.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,entireWord:this.#e?.entireWord??null,matchesCount:this.#M(),rawQuery:this.#e?.query??null})}}const zr={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class od{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:r=!1}={}){this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=i,this._ignoreDestinationZoom=r,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}goToDestination(e){var t=this;return S(function*(){if(!t.pdfDocument)return;let i,r,s;if("string"==typeof e?(i=e,r=yield t.pdfDocument.getDestination(e)):(i=null,r=yield e),!Array.isArray(r))return void console.error(`goToDestination: "${r}" is not a valid destination array, for dest="${e}".`);const[a]=r;if(a&&"object"==typeof a){if(s=t.pdfDocument.cachedPageNumber(a),!s)try{s=(yield t.pdfDocument.getPageIndex(a))+1}catch{return void console.error(`goToDestination: "${a}" is not a valid page reference, for dest="${e}".`)}}else Number.isInteger(a)&&(s=a+1);!s||s<1||s>t.pagesCount?console.error(`goToDestination: "${s}" is not a valid page number, for dest="${e}".`):(t.pdfHistory&&(t.pdfHistory.pushCurrentPosition(),t.pdfHistory.push({namedDest:i,explicitDest:r,pageNumber:s})),t.pdfViewer.scrollPageIntoView({pageNumber:s,destArray:r,ignoreDestinationZoom:t._ignoreDestinationZoom}))})()}goToPage(e){if(!this.pdfDocument)return;const t="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;Number.isInteger(t)&&t>0&&t<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})):console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`)}addLinkAttributes(e,t,i=!1){if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must provided.');const r=i?zr.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let a="";switch(r){case zr.NONE:break;case zr.SELF:a="_self";break;case zr.BLANK:a="_blank";break;case zr.PARENT:a="_parent";break;case zr.TOP:a="_top"}e.target=a,e.rel="string"==typeof s?s:"noopener noreferrer nofollow"}getDestinationHash(e){if("string"==typeof e){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let t,i;if(e.includes("=")){const r=id(e);if(r.has("search")){const s=r.get("search").replaceAll('"',""),a="true"===r.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:a?s:s.match(/\S+/g)})}if(r.has("page")&&(t=0|r.get("page")||1),r.has("zoom")){const s=r.get("zoom").split(","),a=s[0],o=parseFloat(a);a.includes("Fit")?"Fit"===a||"FitB"===a?i=[null,{name:a}]:"FitH"===a||"FitBH"===a||"FitV"===a||"FitBV"===a?i=[null,{name:a},s.length>1?0|s[1]:null]:"FitR"===a?5!==s.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:a},0|s[1],0|s[2],0|s[3],0|s[4]]:console.error(`PDFLinkService.setHash: "${a}" is not a valid zoom value.`):i=[null,{name:"XYZ"},s.length>1?0|s[1]:null,s.length>2?0|s[2]:null,o?o/100:a]}return i?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:i,allowNegativeOffset:!0}):t&&(this.page=t),r.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:r.get("pagemode")}),void(r.has("nameddest")&&this.goToDestination(r.get("nameddest")))}i=unescape(e);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}"string"==typeof i||od.#e(i)?this.goToDestination(i):console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}}executeSetOCGState(e){var t=this;return S(function*(){if(!t.pdfDocument)return;const i=t.pdfDocument,r=yield t.pdfViewer.optionalContentConfigPromise;i===t.pdfDocument&&(r.setOCGState(e),t.pdfViewer.optionalContentConfigPromise=Promise.resolve(r))})()}static#e(e){if(!Array.isArray(e)||e.length<2)return!1;const[t,i,...r]=e;if(("object"!=typeof t||!Number.isInteger(t?.num)||!Number.isInteger(t?.gen))&&!Number.isInteger(t)||"object"!=typeof i||"string"!=typeof i?.name)return!1;const s=r.length;let a=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return 0===s;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(4!==s)return!1;a=!1;break;default:return!1}for(const o of r)if(!("number"==typeof o||a&&null===o))return!1;return!0}}class E2 extends od{setDocument(e,t=null){}}const{AbortException:bH,AnnotationEditorLayer:xH,AnnotationEditorType:gn,AnnotationEditorUIManager:CH,AnnotationLayer:_H,AnnotationMode:Vi,createValidAbsoluteUrl:AH,DrawLayer:EH,fetchData:Vb,getPdfFilenameFromUrl:SH,isPdfFile:DH,normalizeUnicode:IH,OutputScale:TH,PermissionFlag:ld,PixelsPerInch:ji,RenderingCancelledException:S2,setLayerDimensions:PH,shadow:cd,TextLayer:RH,version:jb,XfaLayer:D2}=globalThis.pdfjsLib;class Hb{#e=null;#t=null;constructor({pdfPage:e,linkService:t,downloadManager:i,annotationStorage:r=null,imageResourcesPath:s="",renderForms:a=!0,enableScripting:o=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:c=null,annotationCanvasMap:h=null,accessibilityManager:d=null,annotationEditorUIManager:u=null,onAppend:p=null}){this.pdfPage=e,this.linkService=t,this.downloadManager=i,this.imageResourcesPath=s,this.renderForms=a,this.annotationStorage=r,this.enableScripting=o,this._hasJSActionsPromise=l||Promise.resolve(!1),this._fieldObjectsPromise=c||Promise.resolve(null),this._annotationCanvasMap=h,this._accessibilityManager=d,this._annotationEditorUIManager=u,this.#e=p,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=t.eventBus}render(e,t,i="display"){var r=this;return S(function*(){if(r.div){if(r._cancelled||!r.annotationLayer)return;return void r.annotationLayer.update({viewport:e.clone({dontFlip:!0})})}const[s,a,o]=yield Promise.all([r.pdfPage.getAnnotations({intent:i}),r._hasJSActionsPromise,r._fieldObjectsPromise]);if(r._cancelled)return;const l=r.div=document.createElement("div");l.className="annotationLayer",r.#e?.(l),0!==s.length?(r.annotationLayer=new _H({div:l,accessibilityManager:r._accessibilityManager,annotationCanvasMap:r._annotationCanvasMap,annotationEditorUIManager:r._annotationEditorUIManager,page:r.pdfPage,viewport:e.clone({dontFlip:!0}),structTreeLayer:t?.structTreeLayer||null}),yield r.annotationLayer.render({annotations:s,imageResourcesPath:r.imageResourcesPath,renderForms:r.renderForms,linkService:r.linkService,downloadManager:r.downloadManager,annotationStorage:r.annotationStorage,enableScripting:r.enableScripting,hasJSActions:a,fieldObjects:o}),r.linkService.isInPresentationMode&&r.#n(3),r.#t||(r.#t=new AbortController,r._eventBus?._on("presentationmodechanged",c=>{r.#n(c.state)},{signal:r.#t.signal}))):r.hide()})()}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#n(e){if(!this.div)return;let t=!1;switch(e){case 3:t=!0;break;case 1:break;default:return}for(const i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=t)}}function zb(n,e){const t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=n,t.target="_parent","download"in t&&(t.download=e),(document.body||document.documentElement).append(t),t.click(),t.remove()}class LH{#e=new WeakMap;downloadData(e,t,i){zb(URL.createObjectURL(new Blob([e],{type:i})),t)}openOrDownloadData(e,t,i=null){const s=DH(t)?"application/pdf":"";return this.downloadData(e,t,s),!1}download(e,t,i){let r;if(e)r=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!AH(t,"http://example.com"))return void console.error(`download - not a valid URL: ${t}`);r=t+"#pdfjs.action=download"}zb(r,i)}}const Bb_EVENT="event",Bb_TIMEOUT="timeout";function I2(){return(I2=S(function*({target:n,name:e,delay:t=0}){if("object"!=typeof n||!e||"string"!=typeof e||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:i,resolve:r}=Promise.withResolvers(),s=new AbortController;function a(c){s.abort(),clearTimeout(l),r(c)}n[n instanceof T2?"_on":"addEventListener"](e,a.bind(null,Bb_EVENT),{signal:s.signal});const l=setTimeout(a.bind(null,Bb_TIMEOUT),t);return i})).apply(this,arguments)}class T2{#e=Object.create(null);on(e,t,i=null){this._on(e,t,{external:!0,once:i?.once,signal:i?.signal})}off(e,t,i=null){this._off(e,t)}dispatch(e,t){const i=this.#e[e];if(!i||0===i.length)return;let r;for(const{listener:s,external:a,once:o}of i.slice(0))o&&this._off(e,s),a?(r||=[]).push(s):s(t);if(r){for(const s of r)s(t);r=null}}_on(e,t,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:a}=i;if(a.aborted)return void console.error("Cannot use an `aborted` signal.");const o=()=>this._off(e,t);r=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}(this.#e[e]||=[]).push({listener:t,external:!0===i?.external,once:!0===i?.once,rmAbort:r})}_off(e,t,i=null){const r=this.#e[e];if(r)for(let s=0,a=r.length;s<a;s++){const o=r[s];if(o.listener===t)return o.rmAbort?.(),void r.splice(s,1)}}}class hd{constructor(e){this.value=e}valueOf(){return this.value}}class nt extends hd{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class Hi extends hd{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}}class ll extends hd{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}}const qb=100,FH="\u2068",NH="\u2069";function VH(n,e,t){return t===e||t instanceof Hi&&e instanceof Hi&&t.value===e.value||e instanceof Hi&&"string"==typeof t&&t===n.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value)}function Ub(n,e,t){return e[t]?oa(n,e[t].value):(n.reportError(new RangeError("No default")),new nt)}function P2(n,e){const t=[],i=Object.create(null);for(const r of e)"narg"===r.type?i[r.name]=cl(n,r.value):t.push(cl(n,r));return{positional:t,named:i}}function cl(n,e){switch(e.type){case"str":return e.value;case"num":return new Hi(e.value,{minimumFractionDigits:e.precision});case"var":return function jH(n,{name:e}){let t;if(n.params){if(!Object.prototype.hasOwnProperty.call(n.params,e))return new nt(`$${e}`);t=n.params[e]}else{if(!n.args||!Object.prototype.hasOwnProperty.call(n.args,e))return n.reportError(new ReferenceError(`Unknown variable: $${e}`)),new nt(`$${e}`);t=n.args[e]}if(t instanceof hd)return t;switch(typeof t){case"string":return t;case"number":return new Hi(t);case"object":if(t instanceof Date)return new ll(t.getTime());default:return n.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new nt(`$${e}`)}}(n,e);case"mesg":return function HH(n,{name:e,attr:t}){const i=n.bundle._messages.get(e);if(!i)return n.reportError(new ReferenceError(`Unknown message: ${e}`)),new nt(e);if(t){const r=i.attributes[t];return r?oa(n,r):(n.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new nt(`${e}.${t}`))}return i.value?oa(n,i.value):(n.reportError(new ReferenceError(`No value: ${e}`)),new nt(e))}(n,e);case"term":return function zH(n,{name:e,attr:t,args:i}){const r=`-${e}`,s=n.bundle._terms.get(r);if(!s)return n.reportError(new ReferenceError(`Unknown term: ${r}`)),new nt(r);if(t){const o=s.attributes[t];if(o){n.params=P2(n,i).named;const l=oa(n,o);return n.params=null,l}return n.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new nt(`${r}.${t}`)}n.params=P2(n,i).named;const a=oa(n,s.value);return n.params=null,a}(n,e);case"func":return function BH(n,{name:e,args:t}){let i=n.bundle._functions[e];if(!i)return n.reportError(new ReferenceError(`Unknown function: ${e}()`)),new nt(`${e}()`);if("function"!=typeof i)return n.reportError(new TypeError(`Function ${e}() is not callable`)),new nt(`${e}()`);try{let r=P2(n,t);return i(r.positional,r.named)}catch(r){return n.reportError(r),new nt(`${e}()`)}}(n,e);case"select":return function qH(n,{selector:e,variants:t,star:i}){let r=cl(n,e);if(r instanceof nt)return Ub(n,t,i);for(const s of t)if(VH(n,r,cl(n,s.key)))return oa(n,s.value);return Ub(n,t,i)}(n,e);default:return new nt}}function $b(n,e){if(n.dirty.has(e))return n.reportError(new RangeError("Cyclic reference")),new nt;n.dirty.add(e);const t=[],i=n.bundle._useIsolating&&e.length>1;for(const r of e)if("string"!=typeof r){if(n.placeables++,n.placeables>qb)throw n.dirty.delete(e),new RangeError(`Too many placeables expanded: ${n.placeables}, max allowed is ${qb}`);i&&t.push(FH),t.push(cl(n,r).toString(n)),i&&t.push(NH)}else t.push(n.bundle._transform(r));return n.dirty.delete(e),t.join("")}function oa(n,e){return"string"==typeof e?n.bundle._transform(e):$b(n,e)}class UH{constructor(e,t,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=i}reportError(e){if(!(this.errors&&e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let i=this.bundle._intls.get(e);i||(i={},this.bundle._intls.set(e,i));let r=JSON.stringify(t);return i[r]||(i[r]=new e(this.bundle.locales,t)),i[r]}}function dd(n,e){const t=Object.create(null);for(const[i,r]of Object.entries(n))e.includes(i)&&(t[i]=r.valueOf());return t}const Wb=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function $H(n,e){let t=n[0];if(t instanceof nt)return new nt(`NUMBER(${t.valueOf()})`);if(t instanceof Hi)return new Hi(t.valueOf(),{...t.opts,...dd(e,Wb)});if(t instanceof ll)return new Hi(t.valueOf(),{...dd(e,Wb)});throw new TypeError("Invalid argument to NUMBER")}const Gb=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function WH(n,e){let t=n[0];if(t instanceof nt)return new nt(`DATETIME(${t.valueOf()})`);if(t instanceof ll)return new ll(t.valueOf(),{...t.opts,...dd(e,Gb)});if(t instanceof Hi)return new ll(t.valueOf(),{...dd(e,Gb)});throw new TypeError("Invalid argument to DATETIME")}const Zb=new Map;class ZH{constructor(e,{functions:t,useIsolating:i=!0,transform:r=(s=>s)}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:$H,DATETIME:WH,...t},this._useIsolating=i,this._transform=r,this._intls=function GH(n){const e=Array.isArray(n)?n.join(" "):n;let t=Zb.get(e);return void 0===t&&(t=new Map,Zb.set(e,t)),t}(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){const i=[];for(let r=0;r<e.body.length;r++){let s=e.body[r];if(s.id.startsWith("-")){if(!1===t&&this._terms.has(s.id)){i.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(!1===t&&this._messages.has(s.id)){i.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return i}formatPattern(e,t=null,i=null){if("string"==typeof e)return this._transform(e);let r=new UH(this,i,t);try{return $b(r,e).toString(r)}catch(s){if(r.errors&&s instanceof Error)return r.errors.push(s),(new nt).toString(r);throw s}}}const R2=/^(-?[a-zA-Z][\w-]*) *= */gm,Xb=/\.([a-zA-Z][\w-]*) *= */y,XH=/\*?\[/y,L2=/(-?[0-9]+(?:\.([0-9]+))?)/y,YH=/([a-zA-Z][\w-]*)/y,Yb=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,KH=/^[A-Z][A-Z0-9_-]*$/,ud=/([^{}\n\r]+)/y,QH=/([^\\"\n\r]*)/y,Kb=/\\([\\"])/y,Qb=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,JH=/^\n+/,Jb=/ +$/,ez=/ *\r?\n/g,tz=/( *)$/,nz=/{\s*/y,ex=/\s*}/y,iz=/\[\s*/y,rz=/\s*] */y,sz=/\s*\(\s*/y,az=/\s*->\s*/y,oz=/\s*:\s*/y,lz=/\s*,?\s*/y,cz=/\s+/y;class hz{constructor(e){this.body=[],R2.lastIndex=0;let t=0;for(;;){let b=R2.exec(e);if(null===b)break;t=R2.lastIndex;try{this.body.push(l(b[1]))}catch(C){if(C instanceof SyntaxError)continue;throw C}}function i(b){return b.lastIndex=t,b.test(e)}function r(b,C){if(e[t]===b)return t++,!0;if(C)throw new C(`Expected ${b}`);return!1}function s(b,C){if(i(b))return t=b.lastIndex,!0;if(C)throw new C(`Expected ${b.toString()}`);return!1}function a(b){b.lastIndex=t;let C=b.exec(e);if(null===C)throw new SyntaxError(`Expected ${b.toString()}`);return t=b.lastIndex,C}function o(b){return a(b)[1]}function l(b){let C=h(),P=function c(){let b=Object.create(null);for(;i(Xb);){let C=o(Xb),P=h();if(null===P)throw new SyntaxError("Expected attribute value");b[C]=P}return b}();if(null===C&&0===Object.keys(P).length)throw new SyntaxError("Expected message value or attributes");return{id:b,value:C,attributes:P}}function h(){let b;if(i(ud)&&(b=o(ud)),"{"===e[t]||"}"===e[t])return d(b?[b]:[],1/0);let C=x();return C?b?d([b,C],C.length):(C.value=A(C.value,JH),d([C],C.length)):b?A(b,Jb):null}function d(b=[],C){for(;;){if(i(ud)){b.push(o(ud));continue}if("{"===e[t]){b.push(u());continue}if("}"===e[t])throw new SyntaxError("Unbalanced closing brace");let ae=x();if(!ae)break;b.push(ae),C=Math.min(C,ae.length)}let P=b.length-1,se=b[P];"string"==typeof se&&(b[P]=A(se,Jb));let re=[];for(let ae of b)ae instanceof tx&&(ae=ae.value.slice(0,ae.value.length-C)),ae&&re.push(ae);return re}function u(){s(nz,SyntaxError);let b=p();if(s(ex))return b;if(s(az)){let C=function m(){let P,b=[],C=0;for(;i(XH);){r("*")&&(P=C);let se=y(),re=h();if(null===re)throw new SyntaxError("Expected variant value");b[C++]={key:se,value:re}}if(0===C)return null;if(void 0===P)throw new SyntaxError("Expected default variant");return{variants:b,star:P}}();return s(ex,SyntaxError),{type:"select",selector:b,...C}}throw new SyntaxError("Unclosed placeable")}function p(){if("{"===e[t])return u();if(i(Yb)){let[,b,C,P=null]=a(Yb);if("$"===b)return{type:"var",name:C};if(s(sz)){let se=function f(){let b=[];for(;;){switch(e[t]){case")":return t++,b;case void 0:throw new SyntaxError("Unclosed argument list")}b.push(g()),s(lz)}}();if("-"===b)return{type:"term",name:C,attr:P,args:se};if(KH.test(C))return{type:"func",name:C,args:se};throw new SyntaxError("Function names must be all upper-case")}return"-"===b?{type:"term",name:C,attr:P,args:[]}:{type:"mesg",name:C,attr:P}}return k()}function g(){let b=p();return"mesg"!==b.type?b:s(oz)?{type:"narg",name:b.name,value:k()}:b}function y(){let b;return s(iz,SyntaxError),b=i(L2)?v():{type:"str",value:o(YH)},s(rz,SyntaxError),b}function k(){if(i(L2))return v();if('"'===e[t])return function M(){r('"',SyntaxError);let b="";for(;;){if(b+=o(QH),"\\"!==e[t]){if(r('"'))return{type:"str",value:b};throw new SyntaxError("Unclosed string literal")}b+=w()}}();throw new SyntaxError("Invalid expression")}function v(){let[,b,C=""]=a(L2),P=C.length;return{type:"num",value:parseFloat(b),precision:P}}function w(){if(i(Kb))return o(Kb);if(i(Qb)){let[,b,C]=a(Qb),P=parseInt(b||C,16);return P<=55295||57344<=P?String.fromCodePoint(P):"\ufffd"}throw new SyntaxError("Unknown escape sequence")}function x(){let b=t;switch(s(cz),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return E(e.slice(b,t))}return" "===e[t-1]&&E(e.slice(b,t))}function A(b,C){return b.replace(C,"")}function E(b){let C=b.replace(ez,"\n"),P=tz.exec(b)[1].length;return new tx(C,P)}}}class tx{constructor(e,t){this.value=e,this.length=t}}const dz=/<|&#?\w+;/,uz={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},pz={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function fz(n,e){const{value:t}=e;if("string"==typeof t)if("title"===n.localName&&"http://www.w3.org/1999/xhtml"===n.namespaceURI)n.textContent=t;else if(dz.test(t)){const i=n.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=t,function gz(n,e){for(const t of n.childNodes)if(t.nodeType!==t.TEXT_NODE){if(t.hasAttribute("data-l10n-name")){const i=mz(e,t);n.replaceChild(i,t);continue}if(vz(t)){const i=kz(t);n.replaceChild(i,t);continue}console.warn(`An element of forbidden type "${t.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),n.replaceChild(O2(t),t)}e.textContent="",e.appendChild(n)}(i.content,n)}else n.textContent=t;nx(e,n)}function yz(n,e){if(!n)return!1;for(let t of n)if(t.name===e)return!0;return!1}function nx(n,e){const t=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(i=>i.trim()):null;for(const i of Array.from(e.attributes))ix(i.name,e,t)&&!yz(n.attributes,i.name)&&e.removeAttribute(i.name);if(n.attributes)for(const i of Array.from(n.attributes))ix(i.name,e,t)&&e.getAttribute(i.name)!==i.value&&e.setAttribute(i.name,i.value)}function mz(n,e){const t=e.getAttribute("data-l10n-name"),i=n.querySelector(`[data-l10n-name="${t}"]`);return i?i.localName!==e.localName?(console.warn(`An element named "${t}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${i.localName}).`),O2(e)):(n.removeChild(i),rx(e,i.cloneNode(!1))):(console.warn(`An element named "${t}" wasn't found in the source.`),O2(e))}function kz(n){const e=n.ownerDocument.createElement(n.localName);return rx(n,e)}function O2(n){return n.ownerDocument.createTextNode(n.textContent)}function vz(n){const e=uz[n.namespaceURI];return e&&e.includes(n.localName)}function ix(n,e,t=null){if(t&&t.includes(n))return!0;const i=pz[e.namespaceURI];if(!i)return!1;const r=n.toLowerCase(),s=e.localName;if(i.global.includes(r))return!0;if(!i[s])return!1;if(i[s].includes(r))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===s&&"value"===r){const a=e.type.toLowerCase();if("submit"===a||"button"===a||"reset"===a)return!0}return!1}function rx(n,e){return e.textContent=n.textContent,nx(n,e),e}class sx extends Array{static from(e){return e instanceof this?e:new this(e)}}Symbol;class Mz extends sx{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}}[Symbol.asyncIterator](){const e=this;let t=0;return{next:()=>S(function*(){return e.length<=t&&e.push(e.iterator.next()),e[t++]})()}}touchNext(e=1){var t=this;return S(function*(){let i=0;for(;i++<e;){const r=t[t.length-1];if(r&&(yield r).done)break;t.push(t.iterator.next())}return t[t.length-1]})()}}class wz{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}formatWithFallback(e,t){var i=this;return S(function*(){const r=[];let s=!1;var l,a=!1,o=!1;try{for(var h,c=function Vj(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new nd(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(i.bundles);a=!(h=yield c.next()).done;a=!1){const d=h.value;{s=!0;const u=Cz(t,d,e,r);if(0===u.size)break;if(typeof console<"u"){const p=d.locales[0],f=Array.from(u).join(", ");console.warn(`[fluent] Missing translations in ${p}: ${f}`)}}}}catch(d){o=!0,l=d}finally{try{a&&null!=c.return&&(yield c.return())}finally{if(o)throw l}}return!s&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(e)}.\n  resourceIds: ${JSON.stringify(i.resourceIds)}.`),r})()}formatMessages(e){return this.formatWithFallback(e,xz)}formatValues(e){return this.formatWithFallback(e,bz)}formatValue(e,t){var i=this;return S(function*(){const[r]=yield i.formatValues([{id:e,args:t}]);return r})()}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=Mz.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}function bz(n,e,t,i){return t.value?n.formatPattern(t.value,i,e):null}function xz(n,e,t,i){const r={value:null,attributes:null};t.value&&(r.value=n.formatPattern(t.value,i,e));let s=Object.keys(t.attributes);if(s.length>0){r.attributes=new Array(s.length);for(let[a,o]of s.entries()){let l=n.formatPattern(t.attributes[o],i,e);r.attributes[a]={name:o,value:l}}}return r}function Cz(n,e,t,i){const r=[],s=new Set;return t.forEach(({id:a,args:o},l)=>{if(void 0!==i[l])return;let c=e.getMessage(a);if(c){if(r.length=0,i[l]=n(e,r,c,o),r.length>0&&typeof console<"u"){const h=e.locales[0],d=r.join(", ");console.warn(`[fluent][resolver] errors in ${h}/${a}: ${d}.`)}}else s.add(a)}),s}const Br="data-l10n-id",hl="data-l10n-args",_z=`[${Br}]`;class Az extends wz{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Br,hl]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,i){return e.setAttribute(Br,t),i?e.setAttribute(hl,JSON.stringify(i)):e.removeAttribute(hl),e}getAttributes(e){return{id:e.getAttribute(Br),args:JSON.parse(e.getAttribute(hl)||null)}}connectRoot(e){for(const t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const e=Array.from(this.roots);return Promise.all(e.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(const t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(const i of t.addedNodes)if(i.nodeType===i.ELEMENT_NODE)if(i.childElementCount)for(const r of this.getTranslatables(i))this.pendingElements.add(r);else i.hasAttribute(Br)&&this.pendingElements.add(i)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}translateElements(e){var t=this;return S(function*(){if(!e.length)return;const i=e.map(t.getKeysForElement),r=yield t.formatMessages(i);return t.applyTranslations(e,r)})()}applyTranslations(e,t){this.pauseObserving();for(let i=0;i<e.length;i++)void 0!==t[i]&&fz(e[i],t[i]);this.resumeObserving()}getTranslatables(e){const t=Array.from(e.querySelectorAll(_z));return"function"==typeof e.hasAttribute&&e.hasAttribute(Br)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute(Br),args:JSON.parse(e.getAttribute(hl)||null)}}}class pd{#e;#t;#n;#i;constructor({lang:e,isRTL:t},i=null){this.#n=pd.#r(e),this.#i=i,this.#e=t??pd.#s(this.#n)?"rtl":"ltr"}_setL10n(e){this.#i=e}getLanguage(){return this.#n}getDirection(){return this.#e}get(e,t=null,i){var r=this;return S(function*(){return Array.isArray(e)?(e=e.map(o=>({id:o})),(yield r.#i.formatMessages(e)).map(o=>o.value)):(yield r.#i.formatMessages([{id:e,args:t}]))[0]?.value||i})()}translate(e){var t=this;return S(function*(){(t.#t||=new Set).add(e);try{t.#i.connectRoot(e),yield t.#i.translateRoots()}catch{}})()}translateOnce(e){var t=this;return S(function*(){try{yield t.#i.translateElements([e])}catch(i){console.error(`translateOnce: "${i}".`)}})()}destroy(){var e=this;return S(function*(){if(e.#t){for(const t of e.#t)e.#i.disconnectRoot(t);e.#t.clear(),e.#t=null}e.#i.pauseObserving()})()}pause(){this.#i.pauseObserving()}resume(){this.#i.resumeObserving()}static#r(e){return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e=e?.toLowerCase()||"en-us"]||e}static#s(e){const t=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(t)}}function ax(n,e){const t=new hz(e),i=new ZH(n),r=i.addResource(t);return r.length&&console.error("L10n errors",r),i}class zi extends pd{constructor(e){super({lang:e});const t=e?zi.#e.bind(zi,"en-us",this.getLanguage()):zi.#i.bind(zi,this.getLanguage());this._setL10n(new Az([],t))}static#e(e,t){var i=this;return bb(function*(){const{baseURL:r,paths:s}=yield wb(i.#n()),a=[t];if(e!==t){const o=t.split("-",1)[0];o!==t&&a.push(o),a.push(e)}for(const o of a){const l=yield wb(i.#t(o,r,s));l?yield l:"en-us"===o&&(yield i.#r(o))}})()}static#t(e,t,i){return S(function*(){const r=i[e];if(!r)return null;const s=new URL(r,t),a=yield Vb(s,"text");return ax(e,a)})()}static#n(){return S(function*(){try{const{href:e}=document.querySelector('link[type="application/l10n"]'),t=yield Vb(e,"json");return{baseURL:e.replace(/[^/]*$/,"")||"./",paths:t}}catch{}return{baseURL:"./",paths:Object.create(null)}})()}static#i(e){var t=this;return bb(function*(){yield t.#r(e)})()}static#r(e){return S(function*(){return ax(e,'pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties\u2026\npdfjs-document-properties-button-label = Document Properties\u2026\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } \xd7 { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } \xd7 { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing\u2026\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document\u2026\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text2 =\n    .aria-label = Text Editor\n    .default-content = Start typing\u2026\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button =\n    .aria-label = Alt text\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button =\n    .aria-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, \u201cA young man sits down at a table to eat a meal\u201d\npdfjs-editor-resizer-top-left =\n    .aria-label = Top left corner \u2014 resize\npdfjs-editor-resizer-top-middle =\n    .aria-label = Top middle \u2014 resize\npdfjs-editor-resizer-top-right =\n    .aria-label = Top right corner \u2014 resize\npdfjs-editor-resizer-middle-right =\n    .aria-label = Middle right \u2014 resize\npdfjs-editor-resizer-bottom-right =\n    .aria-label = Bottom right corner \u2014 resize\npdfjs-editor-resizer-bottom-middle =\n    .aria-label = Bottom middle \u2014 resize\npdfjs-editor-resizer-bottom-left =\n    .aria-label = Bottom left corner \u2014 resize\npdfjs-editor-resizer-middle-left =\n    .aria-label = Middle left \u2014 resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\npdfjs-editor-new-alt-text-textarea =\n    .placeholder = Write your description here\u2026\npdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\npdfjs-editor-new-alt-text-not-now-button = Not now\npdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\npdfjs-editor-new-alt-text-error-close-button = Close\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\npdfjs-editor-new-alt-text-added-button =\n    .aria-label = Alt text added\npdfjs-editor-new-alt-text-added-button-label = Alt text added\npdfjs-editor-new-alt-text-missing-button =\n    .aria-label = Missing alt text\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\npdfjs-editor-new-alt-text-to-review-button =\n    .aria-label = Review alt text\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\npdfjs-image-alt-text-settings-button =\n    .title = Image alt text settings\npdfjs-image-alt-text-settings-button-label = Image alt text settings\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\npdfjs-editor-alt-text-settings-delete-model-button = Delete\npdfjs-editor-alt-text-settings-download-model-button = Download\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\npdfjs-editor-alt-text-settings-close-button = Close')})()}}function N2(){return document.location.hash}class Sz{#e=null;constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:i=!1}){if(!e||"string"!=typeof e)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const r=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===i,this._initialized=!0,this.#d();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=N2(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#r(s,!0)||t){const{hash:o,page:l,rotation:c}=this.#l(!0);return!o||r||t?void this.#t(null,!0):void this.#t({hash:o,page:l,rotation:c},!0)}const a=s.destination;this.#s(a,s.uid,!0),void 0!==a.rotation&&(this._initialRotation=a.rotation),a.dest?(this._initialBookmark=JSON.stringify(a.dest),this._destination.page=null):a.hash?this._initialBookmark=a.hash:a.page&&(this._initialBookmark=`page=${a.page}`)}reset(){this._initialized&&(this.#o(),this._initialized=!1,this.#a()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:i}){if(!this._initialized)return;if(e&&"string"!=typeof e)return void console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);if(!Array.isArray(t))return void console.error(`PDFHistory.push: "${t}" is not a valid explicitDest parameter.`);if(!this.#i(i)&&(null!==i||this._destination))return void console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);const r=e||JSON.stringify(t);if(!r)return;let s=!1;if(this._destination&&(function Dz(n,e){return"string"==typeof n&&"string"==typeof e&&(n===e||id(n).get("nameddest")===e)}(this._destination.hash,r)||function Iz(n,e){function t(i,r){if(typeof i!=typeof r||Array.isArray(i)||Array.isArray(r))return!1;if(null!==i&&"object"==typeof i&&null!==r){if(Object.keys(i).length!==Object.keys(r).length)return!1;for(const s in i)if(!t(i[s],r[s]))return!1;return!0}return i===r||Number.isNaN(i)&&Number.isNaN(r)}if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let i=0,r=n.length;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}(this._destination.dest,t))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#t({dest:t,hash:r,page:i,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#i(e))return void console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#n()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,t=!1){const i=t||!this._destination,r={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:e};let s;if(this.#s(e,r.uid),this._updateUrl&&e?.hash){const a=document.location.href.split("#",1)[0];a.startsWith("file://")||(s=`${a}#${e.hash}`)}i?window.history.replaceState(r,"",s):window.history.pushState(r,"",s)}#n(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination)return void this.#t(t);if(this._destination.temporary)return void this.#t(t,!0);if(this._destination.hash===t.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let i=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}this.#t(t,i)}#i(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#r(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[i]=performance.getEntriesByType("navigation");if("reload"!==i?.type)return!1}}return!(!Number.isInteger(e.uid)||e.uid<0||null===e.destination||"object"!=typeof e.destination)}#s(e,t,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}#l(e=!1){const t=unescape(N2()).substring(1),i=id(t),r=i.get("nameddest")||"";let s=0|i.get("page");return(!this.#i(s)||e&&r.length>0)&&(s=null),{hash:t,page:s,rotation:this.linkService.rotation}}#c({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#n(!0),this._updateViewareaTimeout=null},1e3))}#h({state:e}){const t=N2(),i=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;const{hash:s,page:a,rotation:o}=this.#l();return void this.#t({hash:s,page:a,rotation:o},!0)}if(!this.#r(e))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,function OH(n){return I2.apply(this,arguments)}({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const r=e.destination;this.#s(r,e.uid,!0),Ib(r.rotation)&&(this.linkService.rotation=r.rotation),r.dest?this.linkService.goToDestination(r.dest):r.hash?this.linkService.setHash(r.hash):r.page&&(this.linkService.page=r.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#o(){(!this._destination||this._destination.temporary)&&this.#n()}#d(){if(this.#e)return;this.#e=new AbortController;const{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#c.bind(this),{signal:e}),window.addEventListener("popstate",this.#h.bind(this),{signal:e}),window.addEventListener("pagehide",this.#o.bind(this),{signal:e})}#a(){this.#e?.abort(),this.#e=null}}class Tz{#e=null;#t=null;#n=null;#i=null;#r=null;#s;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new zi,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#s=e.uiManager,this.#e=e.annotationLayer||null,this.#r=e.textLayer||null,this.#t=e.drawLayer||null,this.#n=e.onAppend||null,this.#i=e.structTreeLayer||null}render(e,t="display"){var i=this;return S(function*(){if("display"!==t||i._cancelled)return;const r=e.clone({dontFlip:!0});if(i.div)return i.annotationEditorLayer.update({viewport:r}),void i.show();const s=i.div=document.createElement("div");s.className="annotationEditorLayer",s.hidden=!0,s.dir=i.#s.direction,i.#n?.(s),i.annotationEditorLayer=new xH({uiManager:i.#s,div:s,structTreeLayer:i.#i,accessibilityManager:i.accessibilityManager,pageIndex:i.pdfPage.pageNumber-1,l10n:i.l10n,viewport:r,annotationLayer:i.#e,textLayer:i.#r,drawLayer:i.#t}),i.annotationEditorLayer.render({viewport:r,div:s,annotations:null,intent:t}),i.show()})()}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}}{var V2=new Map;const n=navigator.userAgent||"",e=navigator.platform||"",t=navigator.maxTouchPoints||1,i=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===e&&t>1||i)&&V2.set("maxCanvasPixels",5242880),i&&V2.set("useSystemFonts",!1)}const j2={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},pi={allowedGlobalEvents:{value:null,kind:1},canvasMaxAreaInBytes:{value:-1,kind:5},isInAutomation:{value:!1,kind:1},localeProperties:{value:{lang:navigator.language||"en-US"},kind:1},nimbusDataStr:{value:"",kind:1},supportsCaretBrowsingMode:{value:!1,kind:1},supportsDocumentFonts:{value:!0,kind:1},supportsIntegratedFind:{value:!1,kind:1},supportsMouseWheelZoomCtrlKey:{value:!0,kind:1},supportsMouseWheelZoomMetaKey:{value:!0,kind:1},supportsPinchToZoom:{value:!0,kind:1},toolbarDensity:{value:0,kind:17},altTextLearnMoreUrl:{value:"",kind:130},annotationEditorMode:{value:0,kind:130},annotationMode:{value:2,kind:130},cursorToolOnLoad:{value:0,kind:130},debuggerSrc:{value:"./debugger.mjs",kind:2},defaultZoomDelay:{value:400,kind:130},defaultZoomValue:{value:"",kind:130},disableHistory:{value:!1,kind:2},disablePageLabels:{value:!1,kind:130},enableAltText:{value:!1,kind:130},enableAltTextModelDownload:{value:!0,kind:146},enableGuessAltText:{value:!0,kind:146},enableHighlightFloatingButton:{value:!1,kind:130},enableNewAltTextWhenAddingImage:{value:!0,kind:130},enablePermissions:{value:!1,kind:130},enablePrintAutoRotate:{value:!0,kind:130},enableScripting:{value:!0,kind:130},enableUpdatedAddImage:{value:!1,kind:130},externalLinkRel:{value:"noopener noreferrer nofollow",kind:2},externalLinkTarget:{value:0,kind:130},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:130},historyUpdateUrl:{value:!1,kind:130},ignoreDestinationZoom:{value:!1,kind:130},imageResourcesPath:{value:"./images/",kind:2},maxCanvasPixels:{value:2**25,kind:2},forcePageColors:{value:!1,kind:130},pageColorsBackground:{value:"Canvas",kind:130},pageColorsForeground:{value:"CanvasText",kind:130},pdfBugEnabled:{value:!1,kind:130},printResolution:{value:150,kind:2},sidebarViewOnLoad:{value:-1,kind:130},scrollModeOnLoad:{value:-1,kind:130},spreadModeOnLoad:{value:-1,kind:130},textLayerMode:{value:1,kind:130},viewOnLoad:{value:0,kind:130},cMapPacked:{value:!0,kind:4},cMapUrl:{value:"../web/cmaps/",kind:4},disableAutoFetch:{value:!1,kind:132},disableFontFace:{value:!1,kind:132},disableRange:{value:!1,kind:132},disableStream:{value:!1,kind:132},docBaseUrl:{value:"",kind:4},enableHWA:{value:!0,kind:134},enableXfa:{value:!0,kind:132},fontExtraProperties:{value:!1,kind:4},isEvalSupported:{value:!0,kind:4},isOffscreenCanvasSupported:{value:!0,kind:4},maxImageSize:{value:-1,kind:4},pdfBug:{value:!1,kind:4},standardFontDataUrl:{value:"../web/standard_fonts/",kind:4},useSystemFonts:{value:void 0,kind:4,type:j2.BOOLEAN+j2.UNDEFINED},verbosity:{value:1,kind:4},workerPort:{value:null,kind:8},workerSrc:{value:"../build/pdf.worker.mjs",kind:8},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:2},sandboxBundleSrc:{value:"../build/pdf.sandbox.mjs",kind:2},viewerCssTheme:{value:0,kind:130},enableFakeMLManager:{value:!0,kind:2},disablePreferences:{value:!1,kind:2}};class Pz{static eventBus;static#e=new Map;static{for(const e in pi)this.#e.set(e,pi[e].value);for(const[e,t]of V2)this.#e.set(e,t);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>!!this.get("disablePreferences")||(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)}static get(e){return this.#e.get(e)}static getAll(e=null,t=!1){const i=Object.create(null);for(const r in pi){const s=pi[r];e&&!(e&s.kind)||(i[r]=t?s.value:this.#e.get(r))}return i}static set(e,t){this.setAll({[e]:t})}static setAll(e,t=!1){let i;this._hasInvokedSet||=!0;for(const r in e){const s=pi[r],a=e[r];if(!s||!(typeof a==typeof s.value||j2[(typeof a).toUpperCase()]&s.type))continue;const{kind:o}=s;t&&!(1&o||128&o)||(this.eventBus&&16&o&&(i||=new Map).set(r,a),this.#e.set(r,a))}if(i)for(const[r,s]of i)this.eventBus.dispatch(r.toLowerCase(),{source:this,value:s})}}class Rz{#e=null;constructor(e){this.pageIndex=e.pageIndex}render(e="display"){var t=this;return S(function*(){"display"!==e||t.#e||t._cancelled||(t.#e=new EH({pageIndex:t.pageIndex}))})()}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}}const lx={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Lz=/^H(\d+)$/;class cx{#e;#t=null;#n;#i=new Map;#r;#s=null;constructor(e,t){this.#e=e.getStructTree(),this.#r=t}render(){var e=this;return S(function*(){if(e.#n)return e.#n;const{promise:t,resolve:i,reject:r}=Promise.withResolvers();e.#n=t;try{e.#t=e.#h(yield e.#e)}catch(s){r(s)}return e.#e=null,e.#t?.classList.add("structTree"),i(e.#t),t})()}getAriaAttributes(e){var t=this;return S(function*(){try{return yield t.render(),t.#i.get(e)}catch{}return null})()}hide(){this.#t&&!this.#t.hidden&&(this.#t.hidden=!0)}show(){this.#t?.hidden&&(this.#t.hidden=!1)}#l(e,t){const{alt:i,id:r,lang:s}=e;if(void 0!==i){let a=!1;const o=al(i);for(const l of e.children)if("annotation"===l.type){let c=this.#i.get(l.id);c||(c=new Map,this.#i.set(l.id,c)),c.set("aria-label",o),a=!0}a||t.setAttribute("aria-label",o)}void 0!==r&&t.setAttribute("aria-owns",r),void 0!==s&&t.setAttribute("lang",al(s,!0))}#c(e,t){const{alt:i,bbox:r,children:s}=e,a=s?.[0];if(!this.#r||!i||!r||"content"!==a?.type)return!1;const{id:o}=a;if(!o)return!1;t.setAttribute("aria-owns",o);const l=document.createElement("span");(this.#s||=new Map).set(o,l),l.setAttribute("role","img"),l.setAttribute("aria-label",al(i));const{pageHeight:c,pageX:h,pageY:d}=this.#r,u="calc(var(--scale-factor)*",{style:p}=l;return p.width=`${u}${r[2]-r[0]}px)`,p.height=`${u}${r[3]-r[1]}px)`,p.left=`${u}${r[0]-h}px)`,p.top=`${u}${c-r[3]+d}px)`,!0}addElementsToTextLayer(){if(this.#s){for(const[e,t]of this.#s)document.getElementById(e)?.append(t);this.#s.clear(),this.#s=null}}#h(e){if(!e)return null;const t=document.createElement("span");if("role"in e){const{role:i}=e,r=i.match(Lz);if(r?(t.setAttribute("role","heading"),t.setAttribute("aria-level",r[1])):lx[i]&&t.setAttribute("role",lx[i]),"Figure"===i&&this.#c(e,t))return t}if(this.#l(e,t),e.children)if(1===e.children.length&&"id"in e.children[0])this.#l(e.children[0],t);else for(const i of e.children)t.append(this.#h(i));return t}}class dl{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(e){this.#t=e}static#r(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===r.width&&0===r.height)return-1;const o=i.y+i.height/2,h=r.y+r.height/2;return o<=r.y&&h>=i.y+i.height?-1:h<=i.y&&o>=r.y+r.height?1:i.x+i.width/2-(r.x+r.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(dl.#r),this.#n.size>0){const e=this.#t;for(const[t,i]of this.#n)document.getElementById(t)?this.#s(t,e[i]):this.#n.delete(t)}for(const[e,t]of this.#i)this.addPointerInTextLayer(e,t);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e)return void this.#i.delete(e);const t=this.#t;if(!t||0===t.length)return;const{id:i}=e,r=this.#n.get(i);if(void 0===r)return;const s=t[r];this.#n.delete(i);let a=s.getAttribute("aria-owns");a?.includes(i)&&(a=a.split(" ").filter(o=>o!==i).join(" "),a?s.setAttribute("aria-owns",a):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#s(e,t){const i=t.getAttribute("aria-owns");i?.includes(e)||t.setAttribute("aria-owns",i?`${i} ${e}`:e),t.removeAttribute("role")}addPointerInTextLayer(e,t){const{id:i}=e;if(!i)return null;if(!this.#e)return this.#i.set(e,t),null;t&&this.removePointerInTextLayer(e);const r=this.#t;if(!r||0===r.length)return null;const s=ol(r,c=>dl.#r(e,c)<0),a=Math.max(0,s-1),o=r[a];this.#s(i,o),this.#n.set(i,a);const l=o.parentNode;return l?.classList.contains("markedContent")?l.id:null}moveElementInDOM(e,t,i,r){const s=this.addPointerInTextLayer(i,r);if(!e.hasChildNodes())return e.append(t),s;const a=Array.from(e.childNodes).filter(c=>c!==t);if(0===a.length)return s;const o=i||t,l=ol(a,c=>dl.#r(o,c)<0);return 0===l?a[0].before(t):a[l-1].after(t),s}}class Oz{#e=null;constructor({findController:e,eventBus:t,pageIndex:i}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||-1===e.pageIndex)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];const{textContentItemsStr:i}=this;let r=0,s=0;const a=i.length-1,o=[];for(let l=0,c=e.length;l<c;l++){let h=e[l];for(;r!==a&&h>=s+i[r].length;)s+=i[r].length,r++;r===i.length&&console.error("Could not find a matching mapping");const d={begin:{divIdx:r,offset:h-s}};for(h+=t[l];r!==a&&h>s+i[r].length;)s+=i[r].length,r++;d.end={divIdx:r,offset:h-s},o.push(d)}return o}_renderMatches(e){if(0===e.length)return;const{findController:t,pageIdx:i}=this,{textContentItemsStr:r,textDivs:s}=this,a=i===t.selected.pageIdx,o=t.selected.matchIdx;let c=null;function d(y,k){const v=y.divIdx;return s[v].textContent="",u(v,0,y.offset,k)}function u(y,k,v,M){let w=s[y];if(w.nodeType===Node.TEXT_NODE){const E=document.createElement("span");w.before(E),E.append(w),s[y]=E,w=E}const x=r[y].substring(k,v),A=document.createTextNode(x);if(M){const E=document.createElement("span");return E.className=`${M} appended`,E.append(A),w.append(E),M.includes("selected")?E.offsetLeft:0}return w.append(A),0}let p=o,f=p+1;if(t.state.highlightAll)p=0,f=e.length;else if(!a)return;let g=-1,m=-1;for(let y=p;y<f;y++){const k=e[y],v=k.begin;if(v.divIdx===g&&v.offset===m)continue;g=v.divIdx,m=v.offset;const M=k.end,w=a&&y===o,x=w?" selected":"";let A=0;if(c&&v.divIdx===c.divIdx?u(c.divIdx,c.offset,v.offset):(null!==c&&u(c.divIdx,c.offset,undefined),d(v)),v.divIdx===M.divIdx)A=u(v.divIdx,v.offset,M.offset,"highlight"+x);else{A=u(v.divIdx,v.offset,undefined,"highlight begin"+x);for(let E=v.divIdx+1,b=M.divIdx;E<b;E++)s[E].className="highlight middle"+x;d(M,"highlight end"+x)}c=M,w&&t.scrollMatchIntoView({element:s[v.divIdx],selectedLeft:A,pageIndex:i,matchIndex:o})}c&&u(c.divIdx,c.offset,undefined)}_updateMatches(e=!1){if(!this.enabled&&!e)return;const{findController:t,matches:i,pageIdx:r}=this,{textContentItemsStr:s,textDivs:a}=this;let o=-1;for(const h of i){for(let u=Math.max(o,h.begin.divIdx),p=h.end.divIdx;u<=p;u++){const f=a[u];f.textContent=s[u],f.className=""}o=h.end.divIdx+1}t?.highlightMatches&&!e&&(this.matches=this._convertMatches(t.pageMatches[r]||null,t.pageMatchesLength[r]||null),this._renderMatches(this.matches))}}class la{#e=!1;#t=null;#n=!1;#i=null;static#r=new Map;static#s=null;constructor({pdfPage:e,highlighter:t=null,accessibilityManager:i=null,enablePermissions:r=!1,onAppend:s=null}){this.pdfPage=e,this.highlighter=t,this.accessibilityManager=i,this.#e=!0===r,this.#t=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(e,t=null){var i=this;return S(function*(){if(i.#n&&i.#i)return i.#i.update({viewport:e,onBefore:i.hide.bind(i)}),void i.show();i.cancel(),i.#i=new RH({textContentSource:i.pdfPage.streamTextContent(t||{includeMarkedContent:!0,disableNormalization:!0}),container:i.div,viewport:e});const{textDivs:r,textContentItemsStr:s}=i.#i;i.highlighter?.setTextMapping(r,s),i.accessibilityManager?.setTextMapping(r),yield i.#i.render(),i.#n=!0;const a=document.createElement("div");a.className="endOfContent",i.div.append(a),i.#l(a),i.#t?.(i.div),i.highlighter?.enable(),i.accessibilityManager?.enable()})()}hide(){!this.div.hidden&&this.#n&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#n&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#i?.cancel(),this.#i=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),la.#c(this.div)}#l(e){const{div:t}=this;t.addEventListener("mousedown",()=>{t.classList.add("selecting")}),t.addEventListener("copy",i=>{if(!this.#e){const r=document.getSelection();i.clipboardData.setData("text/plain",al(IH(r.toString())))}i.preventDefault(),i.stopPropagation()}),la.#r.set(t,e),la.#h()}static#c(e){this.#r.delete(e),0===this.#r.size&&(this.#s?.abort(),this.#s=null)}static#h(){if(this.#s)return;this.#s=new AbortController;const{signal:e}=this.#s,t=(a,o)=>{o.append(a),a.style.width="",a.style.height="",o.classList.remove("selecting")};let i=!1;var r,s;document.addEventListener("pointerdown",()=>{i=!0},{signal:e}),document.addEventListener("pointerup",()=>{i=!1,this.#r.forEach(t)},{signal:e}),window.addEventListener("blur",()=>{i=!1,this.#r.forEach(t)},{signal:e}),document.addEventListener("keyup",()=>{i||this.#r.forEach(t)},{signal:e}),document.addEventListener("selectionchange",()=>{const a=document.getSelection();if(0===a.rangeCount)return void this.#r.forEach(t);const o=new Set;for(let p=0;p<a.rangeCount;p++){const f=a.getRangeAt(p);for(const g of this.#r.keys())!o.has(g)&&f.intersectsNode(g)&&o.add(g)}for(const[p,f]of this.#r)o.has(p)?p.classList.add("selecting"):t(f,p);if(r??="none"===getComputedStyle(this.#r.values().next().value).getPropertyValue("-moz-user-select"),r)return;const l=a.getRangeAt(0),c=s&&(0===l.compareBoundaryPoints(Range.END_TO_END,s)||0===l.compareBoundaryPoints(Range.START_TO_END,s));let h=c?l.startContainer:l.endContainer;h.nodeType===Node.TEXT_NODE&&(h=h.parentNode);const d=h.parentElement?.closest(".textLayer"),u=this.#r.get(d);u&&(u.style.width=d.style.width,u.style.height=d.style.height,h.parentElement.insertBefore(u,c?h:h.nextSibling)),s=l.cloneRange()},{signal:e})}}class hx{constructor({pdfPage:e,annotationStorage:t=null,linkService:i,xfaHtml:r=null}){this.pdfPage=e,this.annotationStorage=t,this.linkService=i,this.xfaHtml=r,this.div=null,this._cancelled=!1}render(e,t="display"){var i=this;return S(function*(){if("print"===t){const a={viewport:e.clone({dontFlip:!0}),div:i.div,xfaHtml:i.xfaHtml,annotationStorage:i.annotationStorage,linkService:i.linkService,intent:t};return i.div=document.createElement("div"),a.div=i.div,D2.render(a)}const r=yield i.pdfPage.getXfa();if(i._cancelled||!r)return{textDivs:[]};const s={viewport:e.clone({dontFlip:!0}),div:i.div,xfaHtml:r,annotationStorage:i.annotationStorage,linkService:i.linkService,intent:t};return i.div?D2.update(s):(i.div=document.createElement("div"),s.div=i.div,D2.render(s))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}const Fz={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new E2}},Nz=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class dx{#e=Vi.ENABLE_FORMS;#t=!1;#n=!1;#i=!1;#r=null;#s=null;#l=null;#c=1;#h=1;#o=null;#d=Be.INITIAL;#a=1;#u={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#f=new WeakMap;#p=[null,null,null,null];constructor(e){const t=e.container,i=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.#r=e.layerProperties||Fz,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||1,this.viewport=i,this.pdfPageRotate=i.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#a=e.textLayerMode??1,this.#e=e.annotationMode??Vi.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=e.maxCanvasPixels??Pz.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,this.#t=e.enableHWA||!1,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||=new zi,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=t,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;const r=document.createElement("div");if(r.className="page",r.setAttribute("data-page-number",this.id),r.setAttribute("role","region"),r.setAttribute("data-l10n-id","pdfjs-page-landmark"),r.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=r,this.#m(),t?.append(r),this._isStandalone){t?.style.setProperty("--scale-factor",this.scale*ji.PDF_TO_CSS_UNITS),this.pageColors?.background&&t?.style.setProperty("--page-bg-color",this.pageColors.background);const{optionalContentConfigPromise:s}=e;s&&s.then(a=>{s===this._optionalContentConfigPromise&&(this.#u.initialOptionalContent=a.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#g(e,t){const i=Nz.get(t),r=this.#p[i];if(this.#p[i]=e,r)r.replaceWith(e);else{for(let s=i-1;s>=0;s--){const a=this.#p[s];if(a)return void a.after(e)}this.div.prepend(e)}}get renderingState(){return this.#d}set renderingState(e){if(e!==this.#d)switch(this.#d=e,this.#s&&(clearTimeout(this.#s),this.#s=null),e){case Be.PAUSED:this.div.classList.remove("loading");break;case Be.RUNNING:this.div.classList.add("loadingIcon"),this.#s=setTimeout(()=>{this.div.classList.add("loading"),this.#s=null},0);break;case Be.INITIAL:case Be.FINISHED:this.div.classList.remove("loadingIcon","loading")}}#m(){const{viewport:e}=this;if(this.pdfPage){if(this.#l===e.rotation)return;this.#l=e.rotation}PH(this.div,e,!0,!1)}setPdfPage(e){this._isStandalone&&("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate,this.viewport=e.getViewport({scale:this.scale*ji.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#m(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return cd(this,"_textHighlighter",new Oz({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#r.findController}))}#y(e,t){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:t})}#k(){var e=this;return S(function*(){let t=null;try{yield e.annotationLayer.render(e.viewport,{structTreeLayer:e.structTreeLayer},"display")}catch(i){console.error(`#renderAnnotationLayer: "${i}".`),t=i}finally{e.#y("annotationlayerrendered",t)}})()}#M(){var e=this;return S(function*(){let t=null;try{yield e.annotationEditorLayer.render(e.viewport,"display")}catch(i){console.error(`#renderAnnotationEditorLayer: "${i}".`),t=i}finally{e.#y("annotationeditorlayerrendered",t)}})()}#x(){var e=this;return S(function*(){try{yield e.drawLayer.render("display")}catch(t){console.error(`#renderDrawLayer: "${t}".`)}})()}#w(){var e=this;return S(function*(){let t=null;try{const i=yield e.xfaLayer.render(e.viewport,"display");i?.textDivs&&e._textHighlighter&&e.#E(i.textDivs)}catch(i){console.error(`#renderXfaLayer: "${i}".`),t=i}finally{e.xfaLayer?.div&&(e.l10n.pause(),e.#g(e.xfaLayer.div,"xfaLayer"),e.l10n.resume()),e.#y("xfalayerrendered",t)}})()}#b(){var e=this;return S(function*(){if(!e.textLayer)return;let t=null;try{yield e.textLayer.render(e.viewport)}catch(i){if(i instanceof bH)return;console.error(`#renderTextLayer: "${i}".`),t=i}e.#y("textlayerrendered",t),e.#I()})()}#I(){var e=this;return S(function*(){if(!e.textLayer)return;const t=yield e.structTreeLayer?.render();t&&(e.l10n.pause(),e.structTreeLayer?.addElementsToTextLayer(),e.canvas&&t.parentNode!==e.canvas&&e.canvas.append(t),e.l10n.resume()),e.structTreeLayer?.show()})()}#E(e){var t=this;return S(function*(){const i=yield t.pdfPage.getTextContent(),r=[];for(const s of i.items)r.push(s.str);t._textHighlighter.setTextMapping(e,r),t._textHighlighter.enable()})()}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;const t=this.zoomLayer.firstChild;this.#f.delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:i=!1,keepXfaLayer:r=!1,keepTextLayer:s=!1}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:i,keepXfaLayer:r,keepTextLayer:s}),this.renderingState=Be.INITIAL;const a=this.div,o=a.childNodes,l=e&&this.zoomLayer||null,c=t&&this.annotationLayer?.div||null,h=i&&this.annotationEditorLayer?.div||null,d=r&&this.xfaLayer?.div||null,u=s&&this.textLayer?.div||null;for(let p=o.length-1;p>=0;p--){const f=o[p];switch(f){case l:case c:case h:case d:case u:continue}f.remove();const g=this.#p.indexOf(f);g>=0&&(this.#p[g]=null)}a.removeAttribute("data-loaded"),c&&this.annotationLayer.hide(),h&&this.annotationEditorLayer.hide(),d&&this.xfaLayer.hide(),u&&this.textLayer.hide(),this.structTreeLayer?.hide(),l||(this.canvas&&(this.#f.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(e){this.hasEditableAnnotations()&&(this.#i=e,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:i=null,drawingDelay:r=-1}){if(this.scale=e||this.scale,"number"==typeof t&&(this.rotation=t),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(a=>{i===this._optionalContentConfigPromise&&(this.#u.initialOptionalContent=a.hasInitialVisibility)})),this.#u.directDrawing=!0,this.viewport=this.viewport.clone({scale:this.scale*ji.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#m(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let a=!1;if(this.#n)if(0===this.maxCanvasPixels)a=!0;else if(this.maxCanvasPixels>0){const{width:l,height:c}=this.viewport,{sx:h,sy:d}=this.outputScale;a=(Math.floor(l)*h|0)*(Math.floor(c)*d|0)>this.maxCanvasPixels}const o=r>=0&&r<1e3;if(o||a){if(o&&!a&&this.renderingState!==Be.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:r}),this.renderingState=Be.FINISHED,this.#u.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!o,hideTextLayer:o}),o)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#o})}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:i=!1,keepTextLayer:r=!1,cancelExtraDelay:s=0}={}){this.renderTask&&(this.renderTask.cancel(s),this.renderTask=null),this.resume=null,this.textLayer&&(!r||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!i||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:e,redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:i=!1,redrawXfaLayer:r=!1,redrawTextLayer:s=!1,hideTextLayer:a=!1}){if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);const{style:l}=e;l.width=l.height=""}const o=this.#f.get(e);if(this.viewport!==o){const l=this.viewport.rotation-o.rotation,c=Math.abs(l);let h=1,d=1;if(90===c||270===c){const{width:u,height:p}=this.viewport;h=p/u,d=u/p}e.style.transform=`rotate(${l}deg) scale(${h}, ${d})`}t&&this.annotationLayer&&this.#k(),i&&this.annotationEditorLayer&&(this.drawLayer&&this.#x(),this.#M()),r&&this.xfaLayer&&this.#w(),this.textLayer&&(a?(this.textLayer.hide(),this.structTreeLayer?.hide()):s&&this.#b())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}#C(e,t=null){var i=this;return S(function*(){if(e===i.renderTask&&(i.renderTask=null),t instanceof S2)i.#o=null;else if(i.#o=t,i.renderingState=Be.FINISHED,i._resetZoomLayer(!0),i.#u.regularAnnotations=!e.separateAnnots,i.eventBus.dispatch("pagerendered",{source:i,pageNumber:i.id,cssTransform:!1,timestamp:performance.now(),error:i.#o}),t)throw t})()}draw(){var e=this;return S(function*(){e.renderingState!==Be.INITIAL&&(console.error("Must be in new state before drawing"),e.reset());const{div:t,l10n:i,pageColors:r,pdfPage:s,viewport:a}=e;if(!s)throw e.renderingState=Be.FINISHED,new Error("pdfPage is not loaded");e.renderingState=Be.RUNNING;const o=document.createElement("div");if(o.classList.add("canvasWrapper"),e.#g(o,"canvasWrapper"),!e.textLayer&&0!==e.#a&&!s.isPureXfa&&(e._accessibilityManager||=new dl,e.textLayer=new la({pdfPage:s,highlighter:e._textHighlighter,accessibilityManager:e._accessibilityManager,enablePermissions:2===e.#a,onAppend:C=>{e.l10n.pause(),e.#g(C,"textLayer"),e.l10n.resume()}})),!e.annotationLayer&&e.#e!==Vi.DISABLE){const{annotationStorage:C,annotationEditorUIManager:P,downloadManager:se,enableScripting:re,fieldObjectsPromise:ae,hasJSActionsPromise:be,linkService:qe}=e.#r;e._annotationCanvasMap||=new Map,e.annotationLayer=new Hb({pdfPage:s,annotationStorage:C,imageResourcesPath:e.imageResourcesPath,renderForms:e.#e===Vi.ENABLE_FORMS,linkService:qe,downloadManager:se,enableScripting:re,hasJSActionsPromise:be,fieldObjectsPromise:ae,annotationCanvasMap:e._annotationCanvasMap,accessibilityManager:e._accessibilityManager,annotationEditorUIManager:P,onAppend:N=>{e.#g(N,"annotationLayer")}})}const{width:c,height:h}=a,d=document.createElement("canvas");d.setAttribute("role","presentation"),d.hidden=!0;const u=!(!r?.background||!r?.foreground);let p=C=>{(!u||C)&&(d.hidden=!1,p=null)};o.append(d),e.canvas=d;const f=d.getContext("2d",{alpha:!1,willReadFrequently:!e.#t}),g=e.outputScale=new TH;if(0===e.maxCanvasPixels){const C=1/e.scale;g.sx*=C,g.sy*=C,e.#n=!0}else if(e.maxCanvasPixels>0){const P=Math.sqrt(e.maxCanvasPixels/(c*h));g.sx>P||g.sy>P?(g.sx=P,g.sy=P,e.#n=!0):e.#n=!1}const m=Db(g.sx),y=Db(g.sy),k=d.width=rd(sd(c*g.sx),m[0]),v=d.height=rd(sd(h*g.sy),y[0]),M=rd(sd(c),m[1]),w=rd(sd(h),y[1]);g.sx=k/M,g.sy=v/w,e.#c!==m[1]&&(t.style.setProperty("--scale-round-x",`${m[1]}px`),e.#c=m[1]),e.#h!==y[1]&&(t.style.setProperty("--scale-round-y",`${y[1]}px`),e.#h=y[1]),e.#f.set(d,a);const A={canvasContext:f,transform:g.scaled?[g.sx,0,0,g.sy,0,0]:null,viewport:a,annotationMode:e.#e,optionalContentConfigPromise:e._optionalContentConfigPromise,annotationCanvasMap:e._annotationCanvasMap,pageColors:r,isEditing:e.#i},E=e.renderTask=s.render(A);E.onContinue=C=>{if(p?.(!1),e.renderingQueue&&!e.renderingQueue.isHighestPriority(e))return e.renderingState=Be.PAUSED,void(e.resume=()=>{e.renderingState=Be.RUNNING,C()});C()};const b=E.promise.then(S(function*(){p?.(!0),yield e.#C(E),e.structTreeLayer||=new cx(s,a.rawDims),e.#b(),e.annotationLayer&&(yield e.#k());const{annotationEditorUIManager:C}=e.#r;C&&(e.drawLayer||=new Rz({pageIndex:e.id}),yield e.#x(),e.drawLayer.setParent(o),e.annotationEditorLayer||=new Tz({uiManager:C,pdfPage:s,l10n:i,structTreeLayer:e.structTreeLayer,accessibilityManager:e._accessibilityManager,annotationLayer:e.annotationLayer?.annotationLayer,textLayer:e.textLayer,drawLayer:e.drawLayer.getDrawLayer(),onAppend:P=>{e.#g(P,"annotationEditorLayer")}}),e.#M())}),C=>(C instanceof S2||p?.(!0),e.#C(E,C)));if(s.isPureXfa){if(!e.xfaLayer){const{annotationStorage:C,linkService:P}=e.#r;e.xfaLayer=new hx({pdfPage:s,annotationStorage:C,linkService:P})}e.#w()}return t.setAttribute("data-loaded",!0),e.eventBus.dispatch("pagerender",{source:e,pageNumber:e.id}),b})()}setPageLabel(e){this.pageLabel="string"==typeof e?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:e,initialOptionalContent:t,regularAnnotations:i}=this.#u;return e&&t&&i?this.canvas:null}}function H2(){return(H2=S(function*(n){const t="".split("#",1)[0];let{info:i,metadata:r,contentDispositionFilename:s,contentLength:a}=yield n.getMetadata();if(!a){const{length:o}=yield n.getDownloadInfo();a=o}return{...i,baseURL:t,filesize:a,filename:s||SH(""),metadata:r?.getRaw(),authors:r?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}class jz{constructor(e){this._ready=new Promise((t,i)=>{import(e).then(s=>{t(s.QuickJSSandbox())}).catch(i)})}createSandbox(e){var t=this;return S(function*(){(yield t._ready).create(e)})()}dispatchEventInSandbox(e){var t=this;return S(function*(){const i=yield t._ready;setTimeout(()=>i.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return S(function*(){(yield e._ready).nukeSandbox()})()}}class Hz{#e=null;#t=null;#n=null;#i=null;#r=null;#s=null;#l=null;#c=null;#h=!1;#o=null;#d=null;constructor({eventBus:e,externalServices:t=null,docProperties:i=null}){this.#r=e,this.#s=t,this.#n=i}setViewer(e){this.#c=e}setDocument(e){var t=this;return S(function*(){if(t.#l&&(yield t.#g()),t.#l=e,!e)return;const[i,r,s]=yield Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!i&&!s)return void(yield t.#g());if(e!==t.#l)return;try{t.#o=t.#p()}catch(l){return console.error(`setDocument: "${l.message}".`),void(yield t.#g())}const a=t.#r;t.#i=new AbortController;const{signal:o}=t.#i;a._on("updatefromsandbox",l=>{l?.source===window&&t.#a(l.detail)},{signal:o}),a._on("dispatcheventinsandbox",l=>{t.#o?.dispatchEventInSandbox(l.detail)},{signal:o}),a._on("pagechanging",({pageNumber:l,previous:c})=>{l!==c&&(t.#f(c),t.#u(l))},{signal:o}),a._on("pagerendered",({pageNumber:l})=>{t._pageOpenPending.has(l)&&l===t.#c.currentPageNumber&&t.#u(l)},{signal:o}),a._on("pagesdestroy",S(function*(){yield t.#f(t.#c.currentPageNumber),yield t.#o?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),t.#e?.resolve()}),{signal:o});try{const l=yield t.#n(e);if(e!==t.#l)return;yield t.#o.createSandbox({objects:i,calculationOrder:r,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...l,actions:s}}),a.dispatch("sandboxcreated",{source:t})}catch(l){return console.error(`setDocument: "${l.message}".`),void(yield t.#g())}yield t.#o?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield t.#u(t.#c.currentPageNumber,!0),Promise.resolve().then(()=>{e===t.#l&&(t.#h=!0)})})()}dispatchWillSave(){var e=this;return S(function*(){return e.#o?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(){var e=this;return S(function*(){return e.#o?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(){var e=this;return S(function*(){if(e.#o){yield e.#d?.promise,e.#d=Promise.withResolvers();try{yield e.#o.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(t){throw e.#d.resolve(),e.#d=null,t}yield e.#d.promise}})()}dispatchDidPrint(){var e=this;return S(function*(){return e.#o?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#h}get _pageOpenPending(){return cd(this,"_pageOpenPending",new Set)}get _visitedPages(){return cd(this,"_visitedPages",new Map)}#a(e){var t=this;return S(function*(){const i=t.#c,r=i.isInPresentationMode||i.isChangingPresentationMode,{id:s,siblings:a,command:o,value:l}=e;if(!s){switch(o){case"clear":console.clear();break;case"error":console.error(l);break;case"layout":if(!r){const h=function Qj(n){let e=he.VERTICAL,t=Dt.NONE;switch(n){case"SinglePage":e=he.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=he.PAGE;case"TwoColumnLeft":t=Dt.ODD;break;case"TwoPageRight":e=he.PAGE;case"TwoColumnRight":t=Dt.EVEN}return{scrollMode:e,spreadMode:t}}(l);i.spreadMode=h.spreadMode}break;case"page-num":i.currentPageNumber=l+1;break;case"print":yield i.pagesPromise,t.#r.dispatch("print",{source:t});break;case"println":console.log(l);break;case"zoom":r||(i.currentScaleValue=l);break;case"SaveAs":t.#r.dispatch("download",{source:t});break;case"FirstPage":i.currentPageNumber=1;break;case"LastPage":i.currentPageNumber=i.pagesCount;break;case"NextPage":i.nextPage();break;case"PrevPage":i.previousPage();break;case"ZoomViewIn":r||i.increaseScale();break;case"ZoomViewOut":r||i.decreaseScale();break;case"WillPrintFinished":t.#d?.resolve(),t.#d=null}return}if(r&&e.focus)return;delete e.id,delete e.siblings;const c=a?[s,...a]:[s];for(const h of c){const d=document.querySelector(`[data-element-id="${h}"]`);d?d.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):t.#l?.annotationStorage.setValue(h,e)}})()}#u(e,t=!1){var i=this;return S(function*(){const r=i.#l,s=i._visitedPages;if(t&&(i.#e=Promise.withResolvers()),!i.#e)return;const a=i.#c.getPageView(e-1);if(a?.renderingState!==Be.FINISHED)return void i._pageOpenPending.add(e);i._pageOpenPending.delete(e);const o=S(function*(){const l=yield s.has(e)?null:a.pdfPage?.getJSActions();r===i.#l&&(yield i.#o?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:l}))})();s.set(e,o)})()}#f(e){var t=this;return S(function*(){const i=t.#l,r=t._visitedPages;if(!t.#e||t._pageOpenPending.has(e))return;const s=r.get(e);s&&(r.set(e,null),yield s,i===t.#l&&(yield t.#o?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))})()}#p(){if(this.#t=Promise.withResolvers(),this.#o)throw new Error("#initScripting: Scripting already exists.");return this.#s.createScripting()}#g(){var e=this;return S(function*(){if(!e.#o)return e.#l=null,void e.#t?.resolve();e.#e&&(yield Promise.race([e.#e.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(()=>{}),e.#e=null),e.#l=null;try{yield e.#o.destroySandbox()}catch{}e.#d?.reject(new Error("Scripting destroyed.")),e.#d=null,e.#i?.abort(),e.#i=null,e._pageOpenPending.clear(),e._visitedPages.clear(),e.#o=null,e.#h=!1,e.#t?.resolve()})()}}class zz extends Hz{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),e.externalServices||={createScripting:()=>new jz(e.sandboxBundleSrc)},e.docProperties||=t=>function Vz(n){return H2.apply(this,arguments)}(t),super(e)}}class qz{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,t,i,r=!1){const s=e.views,a=s.length;if(0===a)return null;for(let d=0;d<a;d++){const u=s[d].view;if(!this.isViewFinished(u))return u}const o=e.first.id,l=e.last.id;if(l-o+1>a){const d=e.ids;for(let u=1,p=l-o;u<p;u++){const f=i?o+u:l-u;if(d.has(f))continue;const g=t[f-1];if(!this.isViewFinished(g))return g}}let c=i?l:o-2,h=t[c];return h&&!this.isViewFinished(h)||r&&(c+=i?1:-1,h=t[c],h&&!this.isViewFinished(h))?h:null}isViewFinished(e){return e.renderingState===Be.FINISHED}renderView(e){switch(e.renderingState){case Be.FINISHED:return!1;case Be.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case Be.RUNNING:this.highestPriorityPage=e.renderingId;break;case Be.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof S2||console.error(`renderView: "${t}"`)})}return!0}}function px(n){return Object.values(gn).includes(n)&&n!==gn.DISABLE}class Uz{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){const t=this.#e;t.has(e)&&t.delete(e),t.add(e),t.size>this.#t&&this.#n()}resize(e,t=null){this.#t=e;const i=this.#e;if(t){const r=i.size;let s=1;for(const a of i)if(t.has(a.id)&&(i.delete(a),i.add(a)),++s>r)break}for(;i.size>this.#t;)this.#n()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#n(){const e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}}class fx{#e=null;#t=null;#n=null;#i=gn.NONE;#r=null;#s=Vi.ENABLE_FORMS;#l=null;#c=!1;#h=!1;#o=!1;#d=!1;#a=!1;#u=null;#f=null;#p=null;#g=null;#m=!1;#y=null;#k=!1;#M=0;#x=new ResizeObserver(this.#V.bind(this));#w=null;#b=null;#I=1;constructor(e){const t="4.8.69";if(jb!==t)throw new Error(`The API version "${jb}" does not match the Viewer version "${t}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#x.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new E2,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=r=>this._getVisiblePages().ids.has(r)),this._scriptingManager=e.scriptingManager||null,this.#I=e.textLayerMode??1,this.#s=e.annotationMode??Vi.ENABLE_FORMS,this.#i=e.annotationEditorMode??gn.NONE,this.#n=e.annotationEditorHighlightColors||null,this.#h=!0===e.enableHighlightFloatingButton,this.#d=!0===e.enableUpdatedAddImage,this.#a=!0===e.enableNewAltTextWhenAddingImage,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||=new zi,this.#o=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#f=e.mlManager||null,this.#c=e.enableHWA||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new qz,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;const{abortSignal:i}=e;i?.addEventListener("abort",()=>{this.#x.disconnect(),this.#x=null},{once:!0}),this.scroll=function qj(n,e,t){const i=function(a){s||(s=window.requestAnimationFrame(function(){s=null;const l=n.scrollLeft,c=r.lastX;l!==c&&(r.right=l>c),r.lastX=l;const h=n.scrollTop,d=r.lastY;h!==d&&(r.down=h>d),r.lastY=h,e(r)}))},r={right:!0,down:!0,lastX:n.scrollLeft,lastY:n.scrollTop,_eventHandler:i};let s=null;return n.addEventListener("scroll",i,{useCapture:!0,signal:t}),t?.addEventListener("abort",()=>window.cancelAnimationFrame(s),{once:!0}),r}(this.container,this._scrollUpdate.bind(this),i),this.presentationModeState=0,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#F(),this.eventBus._on("thumbnailrendered",({pageNumber:r,pdfPage:s})=>{this.#e.has(this._pages[r-1])||s?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#s===Vi.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,t=!1){if(this._currentPageNumber===e)return t&&this.#P(),!0;if(!(0<e&&e<=this.pagesCount))return!1;const i=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:i}),t&&this.#P(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=0|e;if(this._pageLabels){const i=this._pageLabels.indexOf(e);i>=0&&(t=i+1)}this._setCurrentPageNumber(t,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return 0!==this._currentScale?this._currentScale:1}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#D(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#D(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!Ib(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((e%=360)<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;const t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#D(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const e=this;return cd(this,"_layerProperties",{get annotationEditorUIManager(){return e.#r},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#E(e){const t={annotationEditorMode:this.#i,annotationMode:this.#s,textLayerMode:this.#I};return e&&(!e.includes(ld.COPY)&&1===this.#I&&(t.textLayerMode=2),e.includes(ld.MODIFY_CONTENTS)||(t.annotationEditorMode=gn.DISABLE),!e.includes(ld.MODIFY_ANNOTATIONS)&&!e.includes(ld.FILL_INTERACTIVE_FORMS)&&this.#s===Vi.ENABLE_FORMS&&(t.annotationMode=Vi.ENABLE)),t}#C(e){var t=this;return S(function*(){if("hidden"===document.visibilityState||!t.container.offsetParent||0===t._getVisiblePages().views.length)return;const i=Promise.withResolvers(),r=new AbortController;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&i.resolve()},{signal:"function"==typeof AbortSignal.any?AbortSignal.any([e,r.signal]):e}),yield Promise.race([t._onePageRenderedCapability.promise,i.promise]),r.abort()})()}getAllText(){var e=this;return S(function*(){const t=[],i=[];for(let r=1,s=e.pdfDocument.numPages;r<=s;++r){if(e.#k)return null;i.length=0;const a=yield e.pdfDocument.getPage(r),{items:o}=yield a.getTextContent();for(const l of o)l.str&&i.push(l.str),l.hasEOL&&i.push("\n");t.push(al(i.join("")))}return t.join("\n")})()}#S(e,t){const i=document.getSelection(),{focusNode:r,anchorNode:s}=i;if(s&&r&&i.containsNode(this.#y)){if(this.#m||2===e)return t.preventDefault(),void t.stopPropagation();this.#m=!0;const{classList:a}=this.viewer;a.add("copyAll");const o=new AbortController;window.addEventListener("keydown",l=>this.#k="Escape"===l.key,{signal:o.signal}),this.getAllText().then(function(){var l=S(function*(c){null!==c&&(yield navigator.clipboard.writeText(c))});return function(c){return l.apply(this,arguments)}}()).catch(l=>{console.warn(`Something goes wrong when extracting the text: ${l.message}`)}).finally(()=>{this.#m=!1,this.#k=!1,o.abort(),a.remove("copyAll")}),t.preventDefault(),t.stopPropagation()}}setDocument(e){var t=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#r?.destroy(),this.#r=null),this.pdfDocument=e,!e)return;const i=e.numPages,r=e.getPage(1),s=e.getOptionalContentConfig({intent:"display"}),a=this.#o?e.getPermissions():Promise.resolve(),{eventBus:o,pageColors:l,viewer:c}=this;this.#u=new AbortController;const{signal:h}=this.#u;if(i>1e4){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const p=this._scrollMode=he.PAGE;o.dispatch("scrollmodechanged",{source:this,mode:p})}this._pagesCapability.promise.then(()=>{o.dispatch("pagesloaded",{source:this,pagesCount:i})},()=>{}),o._on("pagerender",p=>{const f=this._pages[p.pageNumber-1];f&&this.#e.push(f)},{signal:h});const u=p=>{p.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:p.timestamp}),o._off("pagerendered",u))};o._on("pagerendered",u,{signal:h}),Promise.all([r,a]).then(([p,f])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(p),this._optionalContentConfigPromise=s;const{annotationEditorMode:g,annotationMode:m,textLayerMode:y}=this.#E(f);if(0!==y){const w=this.#y=document.createElement("div");w.id="hiddenCopyElement",c.before(w)}if("function"==typeof AbortSignal.any&&g!==gn.DISABLE){const w=g;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):px(w)?(this.#r=new CH(this.container,c,this.#t,o,e,l,this.#n,this.#h,this.#d,this.#a,this.#f),o.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#r}),w!==gn.NONE&&(w===gn.STAMP&&this.#f?.loadModel("altText"),this.#r.updateMode(w))):console.error(`Invalid AnnotationEditor mode: ${w}`)}const k=this._scrollMode===he.PAGE?null:c,v=this.currentScale,M=p.getViewport({scale:v*ji.PDF_TO_CSS_UNITS});c.style.setProperty("--scale-factor",M.scale),l?.background&&c.style.setProperty("--page-bg-color",l.background),("CanvasText"===l?.foreground||"Canvas"===l?.background)&&(c.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),c.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let w=1;w<=i;++w){const x=new dx({container:k,eventBus:o,id:w,scale:v,defaultViewport:M.clone(),optionalContentConfigPromise:s,renderingQueue:this.renderingQueue,textLayerMode:y,annotationMode:m,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:l,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#c});this._pages.push(x)}this._pages[0]?.setPdfPage(p),this._scrollMode===he.PAGE?this.#A():this._spreadMode!==Dt.NONE&&this._updateSpreadMode(),this.#C(h).then(S(function*(){if(e!==t.pdfDocument)return;if(t.findController?.setDocument(e),t._scriptingManager?.setDocument(e),t.#y&&document.addEventListener("copy",t.#S.bind(t,y),{signal:h}),t.#r&&o.dispatch("annotationeditormodechanged",{source:t,mode:t.#i}),e.loadingParams.disableAutoFetch||i>5e3)return void t._pagesCapability.resolve();let w=i-1;if(w<=0)t._pagesCapability.resolve();else for(let x=2;x<=i;++x){const A=e.getPage(x).then(E=>{const b=t._pages[x-1];b.pdfPage||b.setPdfPage(E),0==--w&&t._pagesCapability.resolve()},E=>{console.error(`Unable to get page ${x} to initialize viewer`,E),0==--w&&t._pagesCapability.resolve()});x%250==0&&(yield A)}})),o.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:w})=>{e===this.pdfDocument&&w.Language&&(c.lang=w.Language)}),this.defaultRenderingQueue&&this.update()}).catch(p=>{console.error("Unable to initialize viewer",p),this._pagesCapability.reject(p)})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,i=this._pages.length;t<i;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,this.#e=new Uz(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=he.VERTICAL,this._previousScrollMode=he.UNKNOWN,this._spreadMode=Dt.NONE,this.#w={previousPageNumber:1,scrollDown:!0,pages:[]},this.#u?.abort(),this.#u=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#y?.remove(),this.#y=null,this.#j()}#A(){if(this._scrollMode!==he.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=this.#w,i=this.viewer;if(i.textContent="",t.pages.length=0,this._spreadMode!==Dt.NONE||this.isInPresentationMode){const r=new Set,s=this._spreadMode-1;-1===s?r.add(e-1):e%2!==s?(r.add(e-1),r.add(e)):(r.add(e-2),r.add(e-1));const a=document.createElement("div");if(a.className="spread",this.isInPresentationMode){const o=document.createElement("div");o.className="dummyPage",a.append(o)}for(const o of r){const l=this._pages[o];l&&(a.append(l.div),t.pages.push(l))}i.append(a)}else{const r=this._pages[e-1];i.append(r.div),t.pages.push(r)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e}_scrollUpdate(){0!==this.pagesCount&&this.update()}#T(e,t=null){const{div:i,id:r}=e;if(this._currentPageNumber!==r&&this._setCurrentPageNumber(r),this._scrollMode===he.PAGE&&(this.#A(),this.update()),!t&&!this.isInPresentationMode){const s=i.offsetLeft+i.clientLeft,a=s+i.clientWidth,{scrollLeft:o,clientWidth:l}=this.container;(this._scrollMode===he.HORIZONTAL||s<o||a>o+l)&&(t={left:0,top:0})}Eb(i,t),!this._currentScaleValue&&this._location&&(this._location=null)}#R(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#_(e,t,{noScroll:i=!1,preset:r=!1,drawingDelay:s=-1,origin:a=null}){if(this._currentScaleValue=t.toString(),this.#R(e))return void(r&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t}));this.viewer.style.setProperty("--scale-factor",e*ji.PDF_TO_CSS_UNITS);const o=s>=0&&s<1e3;this.refresh(!0,{scale:e,drawingDelay:o?s:-1}),o&&(this.#b=setTimeout(()=>{this.#b=null,this.refresh()},s));const l=this._currentScale;if(this._currentScale=e,!i){let h,c=this._currentPageNumber;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(c=this._location.pageNumber,h=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:c,destArray:h,allowNegativeOffset:!0}),Array.isArray(a)){const d=e/l-1,[u,p]=this.containerTopLeft;this.container.scrollLeft+=(a[0]-p)*d,this.container.scrollTop+=(a[1]-u)*d}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:r?t:void 0}),this.defaultRenderingQueue&&this.update()}get#v(){return this._spreadMode!==Dt.NONE&&this._scrollMode!==he.HORIZONTAL?2:1}#D(e,t){let i=parseFloat(e);if(i>0)t.preset=!1,this.#_(i,e,t);else{const r=this._pages[this._currentPageNumber-1];if(!r)return;let s=40,a=5;this.isInPresentationMode?(s=a=4,this._spreadMode!==Dt.NONE&&(s*=2)):this.removePageBorders?s=a=0:this._scrollMode===he.HORIZONTAL&&([s,a]=[a,s]);const o=(this.container.clientWidth-s)/r.width*r.scale/this.#v,l=(this.container.clientHeight-a)/r.height*r.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=o;break;case"page-height":i=l;break;case"page-fit":i=Math.min(o,l);break;case"auto":const c=Tb(r)?o:Math.min(l,o);i=Math.min(1.25,c);break;default:return void console.error(`#setScale: "${e}" is an unknown zoom value.`)}t.preset=!0,this.#_(i,e,t)}}#P(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#D(this._currentScaleValue,{noScroll:!0}),this.#T(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:r=!1}){if(!this.pdfDocument)return;const s=Number.isInteger(e)&&this._pages[e-1];if(!s)return void console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!t)return void this._setCurrentPageNumber(e,!0);let h,d,a=0,o=0,l=0,c=0;const u=s.rotation%180!=0,p=(u?s.height:s.width)/s.scale/ji.PDF_TO_CSS_UNITS,f=(u?s.width:s.height)/s.scale/ji.PDF_TO_CSS_UNITS;let g=0;switch(t[1].name){case"XYZ":a=t[2],o=t[3],g=t[4],a=null!==a?a:0,o=null!==o?o:f;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":o=t[2],g="page-width",null===o&&this._location?(a=this._location.left,o=this._location.top):("number"!=typeof o||o<0)&&(o=f);break;case"FitV":case"FitBV":a=t[2],l=p,c=f,g="page-height";break;case"FitR":a=t[2],o=t[3],l=t[4]-a,c=t[5]-o;let v=40,M=5;this.removePageBorders&&(v=M=0),h=(this.container.clientWidth-v)/l/ji.PDF_TO_CSS_UNITS,d=(this.container.clientHeight-M)/c/ji.PDF_TO_CSS_UNITS,g=Math.min(Math.abs(h),Math.abs(d));break;default:return void console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`)}if(r||(g&&g!==this._currentScale?this.currentScaleValue=g:0===this._currentScale&&(this.currentScaleValue="auto")),"page-fit"===g&&!t[4])return void this.#T(s);const m=[s.viewport.convertToViewportPoint(a,o),s.viewport.convertToViewportPoint(a+l,o+c)];let y=Math.min(m[0][0],m[1][0]),k=Math.min(m[0][1],m[1][1]);i||(y=Math.max(y,0),k=Math.max(k,0)),this.#T(s,{left:y,top:k})}_updateLocation(e){const t=this._currentScale,i=this._currentScaleValue,r=parseFloat(i)===t?Math.round(1e4*t)/100:i,s=e.id,o=this.container,l=this._pages[s-1].getPagePoint(o.scrollLeft-e.x,o.scrollTop-e.y),c=Math.round(l[0]),h=Math.round(l[1]);let d=`#page=${s}`;this.isInPresentationMode||(d+=`&zoom=${r},${c},${h}`),this._location={pageNumber:s,scale:r,top:h,left:c,rotation:this._pagesRotation,pdfOpenParams:d}}update(){const e=this._getVisiblePages(),t=e.views,i=t.length;if(0===i)return;const r=Math.max(10,2*i+1);this.#e.resize(r,e.ids),this.renderingQueue.renderHighestPriority(e);const s=this._spreadMode===Dt.NONE&&(this._scrollMode===he.PAGE||this._scrollMode===he.VERTICAL),a=this._currentPageNumber;let o=!1;for(const l of t){if(l.percent<100)break;if(l.id===a&&s){o=!0;break}}this._setCurrentPageNumber(o?a:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#N(){const e=this._getVisiblePages(),t=[],{ids:i,views:r}=e;for(const s of r){const{view:a}=s;a.hasEditableAnnotations()?t.push(s):i.delete(a.id)}return 0===t.length?null:(this.renderingQueue.renderHighestPriority({first:t[0],last:t.at(-1),views:t,ids:i}),i)}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return 3===this.presentationModeState}get isChangingPresentationMode(){return 2===this.presentationModeState}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===he.PAGE?this.#w.pages:this._pages,t=this._scrollMode===he.HORIZONTAL;return function $j({scrollEl:n,views:e,sortByVisibility:t=!1,horizontal:i=!1,rtl:r=!1}){const s=n.scrollTop,a=s+n.clientHeight,o=n.scrollLeft,l=o+n.clientWidth,d=[],u=new Set,p=e.length;let f=ol(e,i?function h(k){const v=k.div,M=v.offsetLeft+v.clientLeft;return r?M<l:M+v.clientWidth>o}:function c(k){const v=k.div;return v.offsetTop+v.clientTop+v.clientHeight>s});f>0&&f<p&&!i&&(f=function Uj(n,e,t){if(n<2)return n;let i=e[n].div,r=i.offsetTop+i.clientTop;r>=t&&(i=e[n-1].div,r=i.offsetTop+i.clientTop);for(let s=n-2;s>=0&&(i=e[s].div,!(i.offsetTop+i.clientTop+i.clientHeight<=r));--s)n=s;return n}(f,e,s));let g=i?l:-1;for(let k=f;k<p;k++){const v=e[k],M=v.div,w=M.offsetLeft+M.clientLeft,x=M.offsetTop+M.clientTop,A=M.clientWidth,E=M.clientHeight,b=w+A,C=x+E;if(-1===g)C>=a&&(g=C);else if((i?w:x)>g)break;if(C<=s||x>=a||b<=o||w>=l)continue;const P=Math.max(0,s-x)+Math.max(0,C-a),ae=(A-(Math.max(0,o-w)+Math.max(0,b-l)))/A;d.push({id:v.id,x:w,y:x,view:v,percent:(E-P)/E*ae*100|0,widthPercent:100*ae|0}),u.add(v.id)}const m=d[0],y=d.at(-1);return t&&d.sort(function(k,v){const M=k.percent-v.percent;return Math.abs(M)>.001?-M:k.id-v.id}),{first:m,last:y,views:d,ids:u}}({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:t&&this._isContainerRtl})}cleanup(){for(const e of this._pages)e.renderingState!==Be.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}#z(e){var t=this;return S(function*(){if(e.pdfPage)return e.pdfPage;try{const i=yield t.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(i),i}catch(i){return console.error("Unable to get page for page view",i),null}})()}#H(e){if(1===e.first?.id)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case he.PAGE:return this.#w.scrollDown;case he.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){const t=e||this._getVisiblePages(),i=this.#H(t),s=this.renderingQueue.getHighestPriority(t,this._pages,i,this._spreadMode!==Dt.NONE&&this._scrollMode!==he.HORIZONTAL);return!!s&&(this.#z(s).then(()=>{this.renderingQueue.renderView(s)}),!0)}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,i=this._pages.length;t<i;++t){const r=this._pages[t];if(r.width!==e.width||r.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(t=>{const i=t.pdfPage.getViewport({scale:1}),r=Tb(i);if(void 0===e)e=r;else if(this.enablePrintAutoRotate&&r!==e)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!function Gj(n){return Number.isInteger(n)&&Object.values(he).includes(n)&&n!==he.UNKNOWN}(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>1e4||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===he.HORIZONTAL),i.classList.toggle("scrollWrapped",t===he.WRAPPED),this.pdfDocument&&e&&(t===he.PAGE?this.#A():this._previousScrollMode===he.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#D(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!function Zj(n){return Number.isInteger(n)&&Object.values(Dt).includes(n)&&n!==Dt.UNKNOWN}(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;const t=this.viewer,i=this._pages;if(this._scrollMode===he.PAGE)this.#A();else if(t.textContent="",this._spreadMode===Dt.NONE)for(const r of this._pages)t.append(r.div);else{const r=this._spreadMode-1;let s=null;for(let a=0,o=i.length;a<o;++a)null===s?(s=document.createElement("div"),s.className="spread",t.append(s)):a%2===r&&(s=s.cloneNode(!1),t.append(s)),s.append(i[a].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#D(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case he.WRAPPED:{const{views:i}=this._getVisiblePages(),r=new Map;for(const{id:s,y:a,percent:o,widthPercent:l}of i){if(0===o||l<100)continue;let c=r.get(a);c||r.set(a,c||=[]),c.push(s)}for(const s of r.values()){const a=s.indexOf(e);if(-1===a)continue;const o=s.length;if(1===o)break;if(t)for(let l=a-1,c=0;l>=c;l--){const d=s[l+1]-1;if(s[l]<d)return e-d}else for(let l=a+1,c=o;l<c;l++){const d=s[l-1]+1;if(s[l]>d)return d-e}if(t){const l=s[0];if(l<e)return e-l+1}else{const l=s[o-1];if(l>e)return l-e+1}break}break}case he.HORIZONTAL:break;case he.PAGE:case he.VERTICAL:{if(this._spreadMode===Dt.NONE)break;const i=this._spreadMode-1;if(t&&e%2!==i)break;if(!t&&e%2===i)break;const{views:r}=this._getVisiblePages(),s=t?e-1:e+1;for(const{id:a,percent:o,widthPercent:l}of r)if(a===s){if(o>0&&100===l)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const i=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+i,t),!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}updateScale({drawingDelay:e,scaleFactor:t=null,steps:i=null,origin:r}){if(null===i&&null===t)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(t>0&&1!==t)s=Math.round(s*t*100)/100;else if(i){const a=i>0?1.1:1/1.1,o=i>0?Math.ceil:Math.floor;i=Math.abs(i);do{s=o(10*(s*a).toFixed(2))/10}while(--i>0)}s=Math.max(.1,Math.min(10,s)),this.#D(s,{noScroll:!1,drawingDelay:e,origin:r})}increaseScale(e={}){this.updateScale({...e,steps:e.steps??1})}decreaseScale(e={}){this.updateScale({...e,steps:-(e.steps??1)})}#F(e=this.container.clientHeight){e!==this.#M&&(this.#M=e,Xj.setProperty("--viewer-container-height",`${e}px`))}#V(e){for(const t of e)if(t.target===this.container){this.#F(Math.floor(t.borderBoxSize[0].blockSize)),this.#l=null;break}}get containerTopLeft(){return this.#l||=[this.container.offsetTop,this.container.offsetLeft]}#j(){this.#p?.abort(),this.#p=null,null!==this.#g&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#r?this.#i:gn.DISABLE}set annotationEditorMode({mode:e,editId:t=null,isFromKeyboard:i=!1}){if(!this.#r)throw new Error("The AnnotationEditor is not enabled.");if(this.#i===e)return;if(!px(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(!this.pdfDocument)return;e===gn.STAMP&&this.#f?.loadModel("altText");const{eventBus:r}=this,s=()=>{this.#j(),this.#i=e,this.#r.updateMode(e,t,i),r.dispatch("annotationeditormodechanged",{source:this,mode:e})};if(e===gn.NONE||this.#i===gn.NONE){const a=e!==gn.NONE;a||this.pdfDocument.annotationStorage.resetModifiedIds();for(const l of this._pages)l.toggleEditingMode(a);const o=this.#N();if(a&&o){this.#j(),this.#p=new AbortController;const l=AbortSignal.any([this.#u.signal,this.#p.signal]);return void r._on("pagerendered",({pageNumber:c})=>{o.delete(c),0===o.size&&(this.#g=setTimeout(s,0))},{signal:l})}}s()}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(const i of this._pages)i.update(t);null!==this.#b&&(clearTimeout(this.#b),this.#b=null),e||this.update()}}}class $z extends fx{_resetView(){super._resetView(),this._scrollMode=he.PAGE,this._spreadMode=Dt.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}var Wz=Ve.AnnotationLayerBuilder,Gz=Ve.DownloadManager,Zz=Ve.EventBus,Xz=Ve.FindState,gx=Ve.GenericL10n,ca=Ve.LinkTarget,yx=Ve.PDFFindController,Yz=Ve.PDFHistory,mx=Ve.PDFLinkService,Kz=Ve.PDFPageView,Qz=Ve.PDFScriptingManager,kx=Ve.PDFSinglePageViewer,vx=Ve.PDFViewer,Jz=Ve.ProgressBar,eB=Ve.RenderingStates,tB=Ve.ScrollMode,nB=Ve.SimpleLinkService,iB=Ve.SpreadMode,rB=Ve.StructTreeLayerBuilder,sB=Ve.TextLayerBuilder,aB=Ve.XfaLayerBuilder,oB=Ve.parseQueryString;const lB=["pdfViewerContainer"];function z2(n,e,t){n[e]=t}function ul(){return typeof window>"u"}ul()||z2(qi,"verbosity",kb.INFOS),typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let n,e;return{promise:new Promise((i,r)=>{n=i,e=r}),resolve:n,reject:e}});var B2=function(n){return n[n.DISABLED=0]="DISABLED",n[n.ENABLED=1]="ENABLED",n[n.ENHANCED=2]="ENHANCED",n}(B2||{});let dB=(()=>{class n{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof qi<"u"?`https://unpkg.com/pdfjs-dist@${td}/cmaps/`:null;_imageResourcesPath=typeof qi<"u"?`https://unpkg.com/pdfjs-dist@${td}/web/images/`:void 0;_renderText=!0;_renderTextMode=B2.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new yn;afterLoadComplete=new ke;pageRendered=new ke;pageInitialized=new ke;textLayerRendered=new ke;onError=new ke;onProgress=new ke;pageChange=new ke(!0);src;set cMapsUrl(t){this._cMapsUrl=t}set page(t){const i=t=parseInt(t,10)||1;this._pdf&&(t=this.getValidPageNumber(t)),this._page=t,i!==t&&this.pageChange.emit(t)}set renderText(t){this._renderText=t}set renderTextMode(t){this._renderTextMode=t}set originalSize(t){this._originalSize=t}set showAll(t){this._showAll=t}set stickToPage(t){this._stickToPage=t}set zoom(t){t<=0||(this._zoom=t)}get zoom(){return this._zoom}set zoomScale(t){this._zoomScale=t}get zoomScale(){return this._zoomScale}set rotation(t){"number"==typeof t&&t%90==0?this._rotation=t:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(t){this._externalLinkTarget=t}set autoresize(t){this._canAutoResize=!!t}set fitToPage(t){this._fitToPage=!!t}set showBorders(t){this._showBorders=!!t}static getLinkTarget(t){switch(t){case"blank":return ca.BLANK;case"none":return ca.NONE;case"self":return ca.SELF;case"parent":return ca.PARENT;case"top":return ca.TOP}return null}constructor(t,i){if(this.element=t,this.ngZone=i,ul())return;let r;const s=td;r=window[`pdfWorkerSrc${s}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${s}/legacy/build/pdf.worker.min.mjs`),z2(mb,"workerSrc",r)}ngAfterViewChecked(){if(this.isInitialized)return;const t=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=t?!1===this.isVisible&&null!=t&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(t){if(!ul()&&this.isVisible)if("src"in t)this.loadPDF();else if(this._pdf){if(("renderText"in t||"showAll"in t)&&(this.setupViewer(),this.resetPdfDocument()),"page"in t){const{page:i}=t;if(i.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){Qe(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(Fe(this.destroy$)).subscribe({next:t=>{const i=this._rotation+t.rotate,r=t.getViewport({scale:this._zoom,rotation:i}).width*n.CSS_UNITS;let s=this._zoom,a=!0;if(!this._originalSize||this._fitToPage&&r>this.pdfViewerContainer.nativeElement.clientWidth){const o=t.getViewport({scale:1,rotation:i});s=this.getScale(o.width,o.height),a=!this._stickToPage}this.pdfViewer.currentScale=s,a&&this.pdfViewer.scrollPageIntoView({pageNumber:t.pageNumber,ignoreDestinationZoom:!0})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const t=n.getLinkTarget(this._externalLinkTarget);return t?{externalLinkTarget:t}:{}}initEventBus(){this.eventBus=function cB(n,e){const t=new n.EventBus;return function hB(n,e){ze(n,"documentload").pipe(Fe(e)).subscribe(()=>{const t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),ze(n,"pagerendered").pipe(Fe(e)).subscribe(({pageNumber:t,cssTransform:i,source:r})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("pagerendered",!0,!0,{pageNumber:t,cssTransform:i}),r.div.dispatchEvent(s)}),ze(n,"textlayerrendered").pipe(Fe(e)).subscribe(({pageNumber:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t}),i.textLayerDiv?.dispatchEvent(r)}),ze(n,"pagechanging").pipe(Fe(e)).subscribe(({pageNumber:t,source:i})=>{const r=document.createEvent("UIEvents");r.initEvent("pagechanging",!0,!0),r.pageNumber=t,i.container.dispatchEvent(r)}),ze(n,"pagesinit").pipe(Fe(e)).subscribe(({source:t})=>{const i=document.createEvent("CustomEvent");i.initCustomEvent("pagesinit",!0,!0,null),t.container.dispatchEvent(i)}),ze(n,"pagesloaded").pipe(Fe(e)).subscribe(({pagesCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t}),i.container.dispatchEvent(r)}),ze(n,"scalechange").pipe(Fe(e)).subscribe(({scale:t,presetValue:i,source:r})=>{const s=document.createEvent("UIEvents");s.initEvent("scalechange",!0,!0),s.scale=t,s.presetValue=i,r.container.dispatchEvent(s)}),ze(n,"updateviewarea").pipe(Fe(e)).subscribe(({location:t,source:i})=>{const r=document.createEvent("UIEvents");r.initEvent("updateviewarea",!0,!0),r.location=t,i.container.dispatchEvent(r)}),ze(n,"find").pipe(Fe(e)).subscribe(({source:t,type:i,query:r,phraseSearch:s,caseSensitive:a,highlightAll:o,findPrevious:l})=>{if(t===window)return;const c=document.createEvent("CustomEvent");c.initCustomEvent("find"+i,!0,!0,{query:r,phraseSearch:s,caseSensitive:a,highlightAll:o,findPrevious:l}),window.dispatchEvent(c)}),ze(n,"attachmentsloaded").pipe(Fe(e)).subscribe(({attachmentsCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t}),i.container.dispatchEvent(r)}),ze(n,"sidebarviewchanged").pipe(Fe(e)).subscribe(({view:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("sidebarviewchanged",!0,!0,{view:t}),i.outerContainer.dispatchEvent(r)}),ze(n,"pagemode").pipe(Fe(e)).subscribe(({mode:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagemode",!0,!0,{mode:t}),i.pdfViewer.container.dispatchEvent(r)}),ze(n,"namedaction").pipe(Fe(e)).subscribe(({action:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("namedaction",!0,!0,{action:t}),i.pdfViewer.container.dispatchEvent(r)}),ze(n,"presentationmodechanged").pipe(Fe(e)).subscribe(({active:t,switchInProgress:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("presentationmodechanged",!0,!0,{active:t,switchInProgress:i}),window.dispatchEvent(r)}),ze(n,"outlineloaded").pipe(Fe(e)).subscribe(({outlineCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t}),i.container.dispatchEvent(r)})}(t,e),t}(yd,this.destroy$),ze(this.eventBus,"pagerendered").pipe(Fe(this.destroy$)).subscribe(t=>{this.pageRendered.emit(t)}),ze(this.eventBus,"pagesinit").pipe(Fe(this.destroy$)).subscribe(t=>{this.pageInitialized.emit(t)}),ze(this.eventBus,"pagechanging").pipe(Fe(this.destroy$)).subscribe(({pageNumber:t})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=t,this.pageChange.emit(t)},100)}),ze(this.eventBus,"textlayerrendered").pipe(Fe(this.destroy$)).subscribe(t=>{this.textLayerRendered.emit(t)})}initPDFServices(){this.pdfLinkService=new mx({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new yx({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:B2.DISABLED,findController:this.pdfFindController,l10n:new gx("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:yb.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),z2(qi,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new vx(this.getPDFOptions()):new kx(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(t){return t<1?1:t>this._pdf.numPages?this._pdf.numPages:t}getDocumentParams(){const t=typeof this.src;if(!this._cMapsUrl)return this.src;const i={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0,isEvalSupported:!1};return"string"===t?i.url=this.src:"object"===t&&(void 0!==this.src.byteLength?i.data=this.src:Object.assign(i,this.src)),i}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=vb(this.getDocumentParams()),this.loadingTask.onProgress=i=>{this.onProgress.emit(i)};const t=this.src;Qe(this.loadingTask.promise).pipe(Fe(this.destroy$)).subscribe({next:i=>{this._pdf=i,this.lastLoaded=t,this.afterLoadComplete.emit(i),this.resetPdfDocument(),this.update()},error:i=>{this.lastLoaded=null,this.onError.emit(i)}})}update(){this.page=this._page,this.render()}render(){if(this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.pdfViewer._pages?.length)this.updateSize();else{const t=this.pageInitialized.subscribe(()=>{this.updateSize(),t.unsubscribe()})}}getScale(t,i){const r=this._showBorders?2*n.BORDER_WIDTH:0,s=this.pdfViewerContainer.nativeElement.clientWidth-r,a=this.pdfViewerContainer.nativeElement.clientHeight-r;if(0===a||0===i||0===s||0===t)return 1;let o=1;switch(this._zoomScale){case"page-fit":o=Math.min(a/i,s/t);break;case"page-height":o=a/i;break;default:o=s/t}return this._zoom*o/n.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){ul()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){ul()||this.ngZone.runOutsideAngular(()=>{ze(window,"resize").pipe(function YF(n,e=XF){return Ke((t,i)=>{let r=null,s=null,a=null;const o=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=a+n,h=e.now();if(h<c)return r=this.schedule(void 0,c-h),void i.add(r);o()}t.subscribe($e(i,c=>{s=c,a=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{o(),i.complete()},void 0,()=>{s=r=null}))})}(100),Ti(()=>this._canAutoResize&&!!this._pdf),Fe(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(i){return new(i||n)(T(Xt),T(Ce))};static \u0275cmp=ka({type:n,selectors:[["pdf-viewer"]],viewQuery:function(i,r){if(1&i&&J1(lB,5),2&i){let s;jc(s=Hc())&&(r.pdfViewerContainer=s.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[on],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(i,r){1&i&&(de(0,"div",0,1),Kt(2,"div",2),we())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .canvasWrapper canvas{width:100%}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})}return n})(),uB=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=vn({type:n});static \u0275inj=sn({})}return n})();const pB=["pdfViewer"];function fB(n,e){if(1&n){const t=ro();no(0),de(1,"pdf-viewer",15),Je("after-load-complete",function(r){return ki(t),vi(_n(2).onPdfLoaded(r))}),we(),io()}if(2&n){const t=_n(2);wt(1),Vn("src",t.pdfSrc)("render-text",!0)("original-size",!1)("fit-to-page",!0)("zoom",t.zoom)("show-all",!0)("autoresize",!0)("stick-to-page",!1)}}function gB(n,e){if(1&n){const t=ro();no(0),de(1,"div",3)(2,"div",4)(3,"button",5),Je("click",function(){return ki(t),vi(_n().handleClosePdf())}),Kt(4,"i",6),de(5,"span"),xt(6,"Regresar"),we()(),de(7,"h2"),xt(8),we(),de(9,"div",7)(10,"button",8),Je("click",function(){return ki(t),vi(_n().zoomOut())}),Kt(11,"i",9),we(),de(12,"span"),xt(13),we(),de(14,"button",8),Je("click",function(){return ki(t),vi(_n().zoomIn())}),Kt(15,"i",10),we(),de(16,"button",8),Je("click",function(){return ki(t),vi(_n().resetZoom())}),Kt(17,"i",11),we()()(),de(18,"div",12,13),to(20,fB,2,8,"ng-container",14),we()(),io()}if(2&n){const t=_n();wt(8),Ls(t.selectedPdf.title),wt(2),Vn("disabled",t.zoom<=t.minZoom),wt(3),oo("",(100*t.zoom).toFixed(0),"%"),wt(1),Vn("disabled",t.zoom>=t.maxZoom),wt(2),Vn("disabled",1===t.zoom),wt(4),Vn("ngIf",t.pdfSrc)}}function yB(n,e){if(1&n){const t=ro();de(0,"tr",32)(1,"td")(2,"button",33),Je("click",function(){const s=ki(t).$implicit;return vi(_n(2).handleViewPdf(s))}),Kt(3,"i",34),de(4,"span"),xt(5,"Ver"),we()()(),de(6,"td"),xt(7),we(),de(8,"td")(9,"div",35)(10,"div",36),Kt(11,"i",37),we(),de(12,"span"),xt(13),we()()(),de(14,"td"),xt(15),we(),de(16,"td")(17,"a",38),Kt(18,"i",39),de(19,"span"),xt(20,"Descargar"),we()()()()}if(2&n){const t=e.$implicit,i=e.index;wt(7),Ls(i+1),wt(6),Ls(t.title),wt(2),Ls(t.version),wt(2),Vn("href",t.url,Bu)}}function mB(n,e){if(1&n){const t=ro();de(0,"header",16)(1,"div",17),Kt(2,"i",18),de(3,"div",19),Kt(4,"i",20),de(5,"input",21),Je("ngModelChange",function(r){return ki(t),vi(_n().searchQuery=r)})("ngModelChange",function(){return ki(t),vi(_n().filterPdfs())}),we()()()(),de(6,"main",22)(7,"div",23)(8,"div",24)(9,"h1",25),xt(10,"Canciones IGC"),we()(),de(11,"div",26)(12,"div",27)(13,"span",28)(14,"span",29),xt(15),we()()()()(),de(16,"div",30)(17,"table")(18,"thead")(19,"tr")(20,"th"),xt(21,"Ver"),we(),de(22,"th"),xt(23,"#"),we(),de(24,"th"),xt(25,"T\xedtulo"),we(),de(26,"th"),xt(27,"Versi\xf3n"),we(),de(28,"th"),xt(29,"Descargar"),we()()(),de(30,"tbody"),to(31,yB,21,4,"tr",31),we()()()()}if(2&n){const t=_n();wt(5),Vn("ngModel",t.searchQuery),wt(10),oo(" \u2022 ",t.filteredPdfs.length," Canciones"),wt(16),Vn("ngForOf",t.filteredPdfs)}}let kB=(()=>{class n{constructor(t,i){this.sanitizer=t,this.renderer=i,this.pdfs=[],this.filteredPdfs=[],this.selectedPdf=null,this.searchQuery="",this.pdfSrc=null,this.zoom=1,this.minZoom=.5,this.maxZoom=3,this.pdfDocument=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchDistance=0,this.zoomCenter=null}ngOnInit(){this.pdfs=HO.M,this.filterPdfs()}filterPdfs(){const t=i=>i.normalize("NFD").replace(/[\u0300-\u036f]/g,"");this.filteredPdfs=this.pdfs.sort((i,r)=>t(i.title).localeCompare(t(r.title))).filter(i=>t(i.title.toLowerCase()).includes(t(this.searchQuery.toLowerCase())))}handleViewPdf(t){this.selectedPdf=t,this.pdfSrc=t.url,this.zoom=1}handleClosePdf(){this.selectedPdf=null,this.pdfSrc=null}getSafeUrl(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}onPdfLoaded(t){this.pdfDocument=t}onMouseWheel(t){this.selectedPdf&&t.ctrlKey&&this.isMouseOverPdf(t)&&(t.preventDefault(),this.zoomToPoint(t.clientX,t.clientY,(t.deltaY||t.detail||t.wheelDelta)>0?.95:1.05))}onTouchStart(t){2===t.touches.length&&this.pdfViewer?(t.preventDefault(),this.lastTouchDistance=this.getTouchDistance(t.touches[0],t.touches[1]),this.zoomCenter=this.getTouchCenter(t.touches[0],t.touches[1])):1===t.touches.length&&(this.touchStartX=t.touches[0].clientX,this.touchStartY=t.touches[0].clientY)}onTouchMove(t){if(2===t.touches.length&&this.pdfViewer){t.preventDefault();const i=this.getTouchDistance(t.touches[0],t.touches[1]),r=i/this.lastTouchDistance;this.lastTouchDistance=i,this.zoomCenter&&this.zoomToPoint(this.zoomCenter.x,this.zoomCenter.y,r)}}onTouchEnd(t){this.zoomCenter=null}getTouchDistance(t,i){const r=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(r*r+s*s)}getTouchCenter(t,i){return{x:(t.clientX+i.clientX)/2,y:(t.clientY+i.clientY)/2}}zoomToPoint(t,i,r){if(this.pdfViewer){const s=this.pdfViewer.nativeElement.getBoundingClientRect(),a=(t-s.left)/s.width,o=(i-s.top)/s.height,l=this.zoom;if(this.zoom=Math.min(Math.max(this.zoom*r,this.minZoom),this.maxZoom),l!==this.zoom){const c=this.pdfViewer.nativeElement.querySelector(".ng2-pdf-viewer-container");if(c){const h=(c.scrollLeft+a*s.width)*(this.zoom/l)-a*s.width,d=(c.scrollTop+o*s.height)*(this.zoom/l)-o*s.height;requestAnimationFrame(()=>{c.scrollLeft=h,c.scrollTop=d})}}}}zoomIn(){if(this.pdfViewer){const t=this.pdfViewer.nativeElement.getBoundingClientRect();this.zoomToPoint(t.left+t.width/2,t.top+t.height/2,1.1)}}zoomOut(){if(this.pdfViewer){const t=this.pdfViewer.nativeElement.getBoundingClientRect();this.zoomToPoint(t.left+t.width/2,t.top+t.height/2,.9)}}resetZoom(){if(this.zoom=1,this.pdfViewer){const t=this.pdfViewer.nativeElement.querySelector(".ng2-pdf-viewer-container");t&&(t.scrollLeft=0,t.scrollTop=0)}}isMouseOverPdf(t){if(this.pdfViewer){const i=this.pdfViewer.nativeElement.getBoundingClientRect();return t.clientX>=i.left&&t.clientX<=i.right&&t.clientY>=i.top&&t.clientY<=i.bottom}return!1}static{this.\u0275fac=function(i){return new(i||n)(T(n5),T(ni))}}static{this.\u0275cmp=ka({type:n,selectors:[["app-letras"]],viewQuery:function(i,r){if(1&i&&J1(pB,5),2&i){let s;jc(s=Hc())&&(r.pdfViewer=s.first)}},hostBindings:function(i,r){1&i&&Je("wheel",function(a){return r.onMouseWheel(a)})("touchstart",function(a){return r.onTouchStart(a)})("touchmove",function(a){return r.onTouchMove(a)})("touchend",function(a){return r.onTouchEnd(a)})},decls:4,vars:2,consts:[[1,"pdf-reader"],[4,"ngIf","ngIfElse"],["pdfList",""],[1,"pdf-viewer"],[1,"pdf-controls"],[1,"back-button",3,"click"],[1,"pi","pi-arrow-left"],[1,"zoom-controls"],[3,"disabled","click"],[1,"pi","pi-minus",2,"font-size","2rem"],[1,"pi","pi-plus",2,"font-size","2rem"],[1,"pi","pi-refresh",2,"font-size","2rem"],[1,"pdf-container"],["pdfViewer",""],[4,"ngIf"],[2,"width","100%","height","100%",3,"src","render-text","original-size","fit-to-page","zoom","show-all","autoresize","stick-to-page","after-load-complete"],[1,"top-nav"],[1,"search-container"],[1,"pi","pi-home","home-icon"],[1,"search-input-container"],[1,"pi","pi-file","search-icon"],["type","text","placeholder","\xbfQu\xe9 documento quieres leer?",1,"search-input",3,"ngModel","ngModelChange"],[1,"main-content"],[1,"hero-section"],[1,"hero-image"],[1,"hero-title"],[1,"hero-info"],[1,"user-info"],[1,"user-details"],[1,"document-count"],[1,"pdf-list"],["class","pdf-item",4,"ngFor","ngForOf"],[1,"pdf-item"],[1,"view-button",3,"click"],[1,"pi","pi-eye"],[1,"pdf-title"],[1,"pdf-icon"],[1,"pi","pi-file"],["download","",1,"download-button",3,"href"],[1,"pi","pi-download"]],template:function(i,r){if(1&i&&(de(0,"div",0),to(1,gB,21,6,"ng-container",1),to(2,mB,32,3,"ng-template",null,2,p4),we()),2&i){const s=function uk(n){return function Jr(n,e){return n[e]}(function W8(){return z.lFrame.contextLView}(),ie+n)}(3);wt(1),Vn("ngIf",r.selectedPdf)("ngIfElse",s)}},dependencies:[SM,IM,Eh,V3,Vf,dB],styles:['.pdf-reader[_ngcontent-%COMP%]{min-height:100vh;background-color:#121212;color:#000;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;overflow:hidden;margin-top:-.5rem;margin-left:-.5rem;margin-block-end:-.5rem}.top-nav[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background-color:#1e1e1e;position:sticky;top:0;z-index:10;box-shadow:0 2px 10px #0003}.search-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;max-width:720px}.home-icon[_ngcontent-%COMP%]{width:24px;height:24px;color:#ffffffb3;margin-right:1rem;transition:color .3s ease,transform .3s ease}.home-icon[_ngcontent-%COMP%]:hover{color:#fff;transform:scale(1.1)}.search-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);width:18px;height:18px;color:#ffffffb3;transition:color .3s ease,transform .3s ease}.search-input[_ngcontent-%COMP%]{width:80%;padding:.75rem 1rem .75rem 3rem;background-color:#2c2c2c;border:none;border-radius:9999px;color:#fff;font-size:.95rem;transition:all .3s ease}.search-input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.search-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #fff3;background-color:#3c3c3c}.search-input[_ngcontent-%COMP%]:focus + .search-icon[_ngcontent-%COMP%]{color:#fff;transform:translateY(-50%) scale(1.1)}.main-content[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.hero-section[_ngcontent-%COMP%]{margin-bottom:2rem}.hero-image[_ngcontent-%COMP%]{height:100px;background-image:linear-gradient(45deg,#FF6B6B,#4ECDC4);background-size:200% 200%;background-position:center;border-radius:12px;display:flex;align-items:center;justify-content:center;margin-bottom:1rem;position:relative;overflow:hidden;box-shadow:0 4px 20px #0000004d;transition:transform .3s ease;animation:_ngcontent-%COMP%_gradientShift 10s ease infinite}.hero-image[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.hero-image[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:rgba(0,0,0,.3)}.hero-title[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;color:#fff;text-align:center;position:relative;z-index:1;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out,glowText 2s ease-in-out infinite alternate;text-shadow:2px 2px 4px rgba(0,0,0,.5)}.hero-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#fffc;margin-bottom:.5rem;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out .2s}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out .4s}.document-count[_ngcontent-%COMP%]{color:#ffffffb3}.pdf-list[_ngcontent-%COMP%]{margin-top:2rem;overflow-x:auto;background-color:#1e1e1e;border-radius:12px;box-shadow:0 4px 20px #0003;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out .6s}.pdf-list[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.pdf-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:1rem;font-weight:600;color:#fffc;border-bottom:2px solid #3E3E3E;text-transform:uppercase;font-size:.85rem}.pdf-item[_ngcontent-%COMP%]{transition:all .3s ease}.pdf-item[_ngcontent-%COMP%]:hover{background-color:#ffffff0d;transform:translateY(-2px)}.pdf-item[_ngcontent-%COMP%]:hover   .pdf-icon[_ngcontent-%COMP%]{background-color:#4caf50;transform:scale(1.1) rotate(360deg)}.pdf-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#ffffffe6;border-bottom:1px solid #2C2C2C}.pdf-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.pdf-icon[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#3e3e3e;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.view-button[_ngcontent-%COMP%], .download-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-size:.875rem;font-weight:600}.view-button[_ngcontent-%COMP%]:hover, .download-button[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px);box-shadow:0 4px 8px #0003}.view-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.download-button[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff;text-decoration:none;width:7rem}.pdf-viewer[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:center;color:#fff;font-size:1.5rem;animation:_ngcontent-%COMP%_fadeInDown .5s ease-out}.pdf-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;background-color:#2c2c2c;border-radius:8px;overflow:hidden}.pdf-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}.back-button[_ngcontent-%COMP%]{width:15%;display:flex;align-items:center;gap:.5rem;background:none;border:none;color:#fff;cursor:pointer;font-size:1rem;margin-bottom:1rem;transition:all .3s ease;padding:.5rem;border-radius:4px}.back-button[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transform:translate(-5px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes _ngcontent-%COMP%_glowText{0%{text-shadow:0 0 5px rgba(255,255,255,.5)}to{text-shadow:0 0 20px rgba(255,255,255,.8)}}@media (max-width: 768px){.hero-title[_ngcontent-%COMP%]{font-size:2.5rem}.main-content[_ngcontent-%COMP%]{padding:1rem}.pdf-list[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{min-width:600px}.view-button[_ngcontent-%COMP%], .download-button[_ngcontent-%COMP%]{padding:.4rem .8rem;font-size:.8rem}}@media (max-width: 480px){.top-nav[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-container[_ngcontent-%COMP%]{margin-bottom:1rem}.hero-image[_ngcontent-%COMP%]{height:90px}.hero-title[_ngcontent-%COMP%]{font-size:2rem}.pdf-icon[_ngcontent-%COMP%]{width:32px;height:32px}}.pdf-viewer[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#1e1e1e;z-index:20;display:flex;flex-direction:column;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.pdf-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.pdf-controls[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.5rem}.zoom-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:.5rem;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#2c2c2c;cursor:not-allowed}.zoom-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:.9rem}.pdf-container[_ngcontent-%COMP%]{flex:1;background-color:#2c2c2c;border-radius:8px;overflow:hidden;box-shadow:0 4px 6px #0000001a}.pdf-container[_ngcontent-%COMP%]     .ng2-pdf-viewer-container{background-color:#2c2c2c!important}.pdf-container[_ngcontent-%COMP%]     .page{box-shadow:0 0 10px #0000004d;margin-bottom:20px!important}@media (max-width: 768px){.pdf-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.pdf-controls[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.zoom-controls[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.pdf-container[_ngcontent-%COMP%]{border-radius:0}}@media (max-width: 768px){.pdf-container[_ngcontent-%COMP%]{touch-action:none}}.pdf-container[_ngcontent-%COMP%]     .ng2-pdf-viewer-container{background-color:#2c2c2c!important;transition:transform .1s ease-out}.pdf-container[_ngcontent-%COMP%]     .page{box-shadow:0 0 10px #0000004d;margin-bottom:20px!important;transition:transform .1s ease-out}@media (max-width: 768px){.pdf-container[_ngcontent-%COMP%]{border-radius:0}}']})}}return n})(),vB=(()=>{class n{constructor(){this.title="letras"}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ka({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(i,r){1&i&&Kt(0,"app-letras")(1,"router-outlet")},dependencies:[ff,kB]})}}return n})();const Mx=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wx=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],bx=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],xx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Cx=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_x=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ax=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ex=new O("LucideIcons",{factory:()=>new q2({})});class q2{constructor(e){this.icons=e}getIcon(e){return this.hasIcon(e)?this.icons[e]:null}hasIcon(e){return"object"==typeof this.icons&&e in this.icons}}class Hfe{constructor(e){this.icons=e}}const zfe=n=>new q2(n??{});let Bfe=(()=>{class n{static pick(t){return{ngModule:n,providers:[{provide:Ex,multi:!0,useValue:new q2(t)},{provide:Ex,multi:!0,useFactory:zfe,deps:[[new La,Hfe]]}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vn({type:n}),n.\u0275inj=sn({imports:[[]]}),n})(),qfe=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=vn({type:n,bootstrap:[vB]})}static{this.\u0275inj=sn({imports:[eR,jO,jF,Bfe.pick({Bell:wx,Users:Ax,Home:_x,Eye:xx,Download:bx,ArrowLeft:Mx,FileText:Cx}),uB]})}}return n})();QP().bootstrapModule(qfe).catch(n=>console.error(n))}},gd=>{gd(gd.s=880)}]);